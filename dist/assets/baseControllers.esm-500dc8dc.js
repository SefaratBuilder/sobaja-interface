import{a8 as Nr,a9 as Yr,i as Oo,aa as z0,f as $0,E as D0,ab as Jr,ac as Ml,g as Ze,B as q,ad as Rt,ae as yd,h as at,af as M0,ag as Tf,ah as pd,ai as Sf,aj as Ul,ak as U0,al as V0,am as Di,an as _d,k as j0,D as F0,b as Tt,q as Vl}from"./index-431da0f4.js";function qa(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function H0(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function bd(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function q0(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");qa(e.outputLen),qa(e.blockLen)}function G0(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function W0(e,t){bd(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const Je={number:qa,bool:H0,bytes:bd,hash:q0,exists:G0,output:W0},$s=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Z0=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),wd=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),ro=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),ct=(e,t)=>e<<32-t|e>>>t,md=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!md)throw new Error("Non little-endian hardware is not supported");const K0=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function X0(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=K0[e[r]];return t}function Y0(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}const vd=async()=>{};async function J0(e,t,r){let n=Date.now();for(let i=0;i<e;i++){r(i);const o=Date.now()-n;o>=0&&o<t||(await vd(),n+=o)}}function Ed(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Rn(e){if(typeof e=="string"&&(e=Ed(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}function Td(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];const t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const o=e[n];r.set(o,i),i+=o.length}return r}class Co{clone(){return this._cloneInto()}}const Q0=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function ey(e,t){if(t!==void 0&&(typeof t!="object"||!Q0(t)))throw new TypeError("Options should be object or undefined");return Object.assign(e,t)}function Lo(e){const t=n=>e().update(Rn(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Sd(e){const t=(n,i)=>e(i).update(Rn(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}function Af(e=32){if($s&&typeof $s.getRandomValues=="function")return $s.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const ty=Object.freeze(Object.defineProperty({__proto__:null,Hash:Co,asyncLoop:J0,bytesToHex:X0,checkOpts:ey,concatBytes:Td,createView:ro,hexToBytes:Y0,isLE:md,nextTick:vd,randomBytes:Af,rotr:ct,toBytes:Rn,u32:wd,u8:Z0,utf8ToBytes:Ed,wrapConstructor:Lo,wrapConstructorWithOpts:Sd},Symbol.toStringTag,{value:"Module"}));function ry(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),f=n?4:0,l=n?0:4;e.setUint32(t+f,s,n),e.setUint32(t+l,a,n)}class ny extends Co{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=ro(this.buffer)}update(t){Je.exists(this);const{view:r,buffer:n,blockLen:i}=this;t=Rn(t);const o=t.length;for(let s=0;s<o;){const a=Math.min(i-this.pos,o-s);if(a===i){const f=ro(t);for(;i<=o-s;s+=i)this.process(f,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Je.exists(this),Je.output(t,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:o}=this;let{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let b=s;b<i;b++)r[b]=0;ry(n,i-8,BigInt(this.length*8),o),this.process(n,0);const a=ro(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=f/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<l;b++)a.setUint32(4*b,u[b],o)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}}const Mi=BigInt(2**32-1),Ga=BigInt(32);function Ad(e,t=!1){return t?{h:Number(e&Mi),l:Number(e>>Ga&Mi)}:{h:Number(e>>Ga&Mi)|0,l:Number(e&Mi)|0}}function iy(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:s}=Ad(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}const oy=(e,t)=>BigInt(e>>>0)<<Ga|BigInt(t>>>0),sy=(e,t,r)=>e>>>r,ay=(e,t,r)=>e<<32-r|t>>>r,fy=(e,t,r)=>e>>>r|t<<32-r,ly=(e,t,r)=>e<<32-r|t>>>r,uy=(e,t,r)=>e<<64-r|t>>>r-32,cy=(e,t,r)=>e>>>r-32|t<<64-r,dy=(e,t)=>t,hy=(e,t)=>e,gy=(e,t,r)=>e<<r|t>>>32-r,yy=(e,t,r)=>t<<r|e>>>32-r,py=(e,t,r)=>t<<r-32|e>>>64-r,_y=(e,t,r)=>e<<r-32|t>>>64-r;function by(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}const wy=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),my=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,vy=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),Ey=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,Ty=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),Sy=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0,li={fromBig:Ad,split:iy,toBig:oy,shrSH:sy,shrSL:ay,rotrSH:fy,rotrSL:ly,rotrBH:uy,rotrBL:cy,rotr32H:dy,rotr32L:hy,rotlSH:gy,rotlSL:yy,rotlBH:py,rotlBL:_y,add:by,add3L:wy,add3H:my,add4L:vy,add4H:Ey,add5H:Sy,add5L:Ty};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Nd=BigInt(0),Po=BigInt(1),Ay=BigInt(2),ko=e=>e instanceof Uint8Array,Ny=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function En(e){if(!ko(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=Ny[e[r]];return t}function Bd(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function Nf(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Tn(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(e.length%2)throw new Error("hex string is invalid: unpadded "+e.length);const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("invalid byte sequence");t[r]=o}return t}function He(e){return Nf(En(e))}function Bf(e){if(!ko(e))throw new Error("Uint8Array expected");return Nf(En(Uint8Array.from(e).reverse()))}const fr=(e,t)=>Tn(e.toString(16).padStart(t*2,"0")),xd=(e,t)=>fr(e,t).reverse(),By=e=>Tn(Bd(e));function Ce(e,t,r){let n;if(typeof t=="string")try{n=Tn(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else if(ko(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function Qe(...e){const t=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let r=0;return e.forEach(n=>{if(!ko(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}function xy(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function zo(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Ry(e){let t;for(t=0;e>Nd;e>>=Po,t+=1);return t}const Iy=(e,t)=>e>>BigInt(t)&Po,Oy=(e,t,r)=>e|(r?Po:Nd)<<BigInt(t),xf=e=>(Ay<<BigInt(e-1))-Po,Ds=e=>new Uint8Array(e),jl=e=>Uint8Array.from(e);function Rd(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Ds(e),i=Ds(e),o=0;const s=()=>{n.fill(1),i.fill(0),o=0},a=(...b)=>r(i,n,...b),f=(b=Ds())=>{i=a(jl([0]),b),n=a(),b.length!==0&&(i=a(jl([1]),b),n=a())},l=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let b=0;const p=[];for(;b<t;){n=a();const g=n.slice();p.push(g),b+=n.length}return Qe(...p)};return(b,p)=>{s(),f(b);let g;for(;!(g=p(l()));)f();return s(),g}}const Cy={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function In(e,t,r={}){const n=(i,o,s)=>{const a=Cy[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);const f=e[i];if(!(s&&f===void 0)&&!a(f,e))throw new Error(`Invalid param ${String(i)}=${f} (${typeof f}), expected ${o}`)};for(const[i,o]of Object.entries(t))n(i,o,!1);for(const[i,o]of Object.entries(r))n(i,o,!0);return e}const Ly=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Iy,bitLen:Ry,bitMask:xf,bitSet:Oy,bytesToHex:En,bytesToNumberBE:He,bytesToNumberLE:Bf,concatBytes:Qe,createHmacDrbg:Rd,ensureBytes:Ce,equalBytes:xy,hexToBytes:Tn,hexToNumber:Nf,numberToBytesBE:fr,numberToBytesLE:xd,numberToHexUnpadded:Bd,numberToVarBytesBE:By,utf8ToBytes:zo,validateObject:In},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ie=BigInt(0),_e=BigInt(1),Dr=BigInt(2),Py=BigInt(3),Wa=BigInt(4),Fl=BigInt(5),Hl=BigInt(8);BigInt(9);BigInt(16);function Ae(e,t){const r=e%t;return r>=Ie?r:t+r}function ky(e,t,r){if(r<=Ie||t<Ie)throw new Error("Expected power/modulo > 0");if(r===_e)return Ie;let n=_e;for(;t>Ie;)t&_e&&(n=n*e%r),e=e*e%r,t>>=_e;return n}function tt(e,t,r){let n=e;for(;t-- >Ie;)n*=n,n%=r;return n}function Za(e,t){if(e===Ie||t<=Ie)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Ae(e,t),n=t,i=Ie,o=_e;for(;r!==Ie;){const a=n/r,f=n%r,l=i-o*a;n=r,r=f,i=o,o=l}if(n!==_e)throw new Error("invert: does not exist");return Ae(i,t)}function zy(e){const t=(e-_e)/Dr;let r,n,i;for(r=e-_e,n=0;r%Dr===Ie;r/=Dr,n++);for(i=Dr;i<e&&ky(i,t,e)!==e-_e;i++);if(n===1){const s=(e+_e)/Wa;return function(f,l){const u=f.pow(l,s);if(!f.eql(f.sqr(u),l))throw new Error("Cannot find square root");return u}}const o=(r+_e)/Dr;return function(a,f){if(a.pow(f,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=n,u=a.pow(a.mul(a.ONE,i),r),b=a.pow(f,o),p=a.pow(f,r);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let g=1;for(let C=a.sqr(p);g<l&&!a.eql(C,a.ONE);g++)C=a.sqr(C);const E=a.pow(u,_e<<BigInt(l-g-1));u=a.sqr(E),b=a.mul(b,E),p=a.mul(p,u),l=g}return b}}function $y(e){if(e%Wa===Py){const t=(e+_e)/Wa;return function(n,i){const o=n.pow(i,t);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(e%Hl===Fl){const t=(e-Fl)/Hl;return function(n,i){const o=n.mul(i,Dr),s=n.pow(o,t),a=n.mul(i,s),f=n.mul(n.mul(a,Dr),s),l=n.mul(a,n.sub(f,n.ONE));if(!n.eql(n.sqr(l),i))throw new Error("Cannot find square root");return l}}return zy(e)}const f2=(e,t)=>(Ae(e,t)&_e)===_e,Dy=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Id(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Dy.reduce((n,i)=>(n[i]="function",n),t);return In(e,r)}function My(e,t,r){if(r<Ie)throw new Error("Expected power > 0");if(r===Ie)return e.ONE;if(r===_e)return t;let n=e.ONE,i=t;for(;r>Ie;)r&_e&&(n=e.mul(n,i)),i=e.sqr(i),r>>=_e;return n}function Uy(e,t){const r=new Array(t.length),n=t.reduce((o,s,a)=>e.is0(s)?o:(r[a]=o,e.mul(o,s)),e.ONE),i=e.inv(n);return t.reduceRight((o,s,a)=>e.is0(s)?o:(r[a]=e.mul(o,r[a]),e.mul(o,s)),i),r}function Rf(e,t){const r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Vy(e,t,r=!1,n={}){if(e<=Ie)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:o}=Rf(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=$y(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:xf(i),ZERO:Ie,ONE:_e,create:f=>Ae(f,e),isValid:f=>{if(typeof f!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof f}`);return Ie<=f&&f<e},is0:f=>f===Ie,isOdd:f=>(f&_e)===_e,neg:f=>Ae(-f,e),eql:(f,l)=>f===l,sqr:f=>Ae(f*f,e),add:(f,l)=>Ae(f+l,e),sub:(f,l)=>Ae(f-l,e),mul:(f,l)=>Ae(f*l,e),pow:(f,l)=>My(a,f,l),div:(f,l)=>Ae(f*Za(l,e),e),sqrN:f=>f*f,addN:(f,l)=>f+l,subN:(f,l)=>f-l,mulN:(f,l)=>f*l,inv:f=>Za(f,e),sqrt:n.sqrt||(f=>s(a,f)),invertBatch:f=>Uy(a,f),cmov:(f,l,u)=>u?l:f,toBytes:f=>r?xd(f,o):fr(f,o),fromBytes:f=>{if(f.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${f.length}`);return r?Bf(f):He(f)}});return Object.freeze(a)}function l2(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r}function jy(e,t,r=!1){e=Ce("privateHash",e);const n=e.length,i=Rf(t).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);const o=r?Bf(e):He(e);return Ae(o,t-_e)+_e}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Fy=BigInt(0),Ms=BigInt(1);function Hy(e,t){const r=(i,o)=>{const s=o.negate();return i?s:o},n=i=>{const o=Math.ceil(t/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:r,unsafeLadder(i,o){let s=e.ZERO,a=i;for(;o>Fy;)o&Ms&&(s=s.add(a)),a=a.double(),o>>=Ms;return s},precomputeWindow(i,o){const{windows:s,windowSize:a}=n(o),f=[];let l=i,u=l;for(let b=0;b<s;b++){u=l,f.push(u);for(let p=1;p<a;p++)u=u.add(l),f.push(u);l=u.double()}return f},wNAF(i,o,s){const{windows:a,windowSize:f}=n(i);let l=e.ZERO,u=e.BASE;const b=BigInt(2**i-1),p=2**i,g=BigInt(i);for(let E=0;E<a;E++){const C=E*f;let L=Number(s&b);s>>=g,L>f&&(L-=p,s+=Ms);const x=C,w=C+Math.abs(L)-1,N=E%2!==0,R=L<0;L===0?u=u.add(r(N,o[x])):l=l.add(r(R,o[w]))}return{p:l,f:u}},wNAFCached(i,o,s,a){const f=i._WINDOW_SIZE||1;let l=o.get(i);return l||(l=this.precomputeWindow(i,f),f!==1&&o.set(i,a(l))),this.wNAF(f,l,s)}}}function Od(e){return Id(e.Fp),In(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Rf(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function qy(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")return zo(e);throw new Error("DST must be Uint8Array or string")}const Gy=He;function rr(e,t){if(e<0||e>=1<<8*t)throw new Error(`bad I2OSP call: value=${e} length=${t}`);const r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=e&255,e>>>=8;return new Uint8Array(r)}function Wy(e,t){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}function ui(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected")}function If(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function Zy(e,t,r,n){ui(e),ui(t),If(r),t.length>255&&(t=n(Qe(zo("H2C-OVERSIZE-DST-"),t)));const{outputLen:i,blockLen:o}=n,s=Math.ceil(r/i);if(s>255)throw new Error("Invalid xmd length");const a=Qe(t,rr(t.length,1)),f=rr(0,o),l=rr(r,2),u=new Array(s),b=n(Qe(f,e,l,rr(0,1),a));u[0]=n(Qe(b,rr(1,1),a));for(let g=1;g<=s;g++){const E=[Wy(b,u[g-1]),rr(g+1,1),a];u[g]=n(Qe(...E))}return Qe(...u).slice(0,r)}function Ky(e,t,r,n,i){if(ui(e),ui(t),If(r),t.length>255){const o=Math.ceil(2*n/8);t=i.create({dkLen:o}).update(zo("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(e).update(rr(r,2)).update(t).update(rr(t.length,1)).digest()}function ql(e,t,r){In(r,{DST:"string",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:i,m:o,hash:s,expand:a,DST:f}=r;ui(e),If(t);const l=qy(f),u=n.toString(2).length,b=Math.ceil((u+i)/8),p=t*o*b;let g;if(a==="xmd")g=Zy(e,l,p,s);else if(a==="xof")g=Ky(e,l,p,i,s);else if(a==="_internal_pass")g=e;else throw new Error('expand must be "xmd" or "xof"');const E=new Array(t);for(let C=0;C<t;C++){const L=new Array(o);for(let x=0;x<o;x++){const w=b*(x+C*o),N=g.subarray(w,w+b);L[x]=Ae(Gy(N),n)}E[C]=L}return E}function Xy(e,t){const r=t.map(n=>Array.from(n).reverse());return(n,i)=>{const[o,s,a,f]=r.map(l=>l.reduce((u,b)=>e.add(e.mul(u,n),b)));return n=e.div(o,s),i=e.mul(i,e.div(a,f)),{x:n,y:i}}}function Yy(e,t,r){if(typeof t!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const o=ql(n,2,{...r,DST:r.DST,...i}),s=e.fromAffine(t(o[0])),a=e.fromAffine(t(o[1])),f=s.add(a).clearCofactor();return f.assertValidity(),f},encodeToCurve(n,i){const o=ql(n,1,{...r,DST:r.encodeDST,...i}),s=e.fromAffine(t(o[0])).clearCofactor();return s.assertValidity(),s}}}const Jy=(e,t,r)=>e&t^~e&r,Qy=(e,t,r)=>e&t^e&r^t&r,ep=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Yt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Jt=new Uint32Array(64);class Cd extends ny{constructor(){super(64,32,8,!1),this.A=Yt[0]|0,this.B=Yt[1]|0,this.C=Yt[2]|0,this.D=Yt[3]|0,this.E=Yt[4]|0,this.F=Yt[5]|0,this.G=Yt[6]|0,this.H=Yt[7]|0}get(){const{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:f}=this;return[t,r,n,i,o,s,a,f]}set(t,r,n,i,o,s,a,f){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=f|0}process(t,r){for(let b=0;b<16;b++,r+=4)Jt[b]=t.getUint32(r,!1);for(let b=16;b<64;b++){const p=Jt[b-15],g=Jt[b-2],E=ct(p,7)^ct(p,18)^p>>>3,C=ct(g,17)^ct(g,19)^g>>>10;Jt[b]=C+Jt[b-7]+E+Jt[b-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:f,G:l,H:u}=this;for(let b=0;b<64;b++){const p=ct(a,6)^ct(a,11)^ct(a,25),g=u+p+Jy(a,f,l)+ep[b]+Jt[b]|0,C=(ct(n,2)^ct(n,13)^ct(n,22))+Qy(n,i,o)|0;u=l,l=f,f=a,a=s+g|0,s=o,o=i,i=n,n=g+C|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,f=f+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,i,o,s,a,f,l,u)}roundClean(){Jt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class tp extends Cd{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const ci=Lo(()=>new Cd),rp=Lo(()=>new tp),np=Object.freeze(Object.defineProperty({__proto__:null,sha224:rp,sha256:ci},Symbol.toStringTag,{value:"Module"})),[Ld,Pd,kd]=[[],[],[]],ip=BigInt(0),Fn=BigInt(1),op=BigInt(2),sp=BigInt(7),ap=BigInt(256),fp=BigInt(113);for(let e=0,t=Fn,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],Ld.push(2*(5*n+r)),Pd.push((e+1)*(e+2)/2%64);let i=ip;for(let o=0;o<7;o++)t=(t<<Fn^(t>>sp)*fp)%ap,t&op&&(i^=Fn<<(Fn<<BigInt(o))-Fn);kd.push(i)}const[lp,up]=li.split(kd,!0),Gl=(e,t,r)=>r>32?li.rotlBH(e,t,r):li.rotlSH(e,t,r),Wl=(e,t,r)=>r>32?li.rotlBL(e,t,r):li.rotlSL(e,t,r);function zd(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let s=0;s<10;s++)r[s]=e[s]^e[s+10]^e[s+20]^e[s+30]^e[s+40];for(let s=0;s<10;s+=2){const a=(s+8)%10,f=(s+2)%10,l=r[f],u=r[f+1],b=Gl(l,u,1)^r[a],p=Wl(l,u,1)^r[a+1];for(let g=0;g<50;g+=10)e[s+g]^=b,e[s+g+1]^=p}let i=e[2],o=e[3];for(let s=0;s<24;s++){const a=Pd[s],f=Gl(i,o,a),l=Wl(i,o,a),u=Ld[s];i=e[u],o=e[u+1],e[u]=f,e[u+1]=l}for(let s=0;s<50;s+=10){for(let a=0;a<10;a++)r[a]=e[s+a];for(let a=0;a<10;a++)e[s+a]^=~r[(a+2)%10]&r[(a+4)%10]}e[0]^=lp[n],e[1]^=up[n]}r.fill(0)}class Ti extends Co{constructor(t,r,n,i=!1,o=24){if(super(),this.blockLen=t,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Je.number(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=wd(this.state)}keccak(){zd(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Je.exists(this);const{blockLen:r,state:n}=this;t=Rn(t);const i=t.length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);for(let a=0;a<s;a++)n[this.pos++]^=t[o++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:r,pos:n,blockLen:i}=this;t[n]^=r,r&128&&n===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){Je.exists(this,!1),Je.bytes(t),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,o=t.length;i<o;){this.posOut>=n&&this.keccak();const s=Math.min(n-this.posOut,o-i);t.set(r.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Je.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Je.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:r,suffix:n,outputLen:i,rounds:o,enableXOF:s}=this;return t||(t=new Ti(r,n,i,s,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=n,t.outputLen=i,t.enableXOF=s,t.destroyed=this.destroyed,t}}const Br=(e,t,r)=>Lo(()=>new Ti(t,e,r)),cp=Br(6,144,224/8),dp=Br(6,136,256/8),hp=Br(6,104,384/8),gp=Br(6,72,512/8),yp=Br(1,144,224/8),pp=Br(1,136,256/8),_p=Br(1,104,384/8),bp=Br(1,72,512/8),$d=(e,t,r)=>Sd((n={})=>new Ti(t,e,n.dkLen===void 0?r:n.dkLen,!0)),wp=$d(31,168,128/8),mp=$d(31,136,256/8),vp=Object.freeze(Object.defineProperty({__proto__:null,Keccak:Ti,keccakP:zd,keccak_224:yp,keccak_256:pp,keccak_384:_p,keccak_512:bp,sha3_224:cp,sha3_256:dp,sha3_384:hp,sha3_512:gp,shake128:wp,shake256:mp},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ep(e){const t=Od(e);In(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:Tp,hexToBytes:Sp}=Ly,jr={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=jr;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Tp(n),l:e.subarray(r+2)}},toSig(e){const{Err:t}=jr,r=typeof e=="string"?Sp(e):e;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:i,l:o}=jr._parseInt(r.subarray(2)),{d:s,l:a}=jr._parseInt(o);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(e){const t=l=>Number.parseInt(l[0],16)&8?"00"+l:l,r=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},n=t(r(e.s)),i=t(r(e.r)),o=n.length/2,s=i.length/2,a=r(o),f=r(s);return`30${r(s+o+4)}02${f}${i}02${a}${n}`}},dt=BigInt(0),Te=BigInt(1),kt=BigInt(2),co=BigInt(3),Zl=BigInt(4);function Ap(e){const t=Ep(e),{Fp:r}=t,n=t.toBytes||((E,C,L)=>{const x=C.toAffine();return Qe(Uint8Array.from([4]),r.toBytes(x.x),r.toBytes(x.y))}),i=t.fromBytes||(E=>{const C=E.subarray(1),L=r.fromBytes(C.subarray(0,r.BYTES)),x=r.fromBytes(C.subarray(r.BYTES,2*r.BYTES));return{x:L,y:x}});function o(E){const{a:C,b:L}=t,x=r.sqr(E),w=r.mul(x,E);return r.add(r.add(w,r.mul(E,C)),L)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(E){return typeof E=="bigint"&&dt<E&&E<t.n}function a(E){if(!s(E))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function f(E){const{allowedPrivateKeyLengths:C,nByteLength:L,wrapPrivateKey:x,n:w}=t;if(C&&typeof E!="bigint"){if(E instanceof Uint8Array&&(E=En(E)),typeof E!="string"||!C.includes(E.length))throw new Error("Invalid key");E=E.padStart(L*2,"0")}let N;try{N=typeof E=="bigint"?E:He(Ce("private key",E,L))}catch{throw new Error(`private key must be ${L} bytes, hex or bigint, not ${typeof E}`)}return x&&(N=Ae(N,w)),a(N),N}const l=new Map;function u(E){if(!(E instanceof b))throw new Error("ProjectivePoint expected")}class b{constructor(C,L,x){if(this.px=C,this.py=L,this.pz=x,C==null||!r.isValid(C))throw new Error("x required");if(L==null||!r.isValid(L))throw new Error("y required");if(x==null||!r.isValid(x))throw new Error("z required")}static fromAffine(C){const{x:L,y:x}=C||{};if(!C||!r.isValid(L)||!r.isValid(x))throw new Error("invalid affine point");if(C instanceof b)throw new Error("projective point not allowed");const w=N=>r.eql(N,r.ZERO);return w(L)&&w(x)?b.ZERO:new b(L,x,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(C){const L=r.invertBatch(C.map(x=>x.pz));return C.map((x,w)=>x.toAffine(L[w])).map(b.fromAffine)}static fromHex(C){const L=b.fromAffine(i(Ce("pointHex",C)));return L.assertValidity(),L}static fromPrivateKey(C){return b.BASE.multiply(f(C))}_setWindowSize(C){this._WINDOW_SIZE=C,l.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:C,y:L}=this.toAffine();if(!r.isValid(C)||!r.isValid(L))throw new Error("bad point: x or y not FE");const x=r.sqr(L),w=o(C);if(!r.eql(x,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:C}=this.toAffine();if(r.isOdd)return!r.isOdd(C);throw new Error("Field doesn't support isOdd")}equals(C){u(C);const{px:L,py:x,pz:w}=this,{px:N,py:R,pz:P}=C,z=r.eql(r.mul(L,P),r.mul(N,w)),k=r.eql(r.mul(x,P),r.mul(R,w));return z&&k}negate(){return new b(this.px,r.neg(this.py),this.pz)}double(){const{a:C,b:L}=t,x=r.mul(L,co),{px:w,py:N,pz:R}=this;let P=r.ZERO,z=r.ZERO,k=r.ZERO,c=r.mul(w,w),y=r.mul(N,N),d=r.mul(R,R),S=r.mul(w,N);return S=r.add(S,S),k=r.mul(w,R),k=r.add(k,k),P=r.mul(C,k),z=r.mul(x,d),z=r.add(P,z),P=r.sub(y,z),z=r.add(y,z),z=r.mul(P,z),P=r.mul(S,P),k=r.mul(x,k),d=r.mul(C,d),S=r.sub(c,d),S=r.mul(C,S),S=r.add(S,k),k=r.add(c,c),c=r.add(k,c),c=r.add(c,d),c=r.mul(c,S),z=r.add(z,c),d=r.mul(N,R),d=r.add(d,d),c=r.mul(d,S),P=r.sub(P,c),k=r.mul(d,y),k=r.add(k,k),k=r.add(k,k),new b(P,z,k)}add(C){u(C);const{px:L,py:x,pz:w}=this,{px:N,py:R,pz:P}=C;let z=r.ZERO,k=r.ZERO,c=r.ZERO;const y=t.a,d=r.mul(t.b,co);let S=r.mul(L,N),m=r.mul(x,R),A=r.mul(w,P),_=r.add(L,x),h=r.add(N,R);_=r.mul(_,h),h=r.add(S,m),_=r.sub(_,h),h=r.add(L,w);let v=r.add(N,P);return h=r.mul(h,v),v=r.add(S,A),h=r.sub(h,v),v=r.add(x,w),z=r.add(R,P),v=r.mul(v,z),z=r.add(m,A),v=r.sub(v,z),c=r.mul(y,h),z=r.mul(d,A),c=r.add(z,c),z=r.sub(m,c),c=r.add(m,c),k=r.mul(z,c),m=r.add(S,S),m=r.add(m,S),A=r.mul(y,A),h=r.mul(d,h),m=r.add(m,A),A=r.sub(S,A),A=r.mul(y,A),h=r.add(h,A),S=r.mul(m,h),k=r.add(k,S),S=r.mul(v,h),z=r.mul(_,z),z=r.sub(z,S),S=r.mul(_,m),c=r.mul(v,c),c=r.add(c,S),new b(z,k,c)}subtract(C){return this.add(C.negate())}is0(){return this.equals(b.ZERO)}wNAF(C){return g.wNAFCached(this,l,C,L=>{const x=r.invertBatch(L.map(w=>w.pz));return L.map((w,N)=>w.toAffine(x[N])).map(b.fromAffine)})}multiplyUnsafe(C){const L=b.ZERO;if(C===dt)return L;if(a(C),C===Te)return this;const{endo:x}=t;if(!x)return g.unsafeLadder(this,C);let{k1neg:w,k1:N,k2neg:R,k2:P}=x.splitScalar(C),z=L,k=L,c=this;for(;N>dt||P>dt;)N&Te&&(z=z.add(c)),P&Te&&(k=k.add(c)),c=c.double(),N>>=Te,P>>=Te;return w&&(z=z.negate()),R&&(k=k.negate()),k=new b(r.mul(k.px,x.beta),k.py,k.pz),z.add(k)}multiply(C){a(C);let L=C,x,w;const{endo:N}=t;if(N){const{k1neg:R,k1:P,k2neg:z,k2:k}=N.splitScalar(L);let{p:c,f:y}=this.wNAF(P),{p:d,f:S}=this.wNAF(k);c=g.constTimeNegate(R,c),d=g.constTimeNegate(z,d),d=new b(r.mul(d.px,N.beta),d.py,d.pz),x=c.add(d),w=y.add(S)}else{const{p:R,f:P}=this.wNAF(L);x=R,w=P}return b.normalizeZ([x,w])[0]}multiplyAndAddUnsafe(C,L,x){const w=b.BASE,N=(P,z)=>z===dt||z===Te||!P.equals(w)?P.multiplyUnsafe(z):P.multiply(z),R=N(this,L).add(N(C,x));return R.is0()?void 0:R}toAffine(C){const{px:L,py:x,pz:w}=this,N=this.is0();C==null&&(C=N?r.ONE:r.inv(w));const R=r.mul(L,C),P=r.mul(x,C),z=r.mul(w,C);if(N)return{x:r.ZERO,y:r.ZERO};if(!r.eql(z,r.ONE))throw new Error("invZ was invalid");return{x:R,y:P}}isTorsionFree(){const{h:C,isTorsionFree:L}=t;if(C===Te)return!0;if(L)return L(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:C,clearCofactor:L}=t;return C===Te?this:L?L(b,this):this.multiplyUnsafe(t.h)}toRawBytes(C=!0){return this.assertValidity(),n(b,this,C)}toHex(C=!0){return En(this.toRawBytes(C))}}b.BASE=new b(t.Gx,t.Gy,r.ONE),b.ZERO=new b(r.ZERO,r.ONE,r.ZERO);const p=t.nBitLength,g=Hy(b,t.endo?Math.ceil(p/2):p);return{CURVE:t,ProjectivePoint:b,normPrivateKeyToScalar:f,weierstrassEquation:o,isWithinCurveOrder:s}}function Np(e){const t=Od(e);return In(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Bp(e){const t=Np(e),{Fp:r,n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function s(h){return dt<h&&h<r.ORDER}function a(h){return Ae(h,n)}function f(h){return Za(h,n)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:b,isWithinCurveOrder:p}=Ap({...t,toBytes(h,v,I){const O=v.toAffine(),M=r.toBytes(O.x),U=Qe;return I?U(Uint8Array.from([v.hasEvenY()?2:3]),M):U(Uint8Array.from([4]),M,r.toBytes(O.y))},fromBytes(h){const v=h.length,I=h[0],O=h.subarray(1);if(v===i&&(I===2||I===3)){const M=He(O);if(!s(M))throw new Error("Point is not on curve");const U=b(M);let j=r.sqrt(U);const X=(j&Te)===Te;return(I&1)===1!==X&&(j=r.neg(j)),{x:M,y:j}}else if(v===o&&I===4){const M=r.fromBytes(O.subarray(0,r.BYTES)),U=r.fromBytes(O.subarray(r.BYTES,2*r.BYTES));return{x:M,y:U}}else throw new Error(`Point of length ${v} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),g=h=>En(fr(h,t.nByteLength));function E(h){const v=n>>Te;return h>v}function C(h){return E(h)?a(-h):h}const L=(h,v,I)=>He(h.slice(v,I));class x{constructor(v,I,O){this.r=v,this.s=I,this.recovery=O,this.assertValidity()}static fromCompact(v){const I=t.nByteLength;return v=Ce("compactSignature",v,I*2),new x(L(v,0,I),L(v,I,2*I))}static fromDER(v){const{r:I,s:O}=jr.toSig(Ce("DER",v));return new x(I,O)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(v){return new x(this.r,this.s,v)}recoverPublicKey(v){const{r:I,s:O,recovery:M}=this,U=k(Ce("msgHash",v));if(M==null||![0,1,2,3].includes(M))throw new Error("recovery id invalid");const j=M===2||M===3?I+t.n:I;if(j>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const X=M&1?"03":"02",ee=l.fromHex(X+g(j)),re=f(j),Y=a(-U*re),Q=a(O*re),ne=l.BASE.multiplyAndAddUnsafe(ee,Y,Q);if(!ne)throw new Error("point at infinify");return ne.assertValidity(),ne}hasHighS(){return E(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Tn(this.toDERHex())}toDERHex(){return jr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Tn(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const w={isValidPrivateKey(h){try{return u(h),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const h=t.randomBytes(r.BYTES+8),v=jy(h,n);return fr(v,t.nByteLength)},precompute(h=8,v=l.BASE){return v._setWindowSize(h),v.multiply(BigInt(3)),v}};function N(h,v=!0){return l.fromPrivateKey(h).toRawBytes(v)}function R(h){const v=h instanceof Uint8Array,I=typeof h=="string",O=(v||I)&&h.length;return v?O===i||O===o:I?O===2*i||O===2*o:h instanceof l}function P(h,v,I=!0){if(R(h))throw new Error("first arg must be private key");if(!R(v))throw new Error("second arg must be public key");return l.fromHex(v).multiply(u(h)).toRawBytes(I)}const z=t.bits2int||function(h){const v=He(h),I=h.length*8-t.nBitLength;return I>0?v>>BigInt(I):v},k=t.bits2int_modN||function(h){return a(z(h))},c=xf(t.nBitLength);function y(h){if(typeof h!="bigint")throw new Error("bigint expected");if(!(dt<=h&&h<c))throw new Error(`bigint expected < 2^${t.nBitLength}`);return fr(h,t.nByteLength)}function d(h,v,I=S){if(["recovered","canonical"].some(Ee=>Ee in I))throw new Error("sign() legacy options not supported");const{hash:O,randomBytes:M}=t;let{lowS:U,prehash:j,extraEntropy:X}=I;U==null&&(U=!0),h=Ce("msgHash",h),j&&(h=Ce("prehashed msgHash",O(h)));const ee=k(h),re=u(v),Y=[y(re),y(ee)];if(X!=null){const Ee=X===!0?M(r.BYTES):X;Y.push(Ce("extraEntropy",Ee,r.BYTES))}const Q=Qe(...Y),ne=ee;function Ve(Ee){const Ge=z(Ee);if(!p(Ge))return;const Se=f(Ge),be=l.BASE.multiply(Ge).toAffine(),$=a(be.x);if($===dt)return;const D=a(Se*a(ne+$*re));if(D===dt)return;let V=(be.x===$?0:2)|Number(be.y&Te),W=D;return U&&E(D)&&(W=C(D),V^=1),new x($,W,V)}return{seed:Q,k2sig:Ve}}const S={lowS:t.lowS,prehash:!1},m={lowS:t.lowS,prehash:!1};function A(h,v,I=S){const{seed:O,k2sig:M}=d(h,v,I);return Rd(t.hash.outputLen,t.nByteLength,t.hmac)(O,M)}l.BASE._setWindowSize(8);function _(h,v,I,O=m){const M=h;if(v=Ce("msgHash",v),I=Ce("publicKey",I),"strict"in O)throw new Error("options.strict was renamed to lowS");const{lowS:U,prehash:j}=O;let X,ee;try{if(typeof M=="string"||M instanceof Uint8Array)try{X=x.fromDER(M)}catch(be){if(!(be instanceof jr.Err))throw be;X=x.fromCompact(M)}else if(typeof M=="object"&&typeof M.r=="bigint"&&typeof M.s=="bigint"){const{r:be,s:$}=M;X=new x(be,$)}else throw new Error("PARSE");ee=l.fromHex(I)}catch(be){if(be.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(U&&X.hasHighS())return!1;j&&(v=t.hash(v));const{r:re,s:Y}=X,Q=k(v),ne=f(Y),Ve=a(Q*ne),Ee=a(re*ne),Ge=l.BASE.multiplyAndAddUnsafe(ee,Ve,Ee)?.toAffine();return Ge?a(Ge.x)===re:!1}return{CURVE:t,getPublicKey:N,getSharedSecret:P,sign:A,verify:_,ProjectivePoint:l,Signature:x,utils:w}}function xp(e,t){const r=e.ORDER;let n=dt;for(let p=r-Te;p%kt===dt;p/=kt)n+=Te;const i=n,o=(r-Te)/kt**i,s=(o-Te)/kt,a=kt**i-Te,f=kt**(i-Te),l=e.pow(t,o),u=e.pow(t,(o+Te)/kt);let b=(p,g)=>{let E=l,C=e.pow(g,a),L=e.sqr(C);L=e.mul(L,g);let x=e.mul(p,L);x=e.pow(x,s),x=e.mul(x,C),C=e.mul(x,g),L=e.mul(x,p);let w=e.mul(L,C);x=e.pow(w,f);let N=e.eql(x,e.ONE);C=e.mul(L,u),x=e.mul(w,E),L=e.cmov(C,L,N),w=e.cmov(x,w,N);for(let R=i;R>Te;R--){let P=kt**(R-kt),z=e.pow(w,P);const k=e.eql(z,e.ONE);C=e.mul(L,E),E=e.mul(E,E),z=e.mul(w,E),L=e.cmov(C,L,k),w=e.cmov(z,w,k)}return{isValid:N,value:L}};if(e.ORDER%Zl===co){const p=(e.ORDER-co)/Zl,g=e.sqrt(e.neg(t));b=(E,C)=>{let L=e.sqr(C);const x=e.mul(E,C);L=e.mul(L,x);let w=e.pow(L,p);w=e.mul(w,x);const N=e.mul(w,g),R=e.mul(e.sqr(w),C),P=e.eql(R,E);let z=e.cmov(N,w,P);return{isValid:P,value:z}}}return b}function Rp(e,t){if(Id(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const r=xp(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,o,s,a,f,l,u,b;i=e.sqr(n),i=e.mul(i,t.Z),o=e.sqr(i),o=e.add(o,i),s=e.add(o,e.ONE),s=e.mul(s,t.B),a=e.cmov(t.Z,e.neg(o),!e.eql(o,e.ZERO)),a=e.mul(a,t.A),o=e.sqr(s),l=e.sqr(a),f=e.mul(l,t.A),o=e.add(o,f),o=e.mul(o,s),l=e.mul(l,a),f=e.mul(l,t.B),o=e.add(o,f),u=e.mul(i,s);const{isValid:p,value:g}=r(o,l);b=e.mul(i,n),b=e.mul(b,g),u=e.cmov(u,s,p),b=e.cmov(b,g,p);const E=e.isOdd(n)===e.isOdd(b);return b=e.cmov(e.neg(b),b,E),u=e.div(u,a),{x:u,y:b}}}class Dd extends Co{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,Je.hash(t);const n=Rn(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return Je.exists(this),this.iHash.update(t),this}digestInto(t){Je.exists(this),Je.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Md=(e,t,r)=>new Dd(e,t).update(r).digest();Md.create=(e,t)=>new Dd(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ip(e){return{hash:e,hmac:(t,...r)=>Md(e,t,Td(...r)),randomBytes:Af}}function Op(e,t){const r=n=>Bp({...e,...Ip(n)});return Object.freeze({...r(t),create:r})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $o=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ho=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ud=BigInt(1),go=BigInt(2),Kl=(e,t)=>(e+t/go)/t;function Vd(e){const t=$o,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),f=BigInt(88),l=e*e*e%t,u=l*l*e%t,b=tt(u,r,t)*u%t,p=tt(b,r,t)*u%t,g=tt(p,go,t)*l%t,E=tt(g,i,t)*g%t,C=tt(E,o,t)*E%t,L=tt(C,a,t)*C%t,x=tt(L,f,t)*L%t,w=tt(x,a,t)*C%t,N=tt(w,r,t)*u%t,R=tt(N,s,t)*E%t,P=tt(R,n,t)*l%t,z=tt(P,go,t);if(!gr.eql(gr.sqr(z),e))throw new Error("Cannot find square root");return z}const gr=Vy($o,void 0,void 0,{sqrt:Vd}),Si=Op({a:BigInt(0),b:BigInt(7),Fp:gr,n:ho,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=ho,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Ud*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=Kl(o*e,t),f=Kl(-n*e,t);let l=Ae(e-a*r-f*i,t),u=Ae(-a*n-f*o,t);const b=l>s,p=u>s;if(b&&(l=t-l),p&&(u=t-u),l>s||u>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:b,k1:l,k2neg:p,k2:u}}}},ci),Do=BigInt(0),jd=e=>typeof e=="bigint"&&Do<e&&e<$o,Cp=e=>typeof e=="bigint"&&Do<e&&e<ho,Xl={};function yo(e,...t){let r=Xl[e];if(r===void 0){const n=ci(Uint8Array.from(e,i=>i.charCodeAt(0)));r=Qe(n,n),Xl[e]=r}return ci(Qe(r,...t))}const Of=e=>e.toRawBytes(!0).slice(1),Ka=e=>fr(e,32),Us=e=>Ae(e,$o),di=e=>Ae(e,ho),Cf=Si.ProjectivePoint,Lp=(e,t,r)=>Cf.BASE.multiplyAndAddUnsafe(e,t,r);function Xa(e){let t=Si.utils.normPrivateKeyToScalar(e),r=Cf.fromPrivateKey(t);return{scalar:r.hasEvenY()?t:di(-t),bytes:Of(r)}}function Fd(e){if(!jd(e))throw new Error("bad x: need 0 < x < p");const t=Us(e*e),r=Us(t*e+BigInt(7));let n=Vd(r);n%go!==Do&&(n=Us(-n));const i=new Cf(e,n,Ud);return i.assertValidity(),i}function Hd(...e){return di(He(yo("BIP0340/challenge",...e)))}function Pp(e){return Xa(e).bytes}function kp(e,t,r=Af(32)){const n=Ce("message",e),{bytes:i,scalar:o}=Xa(t),s=Ce("auxRand",r,32),a=Ka(o^He(yo("BIP0340/aux",s))),f=yo("BIP0340/nonce",a,i,n),l=di(He(f));if(l===Do)throw new Error("sign failed: k is zero");const{bytes:u,scalar:b}=Xa(l),p=Hd(u,i,n),g=new Uint8Array(64);if(g.set(u,0),g.set(Ka(di(b+p*o)),32),!qd(g,n,i))throw new Error("sign: Invalid signature produced");return g}function qd(e,t,r){const n=Ce("signature",e,64),i=Ce("message",t),o=Ce("publicKey",r,32);try{const s=Fd(He(o)),a=He(n.subarray(0,32));if(!jd(a))return!1;const f=He(n.subarray(32,64));if(!Cp(f))return!1;const l=Hd(Ka(a),Of(s),i),u=Lp(s,f,di(-l));return!(!u||!u.hasEvenY()||u.toAffine().x!==a)}catch{return!1}}const zp={getPublicKey:Pp,sign:kp,verify:qd,utils:{randomPrivateKey:Si.utils.randomPrivateKey,lift_x:Fd,pointToBytes:Of,numberToBytesBE:fr,bytesToNumberBE:He,taggedHash:yo,mod:Ae}},$p=Xy(gr,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(t=>BigInt(t)))),Dp=Rp(gr,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:gr.create(BigInt("-11"))}),{hashToCurve:Mp,encodeToCurve:Up}=Yy(Si.ProjectivePoint,e=>{const{x:t,y:r}=Dp(gr.create(e[0]));return $p(t,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:gr.ORDER,m:1,k:128,expand:"xmd",hash:ci}),Vp=Object.freeze(Object.defineProperty({__proto__:null,encodeToCurve:Up,hashToCurve:Mp,schnorr:zp,secp256k1:Si},Symbol.toStringTag,{value:"Module"}));var jp={exports:{}},Gd={exports:{}},Be={ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,r){return e.slice(t,r)},Error,FunctionPrototypeCall(e,t,...r){return e.call(t,...r)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,r){return Object.defineProperty(e,t,r)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,r){return e.then(t,r)},PromiseReject(e){return Promise.reject(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,r){return e.slice(t,r)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(e,t,r){return e.set(t,r)},Uint8Array},Wd={exports:{}};(function(e){const t=Nr,r=Object.getPrototypeOf(async function(){}).constructor,n=globalThis.Blob||t.Blob,i=typeof n<"u"?function(a){return a instanceof n}:function(a){return!1};class o extends Error{constructor(a){if(!Array.isArray(a))throw new TypeError(`Expected input to be an Array, got ${typeof a}`);let f="";for(let l=0;l<a.length;l++)f+=`    ${a[l].stack}
`;super(f),this.name="AggregateError",this.errors=a}}e.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(s){let a=!1;return function(...f){a||(a=!0,s.apply(this,f))}},createDeferredPromise:function(){let s,a;return{promise:new Promise((l,u)=>{s=l,a=u}),resolve:s,reject:a}},promisify(s){return new Promise((a,f)=>{s((l,...u)=>l?f(l):a(...u))})},debuglog(){return function(){}},format(s,...a){return s.replace(/%([sdifj])/g,function(...[f,l]){const u=a.shift();return l==="f"?u.toFixed(6):l==="j"?JSON.stringify(u):l==="s"&&typeof u=="object"?`${u.constructor!==Object?u.constructor.name:""} {}`.trim():u.toString()})},inspect(s){switch(typeof s){case"string":if(s.includes("'"))if(s.includes('"')){if(!s.includes("`")&&!s.includes("${"))return`\`${s}\``}else return`"${s}"`;return`'${s}'`;case"number":return isNaN(s)?"NaN":Object.is(s,-0)?String(s):s;case"bigint":return`${String(s)}n`;case"boolean":case"undefined":return String(s);case"object":return"{}"}},types:{isAsyncFunction(s){return s instanceof r},isArrayBufferView(s){return ArrayBuffer.isView(s)}},isBlob:i},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(Wd);var Zt=Wd.exports,Lf={},Hn={exports:{}},Yl;function Pf(){if(Yl)return Hn.exports;Yl=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Hn.exports=e,Hn.exports.AbortSignal=t,Hn.exports.default=e,Hn.exports}const{format:Fp,inspect:po,AggregateError:Hp}=Zt,qp=globalThis.AggregateError||Hp,Gp=Symbol("kIsNodeError"),Wp=["string","function","number","object","Function","Object","boolean","bigint","symbol"],Zp=/^([A-Z][a-z0-9]*)+$/,Kp="__node_internal_",Mo={};function qr(e,t){if(!e)throw new Mo.ERR_INTERNAL_ASSERTION(t)}function Jl(e){let t="",r=e.length;const n=e[0]==="-"?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function Xp(e,t,r){if(typeof t=="function")return qr(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);const n=(t.match(/%[dfijoOs]/g)||[]).length;return qr(n===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?t:Fp(t,...r)}function Pe(e,t,r){r||(r=Error);class n extends r{constructor(...o){super(Xp(e,t,o))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=e,n.prototype[Gp]=!0,Mo[e]=n}function Ql(e){const t=Kp+e.name;return Object.defineProperty(e,"name",{value:t}),e}function Yp(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const r=new qp([t,e],t.message);return r.code=t.code,r}return e||t}let Jp=class extends Error{constructor(t="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new Mo.ERR_INVALID_ARG_TYPE("options","Object",r);super(t,r),this.code="ABORT_ERR",this.name="AbortError"}};Pe("ERR_ASSERTION","%s",Error);Pe("ERR_INVALID_ARG_TYPE",(e,t,r)=>{qr(typeof e=="string","'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";e.endsWith(" argument")?n+=`${e} `:n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";const i=[],o=[],s=[];for(const f of t)qr(typeof f=="string","All expected entries have to be of type string"),Wp.includes(f)?i.push(f.toLowerCase()):Zp.test(f)?o.push(f):(qr(f!=="object",'The value "object" should be written as "Object"'),s.push(f));if(o.length>0){const f=i.indexOf("object");f!==-1&&(i.splice(i,f,1),o.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{const f=i.pop();n+=`one of type ${i.join(", ")}, or ${f}`}}(o.length>0||s.length>0)&&(n+=" or ")}if(o.length>0){switch(o.length){case 1:n+=`an instance of ${o[0]}`;break;case 2:n+=`an instance of ${o[0]} or ${o[1]}`;break;default:{const f=o.pop();n+=`an instance of ${o.join(", ")}, or ${f}`}}s.length>0&&(n+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(n+="an "),n+=`${s[0]}`;break;case 2:n+=`one of ${s[0]} or ${s[1]}`;break;default:{const f=s.pop();n+=`one of ${s.join(", ")}, or ${f}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{const f=po(r,{depth:-1});n+=`. Received ${f}`}}else{let f=po(r,{colors:!1});f.length>25&&(f=`${f.slice(0,25)}...`),n+=`. Received type ${typeof r} (${f})`}return n},TypeError);Pe("ERR_INVALID_ARG_VALUE",(e,t,r="is invalid")=>{let n=po(t);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received ${n}`},TypeError);Pe("ERR_INVALID_RETURN_VALUE",(e,t,r)=>{var n;const i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${e} to be returned from the "${t}" function but got ${i}.`},TypeError);Pe("ERR_MISSING_ARGS",(...e)=>{qr(e.length>0,"At least one arg needs to be specified");let t;const r=e.length;switch(e=(Array.isArray(e)?e:[e]).map(n=>`"${n}"`).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const n=e.pop();t+=`The ${e.join(", ")}, and ${n} arguments`}break}return`${t} must be specified`},TypeError);Pe("ERR_OUT_OF_RANGE",(e,t,r)=>{qr(t,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=Jl(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=Jl(n)),n+="n"):n=po(r),`The value of "${e}" is out of range. It must be ${t}. Received ${n}`},RangeError);Pe("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Pe("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Pe("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Pe("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Pe("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Pe("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Pe("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Pe("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Pe("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Pe("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Pe("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var Ye={AbortError:Jp,aggregateTwoErrors:Ql(Yp),hideStackFrames:Ql,codes:Mo};const{ArrayIsArray:kf,ArrayPrototypeIncludes:Zd,ArrayPrototypeJoin:Kd,ArrayPrototypeMap:Qp,NumberIsInteger:zf,NumberIsNaN:e_,NumberMAX_SAFE_INTEGER:t_,NumberMIN_SAFE_INTEGER:r_,NumberParseInt:n_,ObjectPrototypeHasOwnProperty:i_,RegExpPrototypeExec:Xd,String:o_,StringPrototypeToUpperCase:s_,StringPrototypeTrim:a_}=Be,{hideStackFrames:lt,codes:{ERR_SOCKET_BAD_PORT:f_,ERR_INVALID_ARG_TYPE:qe,ERR_INVALID_ARG_VALUE:On,ERR_OUT_OF_RANGE:Gr,ERR_UNKNOWN_SIGNAL:eu}}=Ye,{normalizeEncoding:l_}=Zt,{isAsyncFunction:u_,isArrayBufferView:c_}=Zt.types,tu={};function d_(e){return e===(e|0)}function h_(e){return e===e>>>0}const g_=/^[0-7]+$/,y_="must be a 32-bit unsigned integer or an octal string";function p_(e,t,r){if(typeof e>"u"&&(e=r),typeof e=="string"){if(Xd(g_,e)===null)throw new On(t,e,y_);e=n_(e,8)}return Yd(e,t),e}const __=lt((e,t,r=r_,n=t_)=>{if(typeof e!="number")throw new qe(t,"number",e);if(!zf(e))throw new Gr(t,"an integer",e);if(e<r||e>n)throw new Gr(t,`>= ${r} && <= ${n}`,e)}),b_=lt((e,t,r=-2147483648,n=2147483647)=>{if(typeof e!="number")throw new qe(t,"number",e);if(!zf(e))throw new Gr(t,"an integer",e);if(e<r||e>n)throw new Gr(t,`>= ${r} && <= ${n}`,e)}),Yd=lt((e,t,r=!1)=>{if(typeof e!="number")throw new qe(t,"number",e);if(!zf(e))throw new Gr(t,"an integer",e);const n=r?1:0,i=4294967295;if(e<n||e>i)throw new Gr(t,`>= ${n} && <= ${i}`,e)});function $f(e,t){if(typeof e!="string")throw new qe(t,"string",e)}function w_(e,t,r=void 0,n){if(typeof e!="number")throw new qe(t,"number",e);if(r!=null&&e<r||n!=null&&e>n||(r!=null||n!=null)&&e_(e))throw new Gr(t,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,e)}const m_=lt((e,t,r)=>{if(!Zd(r,e)){const i="must be one of: "+Kd(Qp(r,o=>typeof o=="string"?`'${o}'`:o_(o)),", ");throw new On(t,e,i)}});function Jd(e,t){if(typeof e!="boolean")throw new qe(t,"boolean",e)}function Vs(e,t,r){return e==null||!i_(e,t)?r:e[t]}const v_=lt((e,t,r=null)=>{const n=Vs(r,"allowArray",!1),i=Vs(r,"allowFunction",!1);if(!Vs(r,"nullable",!1)&&e===null||!n&&kf(e)||typeof e!="object"&&(!i||typeof e!="function"))throw new qe(t,"Object",e)}),E_=lt((e,t)=>{if(e!=null&&typeof e!="object"&&typeof e!="function")throw new qe(t,"a dictionary",e)}),Df=lt((e,t,r=0)=>{if(!kf(e))throw new qe(t,"Array",e);if(e.length<r){const n=`must be longer than ${r}`;throw new On(t,e,n)}});function T_(e,t){Df(e,t);for(let r=0;r<e.length;r++)$f(e[r],`${t}[${r}]`)}function S_(e,t){Df(e,t);for(let r=0;r<e.length;r++)Jd(e[r],`${t}[${r}]`)}function A_(e,t="signal"){if($f(e,t),tu[e]===void 0)throw tu[s_(e)]!==void 0?new eu(e+" (signals must use all capital letters)"):new eu(e)}const N_=lt((e,t="buffer")=>{if(!c_(e))throw new qe(t,["Buffer","TypedArray","DataView"],e)});function B_(e,t){const r=l_(t),n=e.length;if(r==="hex"&&n%2!==0)throw new On("encoding",t,`is invalid for data of length ${n}`)}function x_(e,t="Port",r=!0){if(typeof e!="number"&&typeof e!="string"||typeof e=="string"&&a_(e).length===0||+e!==+e>>>0||e>65535||e===0&&!r)throw new f_(t,e,r);return e|0}const R_=lt((e,t)=>{if(e!==void 0&&(e===null||typeof e!="object"||!("aborted"in e)))throw new qe(t,"AbortSignal",e)}),I_=lt((e,t)=>{if(typeof e!="function")throw new qe(t,"Function",e)}),O_=lt((e,t)=>{if(typeof e!="function"||u_(e))throw new qe(t,"Function",e)}),C_=lt((e,t)=>{if(e!==void 0)throw new qe(t,"undefined",e)});function L_(e,t,r){if(!Zd(r,e))throw new qe(t,`('${Kd(r,"|")}')`,e)}const P_=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ru(e,t){if(typeof e>"u"||!Xd(P_,e))throw new On(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function k_(e){if(typeof e=="string")return ru(e,"hints"),e;if(kf(e)){const t=e.length;let r="";if(t===0)return r;for(let n=0;n<t;n++){const i=e[n];ru(i,"hints"),r+=i,n!==t-1&&(r+=", ")}return r}throw new On("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var Uo={isInt32:d_,isUint32:h_,parseFileMode:p_,validateArray:Df,validateStringArray:T_,validateBooleanArray:S_,validateBoolean:Jd,validateBuffer:N_,validateDictionary:E_,validateEncoding:B_,validateFunction:I_,validateInt32:b_,validateInteger:__,validateNumber:w_,validateObject:v_,validateOneOf:m_,validatePlainFunction:O_,validatePort:x_,validateSignalName:A_,validateString:$f,validateUint32:Yd,validateUndefined:C_,validateUnion:L_,validateAbortSignal:R_,validateLinkHeaderValue:k_},Mf={exports:{}};const{Symbol:Vo,SymbolAsyncIterator:nu,SymbolIterator:iu,SymbolFor:Qd}=Be,eh=Vo("kDestroyed"),th=Vo("kIsErrored"),Ya=Vo("kIsReadable"),rh=Vo("kIsDisturbed"),z_=Qd("nodejs.webstream.isClosedPromise"),$_=Qd("nodejs.webstream.controllerErrorFunction");function jo(e,t=!1){var r;return!!(e&&typeof e.pipe=="function"&&typeof e.on=="function"&&(!t||typeof e.pause=="function"&&typeof e.resume=="function")&&(!e._writableState||((r=e._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!e._writableState||e._readableState))}function Fo(e){var t;return!!(e&&typeof e.write=="function"&&typeof e.on=="function"&&(!e._readableState||((t=e._writableState)===null||t===void 0?void 0:t.writable)!==!1))}function D_(e){return!!(e&&typeof e.pipe=="function"&&e._readableState&&typeof e.on=="function"&&typeof e.write=="function")}function It(e){return e&&(e._readableState||e._writableState||typeof e.write=="function"&&typeof e.on=="function"||typeof e.pipe=="function"&&typeof e.on=="function")}function nh(e){return!!(e&&!It(e)&&typeof e.pipeThrough=="function"&&typeof e.getReader=="function"&&typeof e.cancel=="function")}function ih(e){return!!(e&&!It(e)&&typeof e.getWriter=="function"&&typeof e.abort=="function")}function oh(e){return!!(e&&!It(e)&&typeof e.readable=="object"&&typeof e.writable=="object")}function M_(e){return nh(e)||ih(e)||oh(e)}function U_(e,t){return e==null?!1:t===!0?typeof e[nu]=="function":t===!1?typeof e[iu]=="function":typeof e[nu]=="function"||typeof e[iu]=="function"}function Ho(e){if(!It(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!!(e.destroyed||e[eh]||n!=null&&n.destroyed)}function sh(e){if(!Fo(e))return null;if(e.writableEnded===!0)return!0;const t=e._writableState;return t!=null&&t.errored?!1:typeof t?.ended!="boolean"?null:t.ended}function V_(e,t){if(!Fo(e))return null;if(e.writableFinished===!0)return!0;const r=e._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||t===!1&&r.ended===!0&&r.length===0)}function j_(e){if(!jo(e))return null;if(e.readableEnded===!0)return!0;const t=e._readableState;return!t||t.errored?!1:typeof t?.ended!="boolean"?null:t.ended}function ah(e,t){if(!jo(e))return null;const r=e._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||t===!1&&r.ended===!0&&r.length===0)}function fh(e){return e&&e[Ya]!=null?e[Ya]:typeof e?.readable!="boolean"?null:Ho(e)?!1:jo(e)&&e.readable&&!ah(e)}function lh(e){return typeof e?.writable!="boolean"?null:Ho(e)?!1:Fo(e)&&e.writable&&!sh(e)}function F_(e,t){return It(e)?Ho(e)?!0:!(t?.readable!==!1&&fh(e)||t?.writable!==!1&&lh(e)):null}function H_(e){var t,r;return It(e)?e.writableErrored?e.writableErrored:(t=(r=e._writableState)===null||r===void 0?void 0:r.errored)!==null&&t!==void 0?t:null:null}function q_(e){var t,r;return It(e)?e.readableErrored?e.readableErrored:(t=(r=e._readableState)===null||r===void 0?void 0:r.errored)!==null&&t!==void 0?t:null:null}function G_(e){if(!It(e))return null;if(typeof e.closed=="boolean")return e.closed;const t=e._writableState,r=e._readableState;return typeof t?.closed=="boolean"||typeof r?.closed=="boolean"?t?.closed||r?.closed:typeof e._closed=="boolean"&&uh(e)?e._closed:null}function uh(e){return typeof e._closed=="boolean"&&typeof e._defaultKeepAlive=="boolean"&&typeof e._removedConnection=="boolean"&&typeof e._removedContLen=="boolean"}function ch(e){return typeof e._sent100=="boolean"&&uh(e)}function W_(e){var t;return typeof e._consuming=="boolean"&&typeof e._dumped=="boolean"&&((t=e.req)===null||t===void 0?void 0:t.upgradeOrConnect)===void 0}function Z_(e){if(!It(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!n&&ch(e)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function K_(e){var t;return!!(e&&((t=e[rh])!==null&&t!==void 0?t:e.readableDidRead||e.readableAborted))}function X_(e){var t,r,n,i,o,s,a,f,l,u;return!!(e&&((t=(r=(n=(i=(o=(s=e[th])!==null&&s!==void 0?s:e.readableErrored)!==null&&o!==void 0?o:e.writableErrored)!==null&&i!==void 0?i:(a=e._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(f=e._writableState)===null||f===void 0?void 0:f.errorEmitted)!==null&&r!==void 0?r:(l=e._readableState)===null||l===void 0?void 0:l.errored)!==null&&t!==void 0?t:!((u=e._writableState)===null||u===void 0)&&u.errored))}var Kt={kDestroyed:eh,isDisturbed:K_,kIsDisturbed:rh,isErrored:X_,kIsErrored:th,isReadable:fh,kIsReadable:Ya,kIsClosedPromise:z_,kControllerErrorFunction:$_,isClosed:G_,isDestroyed:Ho,isDuplexNodeStream:D_,isFinished:F_,isIterable:U_,isReadableNodeStream:jo,isReadableStream:nh,isReadableEnded:j_,isReadableFinished:ah,isReadableErrored:q_,isNodeStream:It,isWebStream:M_,isWritable:lh,isWritableNodeStream:Fo,isWritableStream:ih,isWritableEnded:sh,isWritableFinished:V_,isWritableErrored:H_,isServerRequest:W_,isServerResponse:ch,willEmitClose:Z_,isTransformStream:oh};const nr=Yr,{AbortError:dh,codes:Y_}=Ye,{ERR_INVALID_ARG_TYPE:J_,ERR_STREAM_PREMATURE_CLOSE:ou}=Y_,{kEmptyObject:Ja,once:Qa}=Zt,{validateAbortSignal:Q_,validateFunction:eb,validateObject:tb,validateBoolean:rb}=Uo,{Promise:nb,PromisePrototypeThen:ib}=Be,{isClosed:ob,isReadable:su,isReadableNodeStream:js,isReadableStream:sb,isReadableFinished:au,isReadableErrored:fu,isWritable:lu,isWritableNodeStream:uu,isWritableStream:ab,isWritableFinished:cu,isWritableErrored:du,isNodeStream:fb,willEmitClose:lb,kIsClosedPromise:ub}=Kt;function cb(e){return e.setHeader&&typeof e.abort=="function"}const ef=()=>{};function hh(e,t,r){var n,i;if(arguments.length===2?(r=t,t=Ja):t==null?t=Ja:tb(t,"options"),eb(r,"callback"),Q_(t.signal,"options.signal"),r=Qa(r),sb(e)||ab(e))return db(e,t,r);if(!fb(e))throw new J_("stream",["ReadableStream","WritableStream","Stream"],e);const o=(n=t.readable)!==null&&n!==void 0?n:js(e),s=(i=t.writable)!==null&&i!==void 0?i:uu(e),a=e._writableState,f=e._readableState,l=()=>{e.writable||p()};let u=lb(e)&&js(e)===o&&uu(e)===s,b=cu(e,!1);const p=()=>{b=!0,e.destroyed&&(u=!1),!(u&&(!e.readable||o))&&(!o||g)&&r.call(e)};let g=au(e,!1);const E=()=>{g=!0,e.destroyed&&(u=!1),!(u&&(!e.writable||s))&&(!s||b)&&r.call(e)},C=P=>{r.call(e,P)};let L=ob(e);const x=()=>{L=!0;const P=du(e)||fu(e);if(P&&typeof P!="boolean")return r.call(e,P);if(o&&!g&&js(e,!0)&&!au(e,!1))return r.call(e,new ou);if(s&&!b&&!cu(e,!1))return r.call(e,new ou);r.call(e)},w=()=>{L=!0;const P=du(e)||fu(e);if(P&&typeof P!="boolean")return r.call(e,P);r.call(e)},N=()=>{e.req.on("finish",p)};cb(e)?(e.on("complete",p),u||e.on("abort",x),e.req?N():e.on("request",N)):s&&!a&&(e.on("end",l),e.on("close",l)),!u&&typeof e.aborted=="boolean"&&e.on("aborted",x),e.on("end",E),e.on("finish",p),t.error!==!1&&e.on("error",C),e.on("close",x),L?nr.nextTick(x):a!=null&&a.errorEmitted||f!=null&&f.errorEmitted?u||nr.nextTick(w):(!o&&(!u||su(e))&&(b||lu(e)===!1)||!s&&(!u||lu(e))&&(g||su(e)===!1)||f&&e.req&&e.aborted)&&nr.nextTick(w);const R=()=>{r=ef,e.removeListener("aborted",x),e.removeListener("complete",p),e.removeListener("abort",x),e.removeListener("request",N),e.req&&e.req.removeListener("finish",p),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",p),e.removeListener("end",E),e.removeListener("error",C),e.removeListener("close",x)};if(t.signal&&!L){const P=()=>{const z=r;R(),z.call(e,new dh(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)nr.nextTick(P);else{const z=r;r=Qa((...k)=>{t.signal.removeEventListener("abort",P),z.apply(e,k)}),t.signal.addEventListener("abort",P)}}return R}function db(e,t,r){let n=!1,i=ef;if(t.signal)if(i=()=>{n=!0,r.call(e,new dh(void 0,{cause:t.signal.reason}))},t.signal.aborted)nr.nextTick(i);else{const s=r;r=Qa((...a)=>{t.signal.removeEventListener("abort",i),s.apply(e,a)}),t.signal.addEventListener("abort",i)}const o=(...s)=>{n||nr.nextTick(()=>r.apply(e,s))};return ib(e[ub].promise,o,o),ef}function hb(e,t){var r;let n=!1;return t===null&&(t=Ja),(r=t)!==null&&r!==void 0&&r.cleanup&&(rb(t.cleanup,"cleanup"),n=t.cleanup),new nb((i,o)=>{const s=hh(e,t,a=>{n&&s(),a?o(a):i()})})}Mf.exports=hh;Mf.exports.finished=hb;var xr=Mf.exports;const Bt=Yr,{aggregateTwoErrors:gb,codes:{ERR_MULTIPLE_CALLBACK:yb},AbortError:pb}=Ye,{Symbol:gh}=Be,{kDestroyed:_b,isDestroyed:bb,isFinished:wb,isServerRequest:mb}=Kt,yh=gh("kDestroy"),tf=gh("kConstruct");function ph(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function vb(e,t){const r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof t=="function"&&t(),this):(ph(e,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?hu(this,e,t):this.once(yh,function(o){hu(this,gb(o,e),t)}),this)}function hu(e,t,r){let n=!1;function i(o){if(n)return;n=!0;const s=e._readableState,a=e._writableState;ph(o,a,s),a&&(a.closed=!0),s&&(s.closed=!0),typeof r=="function"&&r(o),o?Bt.nextTick(Eb,e,o):Bt.nextTick(_h,e)}try{e._destroy(t||null,i)}catch(o){i(o)}}function Eb(e,t){rf(e,t),_h(e)}function _h(e){const t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(r!=null&&r.emitClose||t!=null&&t.emitClose)&&e.emit("close")}function rf(e,t){const r=e._readableState,n=e._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function Tb(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=e.readable===!1,e.endEmitted=e.readable===!1),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=t.writable===!1,t.ending=t.writable===!1,t.finished=t.writable===!1)}function nf(e,t,r){const n=e._readableState,i=e._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?e.destroy(t):t&&(t.stack,i&&!i.errored&&(i.errored=t),n&&!n.errored&&(n.errored=t),r?Bt.nextTick(rf,e,t):rf(e,t))}function Sb(e,t){if(typeof e._construct!="function")return;const r=e._readableState,n=e._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),e.once(tf,t),!(e.listenerCount(tf)>1)&&Bt.nextTick(Ab,e)}function Ab(e){let t=!1;function r(n){if(t){nf(e,n??new yb);return}t=!0;const i=e._readableState,o=e._writableState,s=o||i;i&&(i.constructed=!0),o&&(o.constructed=!0),s.destroyed?e.emit(yh,n):n?nf(e,n,!0):Bt.nextTick(Nb,e)}try{e._construct(n=>{Bt.nextTick(r,n)})}catch(n){Bt.nextTick(r,n)}}function Nb(e){e.emit(tf)}function gu(e){return e?.setHeader&&typeof e.abort=="function"}function bh(e){e.emit("close")}function Bb(e,t){e.emit("error",t),Bt.nextTick(bh,e)}function xb(e,t){!e||bb(e)||(!t&&!wb(e)&&(t=new pb),mb(e)?(e.socket=null,e.destroy(t)):gu(e)?e.abort():gu(e.req)?e.req.abort():typeof e.destroy=="function"?e.destroy(t):typeof e.close=="function"?e.close():t?Bt.nextTick(Bb,e,t):Bt.nextTick(bh,e),e.destroyed||(e[_b]=!0))}var Cn={construct:Sb,destroyer:xb,destroy:vb,undestroy:Tb,errorOrDestroy:nf};const{ArrayIsArray:Rb,ObjectSetPrototypeOf:wh}=Be,{EventEmitter:qo}=Oo;function Go(e){qo.call(this,e)}wh(Go.prototype,qo.prototype);wh(Go,qo);Go.prototype.pipe=function(e,t){const r=this;function n(u){e.writable&&e.write(u)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}e.on("drain",i),!e._isStdio&&(!t||t.end!==!1)&&(r.on("end",s),r.on("close",a));let o=!1;function s(){o||(o=!0,e.end())}function a(){o||(o=!0,typeof e.destroy=="function"&&e.destroy())}function f(u){l(),qo.listenerCount(this,"error")===0&&this.emit("error",u)}of(r,"error",f),of(e,"error",f);function l(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",a),r.removeListener("error",f),e.removeListener("error",f),r.removeListener("end",l),r.removeListener("close",l),e.removeListener("close",l)}return r.on("end",l),r.on("close",l),e.on("close",l),e.emit("pipe",r),e};function of(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):Rb(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}var Uf={Stream:Go,prependListener:of},mh={exports:{}};(function(e){const{AbortError:t,codes:r}=Ye,{isNodeStream:n,isWebStream:i,kControllerErrorFunction:o}=Kt,s=xr,{ERR_INVALID_ARG_TYPE:a}=r,f=(l,u)=>{if(typeof l!="object"||!("aborted"in l))throw new a(u,"AbortSignal",l)};e.exports.addAbortSignal=function(u,b){if(f(u,"signal"),!n(b)&&!i(b))throw new a("stream",["ReadableStream","WritableStream","Stream"],b);return e.exports.addAbortSignalNoValidate(u,b)},e.exports.addAbortSignalNoValidate=function(l,u){if(typeof l!="object"||!("aborted"in l))return u;const b=n(u)?()=>{u.destroy(new t(void 0,{cause:l.reason}))}:()=>{u[o](new t(void 0,{cause:l.reason}))};return l.aborted?b():(l.addEventListener("abort",b),s(u,()=>l.removeEventListener("abort",b))),u}})(mh);var Wo=mh.exports;const{StringPrototypeSlice:yu,SymbolIterator:Ib,TypedArrayPrototypeSet:Ui,Uint8Array:Ob}=Be,{Buffer:Fs}=Nr,{inspect:Cb}=Zt;var Lb=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){const r={data:t,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(t){const r={data:t,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;const t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=t+r.data;return n}concat(t){if(this.length===0)return Fs.alloc(0);const r=Fs.allocUnsafe(t>>>0);let n=this.head,i=0;for(;n;)Ui(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(t,r){const n=this.head.data;if(t<n.length){const i=n.slice(0,t);return this.head.data=n.slice(t),i}return t===n.length?this.shift():r?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[Ib](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let r="",n=this.head,i=0;do{const o=n.data;if(t>o.length)r+=o,t-=o.length;else{t===o.length?(r+=o,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=yu(o,0,t),this.head=n,n.data=yu(o,t));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(t){const r=Fs.allocUnsafe(t),n=t;let i=this.head,o=0;do{const s=i.data;if(t>s.length)Ui(r,s,n-t),t-=s.length;else{t===s.length?(Ui(r,s,n-t),++o,i.next?this.head=i.next:this.head=this.tail=null):(Ui(r,new Ob(s.buffer,s.byteOffset,t),n-t),this.head=i,i.data=s.slice(t));break}++o}while((i=i.next)!==null);return this.length-=o,r}[Symbol.for("nodejs.util.inspect.custom")](t,r){return Cb(this,{...r,depth:0,customInspect:!1})}};const{MathFloor:Pb,NumberIsInteger:kb}=Be,{ERR_INVALID_ARG_VALUE:zb}=Ye.codes;function $b(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function vh(e){return e?16:16*1024}function Db(e,t,r,n){const i=$b(t,n,r);if(i!=null){if(!kb(i)||i<0){const o=n?`options.${r}`:"options.highWaterMark";throw new zb(o,i)}return Pb(i)}return vh(e.objectMode)}var Vf={getHighWaterMark:Db,getDefaultHighWaterMark:vh};const pu=Yr,{PromisePrototypeThen:Mb,SymbolAsyncIterator:_u,SymbolIterator:bu}=Be,{Buffer:Ub}=Nr,{ERR_INVALID_ARG_TYPE:Vb,ERR_STREAM_NULL_VALUES:jb}=Ye.codes;function Fb(e,t,r){let n;if(typeof t=="string"||t instanceof Ub)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null)}});let i;if(t&&t[_u])i=!0,n=t[_u]();else if(t&&t[bu])i=!1,n=t[bu]();else throw new Vb("iterable",["Iterable"],t);const o=new e({objectMode:!0,highWaterMark:1,...r});let s=!1;o._read=function(){s||(s=!0,f())},o._destroy=function(l,u){Mb(a(l),()=>pu.nextTick(u,l),b=>pu.nextTick(u,b||l))};async function a(l){const u=l!=null,b=typeof n.throw=="function";if(u&&b){const{value:p,done:g}=await n.throw(l);if(await p,g)return}if(typeof n.return=="function"){const{value:p}=await n.return();await p}}async function f(){for(;;){try{const{value:l,done:u}=i?await n.next():n.next();if(u)o.push(null);else{const b=l&&typeof l.then=="function"?await l:l;if(b===null)throw s=!1,new jb;if(o.push(b))continue;s=!1}}catch(l){o.destroy(l)}break}}return o}var Eh=Fb,Hs,wu;function Zo(){if(wu)return Hs;wu=1;const e=Yr,{ArrayPrototypeIndexOf:t,NumberIsInteger:r,NumberIsNaN:n,NumberParseInt:i,ObjectDefineProperties:o,ObjectKeys:s,ObjectSetPrototypeOf:a,Promise:f,SafeSet:l,SymbolAsyncIterator:u,Symbol:b}=Be;Hs=U,U.ReadableState=M;const{EventEmitter:p}=Oo,{Stream:g,prependListener:E}=Uf,{Buffer:C}=Nr,{addAbortSignal:L}=Wo,x=xr;let w=Zt.debuglog("stream",T=>{w=T});const N=Lb,R=Cn,{getHighWaterMark:P,getDefaultHighWaterMark:z}=Vf,{aggregateTwoErrors:k,codes:{ERR_INVALID_ARG_TYPE:c,ERR_METHOD_NOT_IMPLEMENTED:y,ERR_OUT_OF_RANGE:d,ERR_STREAM_PUSH_AFTER_EOF:S,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:m}}=Ye,{validateObject:A}=Uo,_=b("kPaused"),{StringDecoder:h}=z0,v=Eh;a(U.prototype,g.prototype),a(U,g);const I=()=>{},{errorOrDestroy:O}=R;function M(T,B,F){typeof F!="boolean"&&(F=B instanceof Gt()),this.objectMode=!!(T&&T.objectMode),F&&(this.objectMode=this.objectMode||!!(T&&T.readableObjectMode)),this.highWaterMark=T?P(this,T,"readableHighWaterMark",F):z(!1),this.buffer=new N,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[_]=null,this.errorEmitted=!1,this.emitClose=!T||T.emitClose!==!1,this.autoDestroy=!T||T.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=T&&T.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,T&&T.encoding&&(this.decoder=new h(T.encoding),this.encoding=T.encoding)}function U(T){if(!(this instanceof U))return new U(T);const B=this instanceof Gt();this._readableState=new M(T,this,B),T&&(typeof T.read=="function"&&(this._read=T.read),typeof T.destroy=="function"&&(this._destroy=T.destroy),typeof T.construct=="function"&&(this._construct=T.construct),T.signal&&!B&&L(T.signal,this)),g.call(this,T),R.construct(this,()=>{this._readableState.needReadable&&Ee(this,this._readableState)})}U.prototype.destroy=R.destroy,U.prototype._undestroy=R.undestroy,U.prototype._destroy=function(T,B){B(T)},U.prototype[p.captureRejectionSymbol]=function(T){this.destroy(T)},U.prototype.push=function(T,B){return j(this,T,B,!1)},U.prototype.unshift=function(T,B){return j(this,T,B,!0)};function j(T,B,F,H){w("readableAddChunk",B);const Z=T._readableState;let ke;if(Z.objectMode||(typeof B=="string"?(F=F||Z.defaultEncoding,Z.encoding!==F&&(H&&Z.encoding?B=C.from(B,F).toString(Z.encoding):(B=C.from(B,F),F=""))):B instanceof C?F="":g._isUint8Array(B)?(B=g._uint8ArrayToBuffer(B),F=""):B!=null&&(ke=new c("chunk",["string","Buffer","Uint8Array"],B))),ke)O(T,ke);else if(B===null)Z.reading=!1,Q(T,Z);else if(Z.objectMode||B&&B.length>0)if(H)if(Z.endEmitted)O(T,new m);else{if(Z.destroyed||Z.errored)return!1;X(T,Z,B,!0)}else if(Z.ended)O(T,new S);else{if(Z.destroyed||Z.errored)return!1;Z.reading=!1,Z.decoder&&!F?(B=Z.decoder.write(B),Z.objectMode||B.length!==0?X(T,Z,B,!1):Ee(T,Z)):X(T,Z,B,!1)}else H||(Z.reading=!1,Ee(T,Z));return!Z.ended&&(Z.length<Z.highWaterMark||Z.length===0)}function X(T,B,F,H){B.flowing&&B.length===0&&!B.sync&&T.listenerCount("data")>0?(B.multiAwaitDrain?B.awaitDrainWriters.clear():B.awaitDrainWriters=null,B.dataEmitted=!0,T.emit("data",F)):(B.length+=B.objectMode?1:F.length,H?B.buffer.unshift(F):B.buffer.push(F),B.needReadable&&ne(T)),Ee(T,B)}U.prototype.isPaused=function(){const T=this._readableState;return T[_]===!0||T.flowing===!1},U.prototype.setEncoding=function(T){const B=new h(T);this._readableState.decoder=B,this._readableState.encoding=this._readableState.decoder.encoding;const F=this._readableState.buffer;let H="";for(const Z of F)H+=B.write(Z);return F.clear(),H!==""&&F.push(H),this._readableState.length=H.length,this};const ee=1073741824;function re(T){if(T>ee)throw new d("size","<= 1GiB",T);return T--,T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T++,T}function Y(T,B){return T<=0||B.length===0&&B.ended?0:B.objectMode?1:n(T)?B.flowing&&B.length?B.buffer.first().length:B.length:T<=B.length?T:B.ended?B.length:0}U.prototype.read=function(T){w("read",T),T===void 0?T=NaN:r(T)||(T=i(T,10));const B=this._readableState,F=T;if(T>B.highWaterMark&&(B.highWaterMark=re(T)),T!==0&&(B.emittedReadable=!1),T===0&&B.needReadable&&((B.highWaterMark!==0?B.length>=B.highWaterMark:B.length>0)||B.ended))return w("read: emitReadable",B.length,B.ended),B.length===0&&B.ended?bt(this):ne(this),null;if(T=Y(T,B),T===0&&B.ended)return B.length===0&&bt(this),null;let H=B.needReadable;if(w("need readable",H),(B.length===0||B.length-T<B.highWaterMark)&&(H=!0,w("length less than watermark",H)),B.ended||B.reading||B.destroyed||B.errored||!B.constructed)H=!1,w("reading, ended or constructing",H);else if(H){w("do read"),B.reading=!0,B.sync=!0,B.length===0&&(B.needReadable=!0);try{this._read(B.highWaterMark)}catch(ke){O(this,ke)}B.sync=!1,B.reading||(T=Y(F,B))}let Z;return T>0?Z=de(T,B):Z=null,Z===null?(B.needReadable=B.length<=B.highWaterMark,T=0):(B.length-=T,B.multiAwaitDrain?B.awaitDrainWriters.clear():B.awaitDrainWriters=null),B.length===0&&(B.ended||(B.needReadable=!0),F!==T&&B.ended&&bt(this)),Z!==null&&!B.errorEmitted&&!B.closeEmitted&&(B.dataEmitted=!0,this.emit("data",Z)),Z};function Q(T,B){if(w("onEofChunk"),!B.ended){if(B.decoder){const F=B.decoder.end();F&&F.length&&(B.buffer.push(F),B.length+=B.objectMode?1:F.length)}B.ended=!0,B.sync?ne(T):(B.needReadable=!1,B.emittedReadable=!0,Ve(T))}}function ne(T){const B=T._readableState;w("emitReadable",B.needReadable,B.emittedReadable),B.needReadable=!1,B.emittedReadable||(w("emitReadable",B.flowing),B.emittedReadable=!0,e.nextTick(Ve,T))}function Ve(T){const B=T._readableState;w("emitReadable_",B.destroyed,B.length,B.ended),!B.destroyed&&!B.errored&&(B.length||B.ended)&&(T.emit("readable"),B.emittedReadable=!1),B.needReadable=!B.flowing&&!B.ended&&B.length<=B.highWaterMark,W(T)}function Ee(T,B){!B.readingMore&&B.constructed&&(B.readingMore=!0,e.nextTick(Ge,T,B))}function Ge(T,B){for(;!B.reading&&!B.ended&&(B.length<B.highWaterMark||B.flowing&&B.length===0);){const F=B.length;if(w("maybeReadMore read 0"),T.read(0),F===B.length)break}B.readingMore=!1}U.prototype._read=function(T){throw new y("_read()")},U.prototype.pipe=function(T,B){const F=this,H=this._readableState;H.pipes.length===1&&(H.multiAwaitDrain||(H.multiAwaitDrain=!0,H.awaitDrainWriters=new l(H.awaitDrainWriters?[H.awaitDrainWriters]:[]))),H.pipes.push(T),w("pipe count=%d opts=%j",H.pipes.length,B);const ke=(!B||B.end!==!1)&&T!==e.stdout&&T!==e.stderr?kl:jn;H.endEmitted?e.nextTick(ke):F.once("end",ke),T.on("unpipe",et);function et(Or,Pt){w("onunpipe"),Or===F&&Pt&&Pt.hasUnpiped===!1&&(Pt.hasUnpiped=!0,k0())}function kl(){w("onend"),T.end()}let Ir,zl=!1;function k0(){w("cleanup"),T.removeListener("close",ks),T.removeListener("finish",zs),Ir&&T.removeListener("drain",Ir),T.removeListener("error",Ps),T.removeListener("unpipe",et),F.removeListener("end",kl),F.removeListener("end",jn),F.removeListener("data",Dl),zl=!0,Ir&&H.awaitDrainWriters&&(!T._writableState||T._writableState.needDrain)&&Ir()}function $l(){zl||(H.pipes.length===1&&H.pipes[0]===T?(w("false write response, pause",0),H.awaitDrainWriters=T,H.multiAwaitDrain=!1):H.pipes.length>1&&H.pipes.includes(T)&&(w("false write response, pause",H.awaitDrainWriters.size),H.awaitDrainWriters.add(T)),F.pause()),Ir||(Ir=Se(F,T),T.on("drain",Ir))}F.on("data",Dl);function Dl(Or){w("ondata");const Pt=T.write(Or);w("dest.write",Pt),Pt===!1&&$l()}function Ps(Or){if(w("onerror",Or),jn(),T.removeListener("error",Ps),T.listenerCount("error")===0){const Pt=T._writableState||T._readableState;Pt&&!Pt.errorEmitted?O(T,Or):T.emit("error",Or)}}E(T,"error",Ps);function ks(){T.removeListener("finish",zs),jn()}T.once("close",ks);function zs(){w("onfinish"),T.removeListener("close",ks),jn()}T.once("finish",zs);function jn(){w("unpipe"),F.unpipe(T)}return T.emit("pipe",F),T.writableNeedDrain===!0?H.flowing&&$l():H.flowing||(w("pipe resume"),F.resume()),T};function Se(T,B){return function(){const H=T._readableState;H.awaitDrainWriters===B?(w("pipeOnDrain",1),H.awaitDrainWriters=null):H.multiAwaitDrain&&(w("pipeOnDrain",H.awaitDrainWriters.size),H.awaitDrainWriters.delete(B)),(!H.awaitDrainWriters||H.awaitDrainWriters.size===0)&&T.listenerCount("data")&&T.resume()}}U.prototype.unpipe=function(T){const B=this._readableState,F={hasUnpiped:!1};if(B.pipes.length===0)return this;if(!T){const Z=B.pipes;B.pipes=[],this.pause();for(let ke=0;ke<Z.length;ke++)Z[ke].emit("unpipe",this,{hasUnpiped:!1});return this}const H=t(B.pipes,T);return H===-1?this:(B.pipes.splice(H,1),B.pipes.length===0&&this.pause(),T.emit("unpipe",this,F),this)},U.prototype.on=function(T,B){const F=g.prototype.on.call(this,T,B),H=this._readableState;return T==="data"?(H.readableListening=this.listenerCount("readable")>0,H.flowing!==!1&&this.resume()):T==="readable"&&!H.endEmitted&&!H.readableListening&&(H.readableListening=H.needReadable=!0,H.flowing=!1,H.emittedReadable=!1,w("on readable",H.length,H.reading),H.length?ne(this):H.reading||e.nextTick($,this)),F},U.prototype.addListener=U.prototype.on,U.prototype.removeListener=function(T,B){const F=g.prototype.removeListener.call(this,T,B);return T==="readable"&&e.nextTick(be,this),F},U.prototype.off=U.prototype.removeListener,U.prototype.removeAllListeners=function(T){const B=g.prototype.removeAllListeners.apply(this,arguments);return(T==="readable"||T===void 0)&&e.nextTick(be,this),B};function be(T){const B=T._readableState;B.readableListening=T.listenerCount("readable")>0,B.resumeScheduled&&B[_]===!1?B.flowing=!0:T.listenerCount("data")>0?T.resume():B.readableListening||(B.flowing=null)}function $(T){w("readable nexttick read 0"),T.read(0)}U.prototype.resume=function(){const T=this._readableState;return T.flowing||(w("resume"),T.flowing=!T.readableListening,D(this,T)),T[_]=!1,this};function D(T,B){B.resumeScheduled||(B.resumeScheduled=!0,e.nextTick(V,T,B))}function V(T,B){w("resume",B.reading),B.reading||T.read(0),B.resumeScheduled=!1,T.emit("resume"),W(T),B.flowing&&!B.reading&&T.read(0)}U.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[_]=!0,this};function W(T){const B=T._readableState;for(w("flow",B.flowing);B.flowing&&T.read()!==null;);}U.prototype.wrap=function(T){let B=!1;T.on("data",H=>{!this.push(H)&&T.pause&&(B=!0,T.pause())}),T.on("end",()=>{this.push(null)}),T.on("error",H=>{O(this,H)}),T.on("close",()=>{this.destroy()}),T.on("destroy",()=>{this.destroy()}),this._read=()=>{B&&T.resume&&(B=!1,T.resume())};const F=s(T);for(let H=1;H<F.length;H++){const Z=F[H];this[Z]===void 0&&typeof T[Z]=="function"&&(this[Z]=T[Z].bind(T))}return this},U.prototype[u]=function(){return K(this)},U.prototype.iterator=function(T){return T!==void 0&&A(T,"options"),K(this,T)};function K(T,B){typeof T.read!="function"&&(T=U.wrap(T,{objectMode:!0}));const F=ce(T,B);return F.stream=T,F}async function*ce(T,B){let F=I;function H(et){this===T?(F(),F=I):F=et}T.on("readable",H);let Z;const ke=x(T,{writable:!1},et=>{Z=et?k(Z,et):null,F(),F=I});try{for(;;){const et=T.destroyed?null:T.read();if(et!==null)yield et;else{if(Z)throw Z;if(Z===null)return;await new f(H)}}}catch(et){throw Z=k(Z,et),Z}finally{(Z||B?.destroyOnReturn!==!1)&&(Z===void 0||T._readableState.autoDestroy)?R.destroyer(T,null):(T.off("readable",H),ke())}}o(U.prototype,{readable:{__proto__:null,get(){const T=this._readableState;return!!T&&T.readable!==!1&&!T.destroyed&&!T.errorEmitted&&!T.endEmitted},set(T){this._readableState&&(this._readableState.readable=!!T)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(T){this._readableState&&(this._readableState.flowing=T)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(T){this._readableState&&(this._readableState.destroyed=T)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),o(M.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[_]!==!1},set(T){this[_]=!!T}}}),U._fromList=de;function de(T,B){if(B.length===0)return null;let F;return B.objectMode?F=B.buffer.shift():!T||T>=B.length?(B.decoder?F=B.buffer.join(""):B.buffer.length===1?F=B.buffer.first():F=B.buffer.concat(B.length),B.buffer.clear()):F=B.buffer.consume(T,B.decoder),F}function bt(T){const B=T._readableState;w("endReadable",B.endEmitted),B.endEmitted||(B.ended=!0,e.nextTick(sn,B,T))}function sn(T,B){if(w("endReadableNT",T.endEmitted,T.length),!T.errored&&!T.closeEmitted&&!T.endEmitted&&T.length===0){if(T.endEmitted=!0,B.emit("end"),B.writable&&B.allowHalfOpen===!1)e.nextTick(Vn,B);else if(T.autoDestroy){const F=B._writableState;(!F||F.autoDestroy&&(F.finished||F.writable===!1))&&B.destroy()}}}function Vn(T){T.writable&&!T.writableEnded&&!T.destroyed&&T.end()}U.from=function(T,B){return v(U,T,B)};let Lt;function Pl(){return Lt===void 0&&(Lt={}),Lt}return U.fromWeb=function(T,B){return Pl().newStreamReadableFromReadableStream(T,B)},U.toWeb=function(T,B){return Pl().newReadableStreamFromStreamReadable(T,B)},U.wrap=function(T,B){var F,H;return new U({objectMode:(F=(H=T.readableObjectMode)!==null&&H!==void 0?H:T.objectMode)!==null&&F!==void 0?F:!0,...B,destroy(Z,ke){R.destroyer(T,Z),ke(Z)}}).wrap(T)},Hs}var qs,mu;function Th(){if(mu)return qs;mu=1;const e=Yr,{ArrayPrototypeSlice:t,Error:r,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:i,ObjectDefineProperties:o,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:a,Symbol:f,SymbolHasInstance:l}=Be;qs=h,h.WritableState=A;const{EventEmitter:u}=Oo,b=Uf.Stream,{Buffer:p}=Nr,g=Cn,{addAbortSignal:E}=Wo,{getHighWaterMark:C,getDefaultHighWaterMark:L}=Vf,{ERR_INVALID_ARG_TYPE:x,ERR_METHOD_NOT_IMPLEMENTED:w,ERR_MULTIPLE_CALLBACK:N,ERR_STREAM_CANNOT_PIPE:R,ERR_STREAM_DESTROYED:P,ERR_STREAM_ALREADY_FINISHED:z,ERR_STREAM_NULL_VALUES:k,ERR_STREAM_WRITE_AFTER_END:c,ERR_UNKNOWN_ENCODING:y}=Ye.codes,{errorOrDestroy:d}=g;s(h.prototype,b.prototype),s(h,b);function S(){}const m=f("kOnFinished");function A($,D,V){typeof V!="boolean"&&(V=D instanceof Gt()),this.objectMode=!!($&&$.objectMode),V&&(this.objectMode=this.objectMode||!!($&&$.writableObjectMode)),this.highWaterMark=$?C(this,$,"writableHighWaterMark",V):L(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const W=!!($&&$.decodeStrings===!1);this.decodeStrings=!W,this.defaultEncoding=$&&$.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=U.bind(void 0,D),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,_(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!$||$.emitClose!==!1,this.autoDestroy=!$||$.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[m]=[]}function _($){$.buffered=[],$.bufferedIndex=0,$.allBuffers=!0,$.allNoop=!0}A.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},i(A.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function h($){const D=this instanceof Gt();if(!D&&!n(h,this))return new h($);this._writableState=new A($,this,D),$&&(typeof $.write=="function"&&(this._write=$.write),typeof $.writev=="function"&&(this._writev=$.writev),typeof $.destroy=="function"&&(this._destroy=$.destroy),typeof $.final=="function"&&(this._final=$.final),typeof $.construct=="function"&&(this._construct=$.construct),$.signal&&E($.signal,this)),b.call(this,$),g.construct(this,()=>{const V=this._writableState;V.writing||re(this,V),Ve(this,V)})}i(h,l,{__proto__:null,value:function($){return n(this,$)?!0:this!==h?!1:$&&$._writableState instanceof A}}),h.prototype.pipe=function(){d(this,new R)};function v($,D,V,W){const K=$._writableState;if(typeof V=="function")W=V,V=K.defaultEncoding;else{if(!V)V=K.defaultEncoding;else if(V!=="buffer"&&!p.isEncoding(V))throw new y(V);typeof W!="function"&&(W=S)}if(D===null)throw new k;if(!K.objectMode)if(typeof D=="string")K.decodeStrings!==!1&&(D=p.from(D,V),V="buffer");else if(D instanceof p)V="buffer";else if(b._isUint8Array(D))D=b._uint8ArrayToBuffer(D),V="buffer";else throw new x("chunk",["string","Buffer","Uint8Array"],D);let ce;return K.ending?ce=new c:K.destroyed&&(ce=new P("write")),ce?(e.nextTick(W,ce),d($,ce,!0),ce):(K.pendingcb++,I($,K,D,V,W))}h.prototype.write=function($,D,V){return v(this,$,D,V)===!0},h.prototype.cork=function(){this._writableState.corked++},h.prototype.uncork=function(){const $=this._writableState;$.corked&&($.corked--,$.writing||re(this,$))},h.prototype.setDefaultEncoding=function(D){if(typeof D=="string"&&(D=a(D)),!p.isEncoding(D))throw new y(D);return this._writableState.defaultEncoding=D,this};function I($,D,V,W,K){const ce=D.objectMode?1:V.length;D.length+=ce;const de=D.length<D.highWaterMark;return de||(D.needDrain=!0),D.writing||D.corked||D.errored||!D.constructed?(D.buffered.push({chunk:V,encoding:W,callback:K}),D.allBuffers&&W!=="buffer"&&(D.allBuffers=!1),D.allNoop&&K!==S&&(D.allNoop=!1)):(D.writelen=ce,D.writecb=K,D.writing=!0,D.sync=!0,$._write(V,W,D.onwrite),D.sync=!1),de&&!D.errored&&!D.destroyed}function O($,D,V,W,K,ce,de){D.writelen=W,D.writecb=de,D.writing=!0,D.sync=!0,D.destroyed?D.onwrite(new P("write")):V?$._writev(K,D.onwrite):$._write(K,ce,D.onwrite),D.sync=!1}function M($,D,V,W){--D.pendingcb,W(V),ee(D),d($,V)}function U($,D){const V=$._writableState,W=V.sync,K=V.writecb;if(typeof K!="function"){d($,new N);return}V.writing=!1,V.writecb=null,V.length-=V.writelen,V.writelen=0,D?(D.stack,V.errored||(V.errored=D),$._readableState&&!$._readableState.errored&&($._readableState.errored=D),W?e.nextTick(M,$,V,D,K):M($,V,D,K)):(V.buffered.length>V.bufferedIndex&&re($,V),W?V.afterWriteTickInfo!==null&&V.afterWriteTickInfo.cb===K?V.afterWriteTickInfo.count++:(V.afterWriteTickInfo={count:1,cb:K,stream:$,state:V},e.nextTick(j,V.afterWriteTickInfo)):X($,V,1,K))}function j({stream:$,state:D,count:V,cb:W}){return D.afterWriteTickInfo=null,X($,D,V,W)}function X($,D,V,W){for(!D.ending&&!$.destroyed&&D.length===0&&D.needDrain&&(D.needDrain=!1,$.emit("drain"));V-- >0;)D.pendingcb--,W();D.destroyed&&ee(D),Ve($,D)}function ee($){if($.writing)return;for(let K=$.bufferedIndex;K<$.buffered.length;++K){var D;const{chunk:ce,callback:de}=$.buffered[K],bt=$.objectMode?1:ce.length;$.length-=bt,de((D=$.errored)!==null&&D!==void 0?D:new P("write"))}const V=$[m].splice(0);for(let K=0;K<V.length;K++){var W;V[K]((W=$.errored)!==null&&W!==void 0?W:new P("end"))}_($)}function re($,D){if(D.corked||D.bufferProcessing||D.destroyed||!D.constructed)return;const{buffered:V,bufferedIndex:W,objectMode:K}=D,ce=V.length-W;if(!ce)return;let de=W;if(D.bufferProcessing=!0,ce>1&&$._writev){D.pendingcb-=ce-1;const bt=D.allNoop?S:Vn=>{for(let Lt=de;Lt<V.length;++Lt)V[Lt].callback(Vn)},sn=D.allNoop&&de===0?V:t(V,de);sn.allBuffers=D.allBuffers,O($,D,!0,D.length,sn,"",bt),_(D)}else{do{const{chunk:bt,encoding:sn,callback:Vn}=V[de];V[de++]=null;const Lt=K?1:bt.length;O($,D,!1,Lt,bt,sn,Vn)}while(de<V.length&&!D.writing);de===V.length?_(D):de>256?(V.splice(0,de),D.bufferedIndex=0):D.bufferedIndex=de}D.bufferProcessing=!1}h.prototype._write=function($,D,V){if(this._writev)this._writev([{chunk:$,encoding:D}],V);else throw new w("_write()")},h.prototype._writev=null,h.prototype.end=function($,D,V){const W=this._writableState;typeof $=="function"?(V=$,$=null,D=null):typeof D=="function"&&(V=D,D=null);let K;if($!=null){const ce=v(this,$,D);ce instanceof r&&(K=ce)}return W.corked&&(W.corked=1,this.uncork()),K||(!W.errored&&!W.ending?(W.ending=!0,Ve(this,W,!0),W.ended=!0):W.finished?K=new z("end"):W.destroyed&&(K=new P("end"))),typeof V=="function"&&(K||W.finished?e.nextTick(V,K):W[m].push(V)),this};function Y($){return $.ending&&!$.destroyed&&$.constructed&&$.length===0&&!$.errored&&$.buffered.length===0&&!$.finished&&!$.writing&&!$.errorEmitted&&!$.closeEmitted}function Q($,D){let V=!1;function W(K){if(V){d($,K??N());return}if(V=!0,D.pendingcb--,K){const ce=D[m].splice(0);for(let de=0;de<ce.length;de++)ce[de](K);d($,K,D.sync)}else Y(D)&&(D.prefinished=!0,$.emit("prefinish"),D.pendingcb++,e.nextTick(Ee,$,D))}D.sync=!0,D.pendingcb++;try{$._final(W)}catch(K){W(K)}D.sync=!1}function ne($,D){!D.prefinished&&!D.finalCalled&&(typeof $._final=="function"&&!D.destroyed?(D.finalCalled=!0,Q($,D)):(D.prefinished=!0,$.emit("prefinish")))}function Ve($,D,V){Y(D)&&(ne($,D),D.pendingcb===0&&(V?(D.pendingcb++,e.nextTick((W,K)=>{Y(K)?Ee(W,K):K.pendingcb--},$,D)):Y(D)&&(D.pendingcb++,Ee($,D))))}function Ee($,D){D.pendingcb--,D.finished=!0;const V=D[m].splice(0);for(let W=0;W<V.length;W++)V[W]();if($.emit("finish"),D.autoDestroy){const W=$._readableState;(!W||W.autoDestroy&&(W.endEmitted||W.readable===!1))&&$.destroy()}}o(h.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set($){this._writableState&&(this._writableState.destroyed=$)}},writable:{__proto__:null,get(){const $=this._writableState;return!!$&&$.writable!==!1&&!$.destroyed&&!$.errored&&!$.ending&&!$.ended},set($){this._writableState&&(this._writableState.writable=!!$)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const $=this._writableState;return $?!$.destroyed&&!$.ending&&$.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Ge=g.destroy;h.prototype.destroy=function($,D){const V=this._writableState;return!V.destroyed&&(V.bufferedIndex<V.buffered.length||V[m].length)&&e.nextTick(ee,V),Ge.call(this,$,D),this},h.prototype._undestroy=g.undestroy,h.prototype._destroy=function($,D){D($)},h.prototype[u.captureRejectionSymbol]=function($){this.destroy($)};let Se;function be(){return Se===void 0&&(Se={}),Se}return h.fromWeb=function($,D){return be().newStreamWritableFromWritableStream($,D)},h.toWeb=function($){return be().newWritableStreamFromStreamWritable($)},qs}var Gs,vu;function Hb(){if(vu)return Gs;vu=1;const e=Yr,t=Nr,{isReadable:r,isWritable:n,isIterable:i,isNodeStream:o,isReadableNodeStream:s,isWritableNodeStream:a,isDuplexNodeStream:f}=Kt,l=xr,{AbortError:u,codes:{ERR_INVALID_ARG_TYPE:b,ERR_INVALID_RETURN_VALUE:p}}=Ye,{destroyer:g}=Cn,E=Gt(),C=Zo(),{createDeferredPromise:L}=Zt,x=Eh,w=globalThis.Blob||t.Blob,N=typeof w<"u"?function(d){return d instanceof w}:function(d){return!1},R=globalThis.AbortController||Pf().AbortController,{FunctionPrototypeCall:P}=Be;class z extends E{constructor(d){super(d),d?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Gs=function y(d,S){if(f(d))return d;if(s(d))return c({readable:d});if(a(d))return c({writable:d});if(o(d))return c({writable:!1,readable:!1});if(typeof d=="function"){const{value:A,write:_,final:h,destroy:v}=k(d);if(i(A))return x(z,A,{objectMode:!0,write:_,final:h,destroy:v});const I=A?.then;if(typeof I=="function"){let O;const M=P(I,A,U=>{if(U!=null)throw new p("nully","body",U)},U=>{g(O,U)});return O=new z({objectMode:!0,readable:!1,write:_,final(U){h(async()=>{try{await M,e.nextTick(U,null)}catch(j){e.nextTick(U,j)}})},destroy:v})}throw new p("Iterable, AsyncIterable or AsyncFunction",S,A)}if(N(d))return y(d.arrayBuffer());if(i(d))return x(z,d,{objectMode:!0,writable:!1});if(typeof d?.writable=="object"||typeof d?.readable=="object"){const A=d!=null&&d.readable?s(d?.readable)?d?.readable:y(d.readable):void 0,_=d!=null&&d.writable?a(d?.writable)?d?.writable:y(d.writable):void 0;return c({readable:A,writable:_})}const m=d?.then;if(typeof m=="function"){let A;return P(m,d,_=>{_!=null&&A.push(_),A.push(null)},_=>{g(A,_)}),A=new z({objectMode:!0,writable:!1,read(){}})}throw new b(S,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],d)};function k(y){let{promise:d,resolve:S}=L();const m=new R,A=m.signal;return{value:y(async function*(){for(;;){const h=d;d=null;const{chunk:v,done:I,cb:O}=await h;if(e.nextTick(O),I)return;if(A.aborted)throw new u(void 0,{cause:A.reason});({promise:d,resolve:S}=L()),yield v}}(),{signal:A}),write(h,v,I){const O=S;S=null,O({chunk:h,done:!1,cb:I})},final(h){const v=S;S=null,v({done:!0,cb:h})},destroy(h,v){m.abort(),v(h)}}}function c(y){const d=y.readable&&typeof y.readable.read!="function"?C.wrap(y.readable):y.readable,S=y.writable;let m=!!r(d),A=!!n(S),_,h,v,I,O;function M(U){const j=I;I=null,j?j(U):U&&O.destroy(U)}return O=new z({readableObjectMode:!!(d!=null&&d.readableObjectMode),writableObjectMode:!!(S!=null&&S.writableObjectMode),readable:m,writable:A}),A&&(l(S,U=>{A=!1,U&&g(d,U),M(U)}),O._write=function(U,j,X){S.write(U,j)?X():_=X},O._final=function(U){S.end(),h=U},S.on("drain",function(){if(_){const U=_;_=null,U()}}),S.on("finish",function(){if(h){const U=h;h=null,U()}})),m&&(l(d,U=>{m=!1,U&&g(d,U),M(U)}),d.on("readable",function(){if(v){const U=v;v=null,U()}}),d.on("end",function(){O.push(null)}),O._read=function(){for(;;){const U=d.read();if(U===null){v=O._read;return}if(!O.push(U))return}}),O._destroy=function(U,j){!U&&I!==null&&(U=new u),v=null,_=null,h=null,I===null?j(U):(I=j,g(S,U),g(d,U))},O}return Gs}var Ws,Eu;function Gt(){if(Eu)return Ws;Eu=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:r,ObjectSetPrototypeOf:n}=Be;Ws=s;const i=Zo(),o=Th();n(s.prototype,i.prototype),n(s,i);{const u=r(o.prototype);for(let b=0;b<u.length;b++){const p=u[b];s.prototype[p]||(s.prototype[p]=o.prototype[p])}}function s(u){if(!(this instanceof s))return new s(u);i.call(this,u),o.call(this,u),u?(this.allowHalfOpen=u.allowHalfOpen!==!1,u.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),u.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(s.prototype,{writable:{__proto__:null,...t(o.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(o.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(o.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(o.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(o.prototype,"writableLength")},writableFinished:{__proto__:null,...t(o.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(o.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(o.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(o.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(u){this._readableState&&this._writableState&&(this._readableState.destroyed=u,this._writableState.destroyed=u)}}});let a;function f(){return a===void 0&&(a={}),a}s.fromWeb=function(u,b){return f().newStreamDuplexFromReadableWritablePair(u,b)},s.toWeb=function(u){return f().newReadableWritablePairFromDuplex(u)};let l;return s.from=function(u){return l||(l=Hb()),l(u,"body")},Ws}const{ObjectSetPrototypeOf:Sh,Symbol:qb}=Be;var Ah=Wt;const{ERR_METHOD_NOT_IMPLEMENTED:Gb}=Ye.codes,jf=Gt(),{getHighWaterMark:Wb}=Vf;Sh(Wt.prototype,jf.prototype);Sh(Wt,jf);const ri=qb("kCallback");function Wt(e){if(!(this instanceof Wt))return new Wt(e);const t=e?Wb(this,e,"readableHighWaterMark",!0):null;t===0&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),jf.call(this,e),this._readableState.sync=!1,this[ri]=null,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",Zb)}function sf(e){typeof this._flush=="function"&&!this.destroyed?this._flush((t,r)=>{if(t){e?e(t):this.destroy(t);return}r!=null&&this.push(r),this.push(null),e&&e()}):(this.push(null),e&&e())}function Zb(){this._final!==sf&&sf.call(this)}Wt.prototype._final=sf;Wt.prototype._transform=function(e,t,r){throw new Gb("_transform()")};Wt.prototype._write=function(e,t,r){const n=this._readableState,i=this._writableState,o=n.length;this._transform(e,t,(s,a)=>{if(s){r(s);return}a!=null&&this.push(a),i.ended||o===n.length||n.length<n.highWaterMark?r():this[ri]=r})};Wt.prototype._read=function(){if(this[ri]){const e=this[ri];this[ri]=null,e()}};const{ObjectSetPrototypeOf:Nh}=Be;var Bh=Sn;const Ff=Ah;Nh(Sn.prototype,Ff.prototype);Nh(Sn,Ff);function Sn(e){if(!(this instanceof Sn))return new Sn(e);Ff.call(this,e)}Sn.prototype._transform=function(e,t,r){r(null,e)};const Qn=Yr,{ArrayIsArray:Kb,Promise:Xb,SymbolAsyncIterator:Yb}=Be,_o=xr,{once:Jb}=Zt,Qb=Cn,Tu=Gt(),{aggregateTwoErrors:ew,codes:{ERR_INVALID_ARG_TYPE:af,ERR_INVALID_RETURN_VALUE:Zs,ERR_MISSING_ARGS:tw,ERR_STREAM_DESTROYED:rw,ERR_STREAM_PREMATURE_CLOSE:nw},AbortError:iw}=Ye,{validateFunction:ow,validateAbortSignal:sw}=Uo,{isIterable:$r,isReadable:Ks,isReadableNodeStream:no,isNodeStream:Su,isTransformStream:gn,isWebStream:aw,isReadableStream:Xs,isReadableEnded:fw}=Kt,lw=globalThis.AbortController||Pf().AbortController;let Ys,Js;function Au(e,t,r){let n=!1;e.on("close",()=>{n=!0});const i=_o(e,{readable:t,writable:r},o=>{n=!o});return{destroy:o=>{n||(n=!0,Qb.destroyer(e,o||new rw("pipe")))},cleanup:i}}function uw(e){return ow(e[e.length-1],"streams[stream.length - 1]"),e.pop()}function Qs(e){if($r(e))return e;if(no(e))return cw(e);throw new af("val",["Readable","Iterable","AsyncIterable"],e)}async function*cw(e){Js||(Js=Zo()),yield*Js.prototype[Yb].call(e)}async function Vi(e,t,r,{end:n}){let i,o=null;const s=l=>{if(l&&(i=l),o){const u=o;o=null,u()}},a=()=>new Xb((l,u)=>{i?u(i):o=()=>{i?u(i):l()}});t.on("drain",s);const f=_o(t,{readable:!1},s);try{t.writableNeedDrain&&await a();for await(const l of e)t.write(l)||await a();n&&t.end(),await a(),r()}catch(l){r(i!==l?ew(i,l):l)}finally{f(),t.off("drain",s)}}async function ea(e,t,r,{end:n}){gn(t)&&(t=t.writable);const i=t.getWriter();try{for await(const o of e)await i.ready,i.write(o).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(o){try{await i.abort(o),r(o)}catch(s){r(s)}}}function dw(...e){return xh(e,Jb(uw(e)))}function xh(e,t,r){if(e.length===1&&Kb(e[0])&&(e=e[0]),e.length<2)throw new tw("streams");const n=new lw,i=n.signal,o=r?.signal,s=[];sw(o,"options.signal");function a(){g(new iw)}o?.addEventListener("abort",a);let f,l;const u=[];let b=0;function p(x){g(x,--b===0)}function g(x,w){if(x&&(!f||f.code==="ERR_STREAM_PREMATURE_CLOSE")&&(f=x),!(!f&&!w)){for(;u.length;)u.shift()(f);o?.removeEventListener("abort",a),n.abort(),w&&(f||s.forEach(N=>N()),Qn.nextTick(t,f,l))}}let E;for(let x=0;x<e.length;x++){const w=e[x],N=x<e.length-1,R=x>0,P=N||r?.end!==!1,z=x===e.length-1;if(Su(w)){let k=function(c){c&&c.name!=="AbortError"&&c.code!=="ERR_STREAM_PREMATURE_CLOSE"&&p(c)};if(P){const{destroy:c,cleanup:y}=Au(w,N,R);u.push(c),Ks(w)&&z&&s.push(y)}w.on("error",k),Ks(w)&&z&&s.push(()=>{w.removeListener("error",k)})}if(x===0)if(typeof w=="function"){if(E=w({signal:i}),!$r(E))throw new Zs("Iterable, AsyncIterable or Stream","source",E)}else $r(w)||no(w)||gn(w)?E=w:E=Tu.from(w);else if(typeof w=="function"){if(gn(E)){var C;E=Qs((C=E)===null||C===void 0?void 0:C.readable)}else E=Qs(E);if(E=w(E,{signal:i}),N){if(!$r(E,!0))throw new Zs("AsyncIterable",`transform[${x-1}]`,E)}else{var L;Ys||(Ys=Bh);const k=new Ys({objectMode:!0}),c=(L=E)===null||L===void 0?void 0:L.then;if(typeof c=="function")b++,c.call(E,S=>{l=S,S!=null&&k.write(S),P&&k.end(),Qn.nextTick(p)},S=>{k.destroy(S),Qn.nextTick(p,S)});else if($r(E,!0))b++,Vi(E,k,p,{end:P});else if(Xs(E)||gn(E)){const S=E.readable||E;b++,Vi(S,k,p,{end:P})}else throw new Zs("AsyncIterable or Promise","destination",E);E=k;const{destroy:y,cleanup:d}=Au(E,!1,!0);u.push(y),z&&s.push(d)}}else if(Su(w)){if(no(E)){b+=2;const k=hw(E,w,p,{end:P});Ks(w)&&z&&s.push(k)}else if(gn(E)||Xs(E)){const k=E.readable||E;b++,Vi(k,w,p,{end:P})}else if($r(E))b++,Vi(E,w,p,{end:P});else throw new af("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],E);E=w}else if(aw(w)){if(no(E))b++,ea(Qs(E),w,p,{end:P});else if(Xs(E)||$r(E))b++,ea(E,w,p,{end:P});else if(gn(E))b++,ea(E.readable,w,p,{end:P});else throw new af("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],E);E=w}else E=Tu.from(w)}return(i!=null&&i.aborted||o!=null&&o.aborted)&&Qn.nextTick(a),E}function hw(e,t,r,{end:n}){let i=!1;if(t.on("close",()=>{i||r(new nw)}),e.pipe(t,{end:!1}),n){let o=function(){i=!0,t.end()};fw(e)?Qn.nextTick(o):e.once("end",o)}else r();return _o(e,{readable:!0,writable:!1},o=>{const s=e._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&s&&s.ended&&!s.errored&&!s.errorEmitted?e.once("end",r).once("error",r):r(o)}),_o(t,{readable:!1,writable:!0},r)}var Hf={pipelineImpl:xh,pipeline:dw};const{pipeline:gw}=Hf,ji=Gt(),{destroyer:yw}=Cn,{isNodeStream:Fi,isReadable:Nu,isWritable:Bu,isWebStream:ta,isTransformStream:Cr,isWritableStream:xu,isReadableStream:Ru}=Kt,{AbortError:pw,codes:{ERR_INVALID_ARG_VALUE:Iu,ERR_MISSING_ARGS:_w}}=Ye,bw=xr;var Rh=function(...t){if(t.length===0)throw new _w("streams");if(t.length===1)return ji.from(t[0]);const r=[...t];if(typeof t[0]=="function"&&(t[0]=ji.from(t[0])),typeof t[t.length-1]=="function"){const g=t.length-1;t[g]=ji.from(t[g])}for(let g=0;g<t.length;++g)if(!(!Fi(t[g])&&!ta(t[g]))){if(g<t.length-1&&!(Nu(t[g])||Ru(t[g])||Cr(t[g])))throw new Iu(`streams[${g}]`,r[g],"must be readable");if(g>0&&!(Bu(t[g])||xu(t[g])||Cr(t[g])))throw new Iu(`streams[${g}]`,r[g],"must be writable")}let n,i,o,s,a;function f(g){const E=s;s=null,E?E(g):g?a.destroy(g):!p&&!b&&a.destroy()}const l=t[0],u=gw(t,f),b=!!(Bu(l)||xu(l)||Cr(l)),p=!!(Nu(u)||Ru(u)||Cr(u));if(a=new ji({writableObjectMode:!!(l!=null&&l.writableObjectMode),readableObjectMode:!!(u!=null&&u.writableObjectMode),writable:b,readable:p}),b){if(Fi(l))a._write=function(E,C,L){l.write(E,C)?L():n=L},a._final=function(E){l.end(),i=E},l.on("drain",function(){if(n){const E=n;n=null,E()}});else if(ta(l)){const C=(Cr(l)?l.writable:l).getWriter();a._write=async function(L,x,w){try{await C.ready,C.write(L).catch(()=>{}),w()}catch(N){w(N)}},a._final=async function(L){try{await C.ready,C.close().catch(()=>{}),i=L}catch(x){L(x)}}}const g=Cr(u)?u.readable:u;bw(g,()=>{if(i){const E=i;i=null,E()}})}if(p){if(Fi(u))u.on("readable",function(){if(o){const g=o;o=null,g()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){const g=u.read();if(g===null){o=a._read;return}if(!a.push(g))return}};else if(ta(u)){const E=(Cr(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{const{value:C,done:L}=await E.read();if(!a.push(C))return;if(L){a.push(null);return}}catch{return}}}}return a._destroy=function(g,E){!g&&s!==null&&(g=new pw),o=null,n=null,i=null,s===null?E(g):(s=E,Fi(u)&&yw(u,g))},a};const Ih=globalThis.AbortController||Pf().AbortController,{codes:{ERR_INVALID_ARG_VALUE:ww,ERR_INVALID_ARG_TYPE:Ai,ERR_MISSING_ARGS:mw,ERR_OUT_OF_RANGE:vw},AbortError:xt}=Ye,{validateAbortSignal:Qr,validateInteger:Ew,validateObject:en}=Uo,Tw=Be.Symbol("kWeak"),{finished:Sw}=xr,Aw=Rh,{addAbortSignalNoValidate:Nw}=Wo,{isWritable:Bw,isNodeStream:xw}=Kt,{ArrayPrototypePush:Rw,MathFloor:Iw,Number:Ow,NumberIsNaN:Cw,Promise:Ou,PromiseReject:Cu,PromisePrototypeThen:Lw,Symbol:Oh}=Be,bo=Oh("kEmpty"),Lu=Oh("kEof");function Pw(e,t){if(t!=null&&en(t,"options"),t?.signal!=null&&Qr(t.signal,"options.signal"),xw(e)&&!Bw(e))throw new ww("stream",e,"must be writable");const r=Aw(this,e);return t!=null&&t.signal&&Nw(t.signal,r),r}function Ko(e,t){if(typeof e!="function")throw new Ai("fn",["Function","AsyncFunction"],e);t!=null&&en(t,"options"),t?.signal!=null&&Qr(t.signal,"options.signal");let r=1;return t?.concurrency!=null&&(r=Iw(t.concurrency)),Ew(r,"concurrency",1),async function*(){var i,o;const s=new Ih,a=this,f=[],l=s.signal,u={signal:l},b=()=>s.abort();t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted&&b(),t==null||(o=t.signal)===null||o===void 0||o.addEventListener("abort",b);let p,g,E=!1;function C(){E=!0}async function L(){try{for await(let N of a){var x;if(E)return;if(l.aborted)throw new xt;try{N=e(N,u)}catch(R){N=Cu(R)}N!==bo&&(typeof((x=N)===null||x===void 0?void 0:x.catch)=="function"&&N.catch(C),f.push(N),p&&(p(),p=null),!E&&f.length&&f.length>=r&&await new Ou(R=>{g=R}))}f.push(Lu)}catch(N){const R=Cu(N);Lw(R,void 0,C),f.push(R)}finally{var w;E=!0,p&&(p(),p=null),t==null||(w=t.signal)===null||w===void 0||w.removeEventListener("abort",b)}}L();try{for(;;){for(;f.length>0;){const x=await f[0];if(x===Lu)return;if(l.aborted)throw new xt;x!==bo&&(yield x),f.shift(),g&&(g(),g=null)}await new Ou(x=>{p=x})}}finally{s.abort(),E=!0,g&&(g(),g=null)}}.call(this)}function kw(e=void 0){return e!=null&&en(e,"options"),e?.signal!=null&&Qr(e.signal,"options.signal"),async function*(){let r=0;for await(const i of this){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new xt({cause:e.signal.reason});yield[r++,i]}}.call(this)}async function Ch(e,t=void 0){for await(const r of qf.call(this,e,t))return!0;return!1}async function zw(e,t=void 0){if(typeof e!="function")throw new Ai("fn",["Function","AsyncFunction"],e);return!await Ch.call(this,async(...r)=>!await e(...r),t)}async function $w(e,t){for await(const r of qf.call(this,e,t))return r}async function Dw(e,t){if(typeof e!="function")throw new Ai("fn",["Function","AsyncFunction"],e);async function r(n,i){return await e(n,i),bo}for await(const n of Ko.call(this,r,t));}function qf(e,t){if(typeof e!="function")throw new Ai("fn",["Function","AsyncFunction"],e);async function r(n,i){return await e(n,i)?n:bo}return Ko.call(this,r,t)}class Mw extends mw{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Uw(e,t,r){var n;if(typeof e!="function")throw new Ai("reducer",["Function","AsyncFunction"],e);r!=null&&en(r,"options"),r?.signal!=null&&Qr(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){const l=new xt(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await Sw(this.destroy(l)),l}const o=new Ih,s=o.signal;if(r!=null&&r.signal){const l={once:!0,[Tw]:this};r.signal.addEventListener("abort",()=>o.abort(),l)}let a=!1;try{for await(const l of this){var f;if(a=!0,r!=null&&(f=r.signal)!==null&&f!==void 0&&f.aborted)throw new xt;i?t=await e(t,l,{signal:s}):(t=l,i=!0)}if(!a&&!i)throw new Mw}finally{o.abort()}return t}async function Vw(e){e!=null&&en(e,"options"),e?.signal!=null&&Qr(e.signal,"options.signal");const t=[];for await(const n of this){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new xt(void 0,{cause:e.signal.reason});Rw(t,n)}return t}function jw(e,t){const r=Ko.call(this,e,t);return async function*(){for await(const i of r)yield*i}.call(this)}function Lh(e){if(e=Ow(e),Cw(e))return 0;if(e<0)throw new vw("number",">= 0",e);return e}function Fw(e,t=void 0){return t!=null&&en(t,"options"),t?.signal!=null&&Qr(t.signal,"options.signal"),e=Lh(e),async function*(){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new xt;for await(const o of this){var i;if(t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted)throw new xt;e--<=0&&(yield o)}}.call(this)}function Hw(e,t=void 0){return t!=null&&en(t,"options"),t?.signal!=null&&Qr(t.signal,"options.signal"),e=Lh(e),async function*(){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new xt;for await(const o of this){var i;if(t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted)throw new xt;if(e-- >0)yield o;else return}}.call(this)}Lf.streamReturningOperators={asIndexedPairs:kw,drop:Fw,filter:qf,flatMap:jw,map:Ko,take:Hw,compose:Pw};Lf.promiseReturningOperators={every:zw,forEach:Dw,reduce:Uw,toArray:Vw,some:Ch,find:$w};const{ArrayPrototypePop:qw,Promise:Gw}=Be,{isIterable:Ww,isNodeStream:Zw,isWebStream:Kw}=Kt,{pipelineImpl:Xw}=Hf,{finished:Yw}=xr;function Jw(...e){return new Gw((t,r)=>{let n,i;const o=e[e.length-1];if(o&&typeof o=="object"&&!Zw(o)&&!Ww(o)&&!Kw(o)){const s=qw(e);n=s.signal,i=s.end}Xw(e,(s,a)=>{s?r(s):t(a)},{signal:n,end:i})})}var Ph={finished:Yw,pipeline:Jw};const{Buffer:Qw}=Nr,{ObjectDefineProperty:jt,ObjectKeys:kh,ReflectApply:zh}=Be,{promisify:{custom:$h}}=Zt,{streamReturningOperators:Pu,promiseReturningOperators:ku}=Lf,{codes:{ERR_ILLEGAL_CONSTRUCTOR:Dh}}=Ye,em=Rh,{pipeline:Mh}=Hf,{destroyer:tm}=Cn,Uh=xr,Gf=Ph,Wf=Kt,ve=Gd.exports=Uf.Stream;ve.isDisturbed=Wf.isDisturbed;ve.isErrored=Wf.isErrored;ve.isReadable=Wf.isReadable;ve.Readable=Zo();for(const e of kh(Pu)){let r=function(...n){if(new.target)throw Dh();return ve.Readable.from(zh(t,this,n))};const t=Pu[e];jt(r,"name",{__proto__:null,value:t.name}),jt(r,"length",{__proto__:null,value:t.length}),jt(ve.Readable.prototype,e,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}for(const e of kh(ku)){let r=function(...n){if(new.target)throw Dh();return zh(t,this,n)};const t=ku[e];jt(r,"name",{__proto__:null,value:t.name}),jt(r,"length",{__proto__:null,value:t.length}),jt(ve.Readable.prototype,e,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}ve.Writable=Th();ve.Duplex=Gt();ve.Transform=Ah;ve.PassThrough=Bh;ve.pipeline=Mh;const{addAbortSignal:rm}=Wo;ve.addAbortSignal=rm;ve.finished=Uh;ve.destroy=tm;ve.compose=em;jt(ve,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return Gf}});jt(Mh,$h,{__proto__:null,enumerable:!0,get(){return Gf.pipeline}});jt(Uh,$h,{__proto__:null,enumerable:!0,get(){return Gf.finished}});ve.Stream=ve;ve._isUint8Array=function(t){return t instanceof Uint8Array};ve._uint8ArrayToBuffer=function(t){return Qw.from(t.buffer,t.byteOffset,t.byteLength)};var nm=Gd.exports;(function(e){const t=nm,r=Ph,n=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=n,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return r}}),e.exports.Stream=t.Stream,e.exports.default=e.exports})(jp);var lr={},yr={};Object.defineProperty(yr,"__esModule",{value:!0});yr.EthereumProviderError=yr.EthereumRpcError=void 0;const im=$0;class Vh extends Error{constructor(t,r,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string.');super(r),this.code=t,n!==void 0&&(this.data=n)}serialize(){const t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),this.stack&&(t.stack=this.stack),t}toString(){return im.default(this.serialize(),am,2)}}yr.EthereumRpcError=Vh;class om extends Vh{constructor(t,r,n){if(!sm(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,r,n)}}yr.EthereumProviderError=om;function sm(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function am(e,t){if(t!=="[Circular]")return t}var Zf={},pr={};Object.defineProperty(pr,"__esModule",{value:!0});pr.errorValues=pr.errorCodes=void 0;pr.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};pr.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const t=pr,r=yr,n=t.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",o={code:n,message:s(n)};e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function s(p,g=i){if(Number.isInteger(p)){const E=p.toString();if(b(t.errorValues,E))return t.errorValues[E].message;if(l(p))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return g}e.getMessageFromCode=s;function a(p){if(!Number.isInteger(p))return!1;const g=p.toString();return!!(t.errorValues[g]||l(p))}e.isValidCode=a;function f(p,{fallbackError:g=o,shouldIncludeStack:E=!1}={}){var C,L;if(!g||!Number.isInteger(g.code)||typeof g.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(p instanceof r.EthereumRpcError)return p.serialize();const x={};if(p&&typeof p=="object"&&!Array.isArray(p)&&b(p,"code")&&a(p.code)){const N=p;x.code=N.code,N.message&&typeof N.message=="string"?(x.message=N.message,b(N,"data")&&(x.data=N.data)):(x.message=s(x.code),x.data={originalError:u(p)})}else{x.code=g.code;const N=(C=p)===null||C===void 0?void 0:C.message;x.message=N&&typeof N=="string"?N:g.message,x.data={originalError:u(p)}}const w=(L=p)===null||L===void 0?void 0:L.stack;return E&&p&&w&&typeof w=="string"&&(x.stack=w),x}e.serializeError=f;function l(p){return p>=-32099&&p<=-32e3}function u(p){return p&&typeof p=="object"&&!Array.isArray(p)?Object.assign({},p):p}function b(p,g){return Object.prototype.hasOwnProperty.call(p,g)}})(Zf);var Xo={};Object.defineProperty(Xo,"__esModule",{value:!0});Xo.ethErrors=void 0;const Kf=yr,jh=Zf,ze=pr;Xo.ethErrors={rpc:{parse:e=>rt(ze.errorCodes.rpc.parse,e),invalidRequest:e=>rt(ze.errorCodes.rpc.invalidRequest,e),invalidParams:e=>rt(ze.errorCodes.rpc.invalidParams,e),methodNotFound:e=>rt(ze.errorCodes.rpc.methodNotFound,e),internal:e=>rt(ze.errorCodes.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return rt(t,e)},invalidInput:e=>rt(ze.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>rt(ze.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>rt(ze.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>rt(ze.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>rt(ze.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>rt(ze.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>qn(ze.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>qn(ze.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>qn(ze.errorCodes.provider.unsupportedMethod,e),disconnected:e=>qn(ze.errorCodes.provider.disconnected,e),chainDisconnected:e=>qn(ze.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:n}=e;if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string');return new Kf.EthereumProviderError(t,r,n)}}};function rt(e,t){const[r,n]=Fh(t);return new Kf.EthereumRpcError(e,r||jh.getMessageFromCode(e),n)}function qn(e,t){const[r,n]=Fh(t);return new Kf.EthereumProviderError(e,r||jh.getMessageFromCode(e),n)}function Fh(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&typeof t!="string")throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMessageFromCode=e.serializeError=e.EthereumProviderError=e.EthereumRpcError=e.ethErrors=e.errorCodes=void 0;const t=yr;Object.defineProperty(e,"EthereumRpcError",{enumerable:!0,get:function(){return t.EthereumRpcError}}),Object.defineProperty(e,"EthereumProviderError",{enumerable:!0,get:function(){return t.EthereumProviderError}});const r=Zf;Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return r.serializeError}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return r.getMessageFromCode}});const n=Xo;Object.defineProperty(e,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const i=pr;Object.defineProperty(e,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})})(lr);function zu(e,t,r){try{Reflect.apply(e,t,r)}catch(n){setTimeout(()=>{throw n})}}function fm(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}class Hh extends D0{emit(t){let r=t==="error";const n=this._events;if(n!==void 0)r=r&&n.error===void 0;else if(!r)return!1;for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];if(r){let f;if(o.length>0&&([f]=o),f instanceof Error)throw f;const l=new Error(`Unhandled error.${f?` (${f.message})`:""}`);throw l.context=f,l}const a=n[t];if(a===void 0)return!1;if(typeof a=="function")zu(a,this,o);else{const f=a.length,l=fm(a);for(let u=0;u<f;u+=1)zu(l[u],this,o)}return!0}}function lm(e){return async(t,r,n,i)=>{let o;const s=new Promise(u=>{o=u});let a=null,f=!1;const l=async()=>{f=!0,n(u=>{a=u,o()}),await s};try{await e(t,r,l),f?(await s,a(null)):i(null)}catch(u){a?a(u):i(u)}}}var ot={},Ni={},Yo={};const um=Jr(Vp);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.secp256k1=void 0;var t=um;Object.defineProperty(e,"secp256k1",{enumerable:!0,get:function(){return t.secp256k1}})})(Yo);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MAX_WITHDRAWALS_PER_PAYLOAD=e.RLP_EMPTY_STRING=e.KECCAK256_RLP=e.KECCAK256_RLP_S=e.KECCAK256_RLP_ARRAY=e.KECCAK256_RLP_ARRAY_S=e.KECCAK256_NULL=e.KECCAK256_NULL_S=e.TWO_POW256=e.SECP256K1_ORDER_DIV_2=e.SECP256K1_ORDER=e.MAX_INTEGER_BIGINT=e.MAX_INTEGER=e.MAX_UINT64=void 0;const t=Nr,r=Yo;e.MAX_UINT64=BigInt("0xffffffffffffffff"),e.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),e.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),e.SECP256K1_ORDER=r.secp256k1.CURVE.n,e.SECP256K1_ORDER_DIV_2=r.secp256k1.CURVE.n/BigInt(2),e.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),e.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",e.KECCAK256_NULL=t.Buffer.from(e.KECCAK256_NULL_S,"hex"),e.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",e.KECCAK256_RLP_ARRAY=t.Buffer.from(e.KECCAK256_RLP_ARRAY_S,"hex"),e.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",e.KECCAK256_RLP=t.Buffer.from(e.KECCAK256_RLP_S,"hex"),e.RLP_EMPTY_STRING=t.Buffer.from([128]),e.MAX_WITHDRAWALS_PER_PAYLOAD=16})(Ni);var Jo={};Object.defineProperty(Jo,"__esModule",{value:!0});Jo.GWEI_TO_WEI=void 0;Jo.GWEI_TO_WEI=BigInt(1e9);var Xf={},At={};Object.defineProperty(At,"__esModule",{value:!0});At.RLP=At.utils=At.decode=At.encode=void 0;function Yf(e){if(Array.isArray(e)){const r=[];let n=0;for(let i=0;i<e.length;i++){const o=Yf(e[i]);r.push(o),n+=o.length}return lf(Du(n,192),...r)}const t=Xh(e);return t.length===1&&t[0]<128?t:lf(Du(t.length,128),t)}At.encode=Yf;function an(e,t,r){if(r>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,r)}function $u(e){if(e[0]===0)throw new Error("invalid RLP: extra zeros");return Wh(Gh(e))}function Du(e,t){if(e<56)return Uint8Array.from([e+t]);const r=uf(e),n=r.length/2,i=uf(t+55+n);return Uint8Array.from(wo(i+r))}function qh(e,t=!1){if(typeof e>"u"||e===null||e.length===0)return Uint8Array.from([]);const r=Xh(e),n=ff(r);if(t)return n;if(n.remainder.length!==0)throw new Error("invalid RLP: remainder must be zero");return n.data}At.decode=qh;function ff(e){let t,r,n,i,o;const s=[],a=e[0];if(a<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(a<=183){if(t=a-127,a===128?n=Uint8Array.from([]):n=an(e,1,t),t===2&&n[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:n,remainder:e.slice(t)}}else if(a<=191){if(r=a-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=$u(an(e,1,r)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return n=an(e,r,t+r),{data:n,remainder:e.slice(t+r)}}else if(a<=247){for(t=a-191,i=an(e,1,t);i.length;)o=ff(i),s.push(o.data),i=o.remainder;return{data:s,remainder:e.slice(t)}}else{if(r=a-246,t=$u(an(e,1,r)),t<56)throw new Error("invalid RLP: encoded list too short");const f=r+t;if(f>e.length)throw new Error("invalid RLP: total length is larger than the data");for(i=an(e,r,f);i.length;)o=ff(i),s.push(o.data),i=o.remainder;return{data:s,remainder:e.slice(f)}}}const cm=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Gh(e){let t="";for(let r=0;r<e.length;r++)t+=cm[e[r]];return t}function Wh(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function wo(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=r*2;t[r]=Wh(e.slice(n,n+2))}return t}function lf(...e){if(e.length===1)return e[0];const t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const o=e[n];r.set(o,i),i+=o.length}return r}function Zh(e){return new TextEncoder().encode(e)}function uf(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function dm(e){return e.length%2?`0${e}`:e}function Kh(e){return e.length>=2&&e[0]==="0"&&e[1]==="x"}function hm(e){return typeof e!="string"?e:Kh(e)?e.slice(2):e}function Xh(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")return Kh(e)?wo(dm(hm(e))):Zh(e);if(typeof e=="number"||typeof e=="bigint")return e?wo(uf(e)):Uint8Array.from([]);if(e==null)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}At.utils={bytesToHex:Gh,concatBytes:lf,hexToBytes:wo,utf8ToBytes:Zh};At.RLP={encode:Yf,decode:qh};var ht={};const gm=Jr(vp);var mo={exports:{}},je={};Object.defineProperty(je,"__esModule",{value:!0});je.output=je.exists=je.hash=je.bytes=je.bool=je.number=void 0;function vo(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}je.number=vo;function Yh(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}je.bool=Yh;function Jf(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}je.bytes=Jf;function Jh(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");vo(e.outputLen),vo(e.blockLen)}je.hash=Jh;function Qh(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}je.exists=Qh;function eg(e,t){Jf(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}je.output=eg;const ym={number:vo,bool:Yh,bytes:Jf,hash:Jh,exists:Qh,output:eg};je.default=ym;const Mu=Jr(ty);mo.exports;(function(e,t){var r=Ze&&Ze.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=t.wrapHash=t.equalsBytes=t.hexToBytes=t.bytesToUtf8=t.utf8ToBytes=t.createView=t.concatBytes=t.toHex=t.bytesToHex=t.assertBytes=t.assertBool=void 0;const n=r(je),i=Mu,o=n.default.bool;t.assertBool=o;const s=n.default.bytes;t.assertBytes=s;var a=Mu;Object.defineProperty(t,"bytesToHex",{enumerable:!0,get:function(){return a.bytesToHex}}),Object.defineProperty(t,"toHex",{enumerable:!0,get:function(){return a.bytesToHex}}),Object.defineProperty(t,"concatBytes",{enumerable:!0,get:function(){return a.concatBytes}}),Object.defineProperty(t,"createView",{enumerable:!0,get:function(){return a.createView}}),Object.defineProperty(t,"utf8ToBytes",{enumerable:!0,get:function(){return a.utf8ToBytes}});function f(p){if(!(p instanceof Uint8Array))throw new TypeError(`bytesToUtf8 expected Uint8Array, got ${typeof p}`);return new TextDecoder().decode(p)}t.bytesToUtf8=f;function l(p){const g=p.startsWith("0x")?p.substring(2):p;return(0,i.hexToBytes)(g)}t.hexToBytes=l;function u(p,g){if(p.length!==g.length)return!1;for(let E=0;E<p.length;E++)if(p[E]!==g[E])return!1;return!0}t.equalsBytes=u;function b(p){return g=>(n.default.bytes(g),p(g))}t.wrapHash=b,t.crypto=(()=>{const p=typeof self=="object"&&"crypto"in self?self.crypto:void 0,g=typeof Ml=="function"&&Ml.bind(e);return{node:g&&!p?g("crypto"):void 0,web:p}})()})(mo,mo.exports);var tg=mo.exports;Object.defineProperty(ht,"__esModule",{value:!0});ht.keccak512=ht.keccak384=ht.keccak256=ht.keccak224=void 0;const hi=gm,Qo=tg;ht.keccak224=(0,Qo.wrapHash)(hi.keccak_224);ht.keccak256=(()=>{const e=(0,Qo.wrapHash)(hi.keccak_256);return e.create=hi.keccak_256.create,e})();ht.keccak384=(0,Qo.wrapHash)(hi.keccak_384);ht.keccak512=(0,Qo.wrapHash)(hi.keccak_512);var tn={},ft={},le={};Object.defineProperty(le,"__esModule",{value:!0});le.isHexString=le.getKeys=le.fromAscii=le.fromUtf8=le.toAscii=le.arrayContainsArray=le.getBinarySize=le.padToEven=le.stripHexPrefix=le.isHexPrefixed=void 0;function rg(e){if(typeof e!="string")throw new Error(`[isHexPrefixed] input must be type 'string', received type ${typeof e}`);return e[0]==="0"&&e[1]==="x"}le.isHexPrefixed=rg;const pm=e=>{if(typeof e!="string")throw new Error(`[stripHexPrefix] input must be type 'string', received ${typeof e}`);return rg(e)?e.slice(2):e};le.stripHexPrefix=pm;function ng(e){let t=e;if(typeof t!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof t}`);return t.length%2&&(t=`0${t}`),t}le.padToEven=ng;function _m(e){if(typeof e!="string")throw new Error(`[getBinarySize] method requires input type 'string', received ${typeof e}`);return q.byteLength(e,"utf8")}le.getBinarySize=_m;function bm(e,t,r){if(Array.isArray(e)!==!0)throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(Array.isArray(t)!==!0)throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[r===!0?"some":"every"](n=>e.indexOf(n)>=0)}le.arrayContainsArray=bm;function wm(e){let t="",r=0;const n=e.length;for(e.substring(0,2)==="0x"&&(r=2);r<n;r+=2){const i=parseInt(e.substr(r,2),16);t+=String.fromCharCode(i)}return t}le.toAscii=wm;function mm(e){const t=q.from(e,"utf8");return`0x${ng(t.toString("hex")).replace(/^0+|0+$/g,"")}`}le.fromUtf8=mm;function vm(e){let t="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r).toString(16);t+=i.length<2?`0${i}`:i}return`0x${t}`}le.fromAscii=vm;function Em(e,t,r){if(!Array.isArray(e))throw new Error(`[getKeys] method expects input 'params' to be an array, got ${typeof e}`);if(typeof t!="string")throw new Error(`[getKeys] method expects input 'key' to be type 'string', got ${typeof e}`);const n=[];for(let i=0;i<e.length;i++){let o=e[i][t];if(r===!0&&!o)o="";else if(typeof o!="string")throw new Error(`invalid abi - expected type 'string', received ${typeof o}`);n.push(o)}return n}le.getKeys=Em;function Tm(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||typeof t<"u"&&t>0&&e.length!==2+2*t)}le.isHexString=Tm;Object.defineProperty(ft,"__esModule",{value:!0});ft.assertIsString=ft.assertIsArray=ft.assertIsBuffer=ft.assertIsHexString=void 0;const Sm=le,Am=function(e){if(!(0,Sm.isHexString)(e)){const t=`This method only supports 0x-prefixed hex strings but input was: ${e}`;throw new Error(t)}};ft.assertIsHexString=Am;const Nm=function(e){if(!q.isBuffer(e)){const t=`This method only supports Buffer but input was: ${e}`;throw new Error(t)}};ft.assertIsBuffer=Nm;const Bm=function(e){if(!Array.isArray(e)){const t=`This method only supports number arrays but input was: ${e}`;throw new Error(t)}};ft.assertIsArray=Bm;const xm=function(e){if(typeof e!="string"){const t=`This method only supports strings but input was: ${e}`;throw new Error(t)}};ft.assertIsString=xm;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.intToUnpaddedBuffer=e.bigIntToUnpaddedBuffer=e.bigIntToHex=e.bufArrToArr=e.arrToBufArr=e.validateNoLeadingZeroes=e.baToJSON=e.toUtf8=e.short=e.addHexPrefix=e.toUnsigned=e.fromSigned=e.bufferToInt=e.bigIntToBuffer=e.bufferToBigInt=e.bufferToHex=e.toBuffer=e.unpadHexString=e.unpadArray=e.unpadBuffer=e.setLengthRight=e.setLengthLeft=e.zeros=e.intToBuffer=e.intToHex=void 0;const t=ft,r=le,n=function(_){if(!Number.isSafeInteger(_)||_<0)throw new Error(`Received an invalid integer type: ${_}`);return`0x${_.toString(16)}`};e.intToHex=n;const i=function(_){const h=(0,e.intToHex)(_);return q.from((0,r.padToEven)(h.slice(2)),"hex")};e.intToBuffer=i;const o=function(_){return q.allocUnsafe(_).fill(0)};e.zeros=o;const s=function(_,h,v){const I=(0,e.zeros)(h);return v?_.length<h?(_.copy(I),I):_.slice(0,h):_.length<h?(_.copy(I,h-_.length),I):_.slice(-h)},a=function(_,h){return(0,t.assertIsBuffer)(_),s(_,h,!1)};e.setLengthLeft=a;const f=function(_,h){return(0,t.assertIsBuffer)(_),s(_,h,!0)};e.setLengthRight=f;const l=function(_){let h=_[0];for(;_.length>0&&h.toString()==="0";)_=_.slice(1),h=_[0];return _},u=function(_){return(0,t.assertIsBuffer)(_),l(_)};e.unpadBuffer=u;const b=function(_){return(0,t.assertIsArray)(_),l(_)};e.unpadArray=b;const p=function(_){return(0,t.assertIsHexString)(_),_=(0,r.stripHexPrefix)(_),"0x"+l(_)};e.unpadHexString=p;const g=function(_){if(_==null)return q.allocUnsafe(0);if(q.isBuffer(_))return q.from(_);if(Array.isArray(_)||_ instanceof Uint8Array)return q.from(_);if(typeof _=="string"){if(!(0,r.isHexString)(_))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${_}`);return q.from((0,r.padToEven)((0,r.stripHexPrefix)(_)),"hex")}if(typeof _=="number")return(0,e.intToBuffer)(_);if(typeof _=="bigint"){if(_<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${_}`);let h=_.toString(16);return h.length%2&&(h="0"+h),q.from(h,"hex")}if(_.toArray)return q.from(_.toArray());if(_.toBuffer)return q.from(_.toBuffer());throw new Error("invalid type")};e.toBuffer=g;const E=function(_){return _=(0,e.toBuffer)(_),"0x"+_.toString("hex")};e.bufferToHex=E;function C(_){const h=(0,e.bufferToHex)(_);return BigInt(h==="0x"?0:h)}e.bufferToBigInt=C;function L(_){return(0,e.toBuffer)("0x"+_.toString(16))}e.bigIntToBuffer=L;const x=function(_){const h=Number(C(_));if(!Number.isSafeInteger(h))throw new Error("Number exceeds 53 bits");return h};e.bufferToInt=x;const w=function(_){return BigInt.asIntN(256,C(_))};e.fromSigned=w;const N=function(_){return L(BigInt.asUintN(256,_))};e.toUnsigned=N;const R=function(_){return typeof _!="string"||(0,r.isHexPrefixed)(_)?_:"0x"+_};e.addHexPrefix=R;function P(_,h=50){const v=q.isBuffer(_)?_.toString("hex"):_;return v.length<=h?v:v.slice(0,h)+""}e.short=P;const z=function(_){const h=/^(00)+|(00)+$/g;if(_=(0,r.stripHexPrefix)(_),_.length%2!==0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return q.from(_.replace(h,""),"hex").toString("utf8")};e.toUtf8=z;const k=function(_){if(q.isBuffer(_))return`0x${_.toString("hex")}`;if(_ instanceof Array){const h=[];for(let v=0;v<_.length;v++)h.push((0,e.baToJSON)(_[v]));return h}};e.baToJSON=k;const c=function(_){for(const[h,v]of Object.entries(_))if(v!==void 0&&v.length>0&&v[0]===0)throw new Error(`${h} cannot have leading zeroes, received: ${v.toString("hex")}`)};e.validateNoLeadingZeroes=c;function y(_){return Array.isArray(_)?_.map(h=>y(h)):q.from(_)}e.arrToBufArr=y;function d(_){return Array.isArray(_)?_.map(h=>d(h)):Uint8Array.from(_??[])}e.bufArrToArr=d;const S=_=>"0x"+_.toString(16);e.bigIntToHex=S;function m(_){return(0,e.unpadBuffer)(L(_))}e.bigIntToUnpaddedBuffer=m;function A(_){return(0,e.unpadBuffer)((0,e.intToBuffer)(_))}e.intToUnpaddedBuffer=A})(tn);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.accountBodyToRLP=e.accountBodyToSlim=e.accountBodyFromSlim=e.isZeroAddress=e.zeroAddress=e.importPublic=e.privateToAddress=e.privateToPublic=e.publicToAddress=e.pubToAddress=e.isValidPublic=e.isValidPrivate=e.generateAddress2=e.generateAddress=e.isValidChecksumAddress=e.toChecksumAddress=e.isValidAddress=e.Account=void 0;const t=At,r=ht,n=Yo,i=tg,o=tn,s=Ni,a=ft,f=le,l=BigInt(0);class u{constructor(A=l,_=l,h=s.KECCAK256_RLP,v=s.KECCAK256_NULL){this.nonce=A,this.balance=_,this.storageRoot=h,this.codeHash=v,this._validate()}static fromAccountData(A){const{nonce:_,balance:h,storageRoot:v,codeHash:I}=A;return new u(_!==void 0?(0,o.bufferToBigInt)((0,o.toBuffer)(_)):void 0,h!==void 0?(0,o.bufferToBigInt)((0,o.toBuffer)(h)):void 0,v!==void 0?(0,o.toBuffer)(v):void 0,I!==void 0?(0,o.toBuffer)(I):void 0)}static fromRlpSerializedAccount(A){const _=(0,o.arrToBufArr)(t.RLP.decode(Uint8Array.from(A)));if(!Array.isArray(_))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(_)}static fromValuesArray(A){const[_,h,v,I]=A;return new u((0,o.bufferToBigInt)(_),(0,o.bufferToBigInt)(h),v,I)}_validate(){if(this.nonce<l)throw new Error("nonce must be greater than zero");if(this.balance<l)throw new Error("balance must be greater than zero");if(this.storageRoot.length!==32)throw new Error("storageRoot must have a length of 32");if(this.codeHash.length!==32)throw new Error("codeHash must have a length of 32")}raw(){return[(0,o.bigIntToUnpaddedBuffer)(this.nonce),(0,o.bigIntToUnpaddedBuffer)(this.balance),this.storageRoot,this.codeHash]}serialize(){return q.from(t.RLP.encode((0,o.bufArrToArr)(this.raw())))}isContract(){return!this.codeHash.equals(s.KECCAK256_NULL)}isEmpty(){return this.balance===l&&this.nonce===l&&this.codeHash.equals(s.KECCAK256_NULL)}}e.Account=u;const b=function(m){try{(0,a.assertIsString)(m)}catch{return!1}return/^0x[0-9a-fA-F]{40}$/.test(m)};e.isValidAddress=b;const p=function(m,A){(0,a.assertIsHexString)(m);const _=(0,f.stripHexPrefix)(m).toLowerCase();let h="";A!==void 0&&(h=(0,o.bufferToBigInt)((0,o.toBuffer)(A)).toString()+"0x");const v=q.from(h+_,"utf8"),I=(0,i.bytesToHex)((0,r.keccak256)(v));let O="0x";for(let M=0;M<_.length;M++)parseInt(I[M],16)>=8?O+=_[M].toUpperCase():O+=_[M];return O};e.toChecksumAddress=p;const g=function(m,A){return(0,e.isValidAddress)(m)&&(0,e.toChecksumAddress)(m,A)===m};e.isValidChecksumAddress=g;const E=function(m,A){return(0,a.assertIsBuffer)(m),(0,a.assertIsBuffer)(A),(0,o.bufferToBigInt)(A)===BigInt(0)?q.from((0,r.keccak256)(t.RLP.encode((0,o.bufArrToArr)([m,null])))).slice(-20):q.from((0,r.keccak256)(t.RLP.encode((0,o.bufArrToArr)([m,A])))).slice(-20)};e.generateAddress=E;const C=function(m,A,_){if((0,a.assertIsBuffer)(m),(0,a.assertIsBuffer)(A),(0,a.assertIsBuffer)(_),m.length!==20)throw new Error("Expected from to be of length 20");if(A.length!==32)throw new Error("Expected salt to be of length 32");const h=(0,r.keccak256)(q.concat([q.from("ff","hex"),m,A,(0,r.keccak256)(_)]));return(0,o.toBuffer)(h).slice(-20)};e.generateAddress2=C;const L=function(m){return n.secp256k1.utils.isValidPrivateKey(m)};e.isValidPrivate=L;const x=function(m,A=!1){if((0,a.assertIsBuffer)(m),m.length===64)try{return n.secp256k1.ProjectivePoint.fromHex(q.concat([q.from([4]),m])),!0}catch{return!1}if(!A)return!1;try{return n.secp256k1.ProjectivePoint.fromHex(m),!0}catch{return!1}};e.isValidPublic=x;const w=function(m,A=!1){if((0,a.assertIsBuffer)(m),A&&m.length!==64&&(m=q.from(n.secp256k1.ProjectivePoint.fromHex(m).toRawBytes(!1).slice(1))),m.length!==64)throw new Error("Expected pubKey to be of length 64");return q.from((0,r.keccak256)(m)).slice(-20)};e.pubToAddress=w,e.publicToAddress=e.pubToAddress;const N=function(m){return(0,a.assertIsBuffer)(m),q.from(n.secp256k1.ProjectivePoint.fromPrivateKey(m).toRawBytes(!1).slice(1))};e.privateToPublic=N;const R=function(m){return(0,e.publicToAddress)((0,e.privateToPublic)(m))};e.privateToAddress=R;const P=function(m){return(0,a.assertIsBuffer)(m),m.length!==64&&(m=q.from(n.secp256k1.ProjectivePoint.fromHex(m).toRawBytes(!1).slice(1))),m};e.importPublic=P;const z=function(){const A=(0,o.zeros)(20);return(0,o.bufferToHex)(A)};e.zeroAddress=z;const k=function(m){try{(0,a.assertIsString)(m)}catch{return!1}return(0,e.zeroAddress)()===m};e.isZeroAddress=k;function c(m){const[A,_,h,v]=m;return[A,_,(0,o.arrToBufArr)(h).length===0?s.KECCAK256_RLP:h,(0,o.arrToBufArr)(v).length===0?s.KECCAK256_NULL:v]}e.accountBodyFromSlim=c;const y=new Uint8Array(0);function d(m){const[A,_,h,v]=m;return[A,_,(0,o.arrToBufArr)(h).equals(s.KECCAK256_RLP)?y:h,(0,o.arrToBufArr)(v).equals(s.KECCAK256_NULL)?y:v]}e.accountBodyToSlim=d;function S(m,A=!0){const _=A?c(m):m;return(0,o.arrToBufArr)(t.RLP.encode(_))}e.accountBodyToRLP=S})(Xf);var Bi={};Object.defineProperty(Bi,"__esModule",{value:!0});Bi.Address=void 0;const Gn=Xf,Hi=tn;class Ut{constructor(t){if(t.length!==20)throw new Error("Invalid address length");this.buf=t}static zero(){return new Ut((0,Hi.zeros)(20))}static fromString(t){if(!(0,Gn.isValidAddress)(t))throw new Error("Invalid address");return new Ut((0,Hi.toBuffer)(t))}static fromPublicKey(t){if(!q.isBuffer(t))throw new Error("Public key should be Buffer");const r=(0,Gn.pubToAddress)(t);return new Ut(r)}static fromPrivateKey(t){if(!q.isBuffer(t))throw new Error("Private key should be Buffer");const r=(0,Gn.privateToAddress)(t);return new Ut(r)}static generate(t,r){if(typeof r!="bigint")throw new Error("Expected nonce to be a bigint");return new Ut((0,Gn.generateAddress)(t.buf,(0,Hi.bigIntToBuffer)(r)))}static generate2(t,r,n){if(!q.isBuffer(r))throw new Error("Expected salt to be a Buffer");if(!q.isBuffer(n))throw new Error("Expected initCode to be a Buffer");return new Ut((0,Gn.generateAddress2)(t.buf,r,n))}equals(t){return this.buf.equals(t.buf)}isZero(){return this.equals(Ut.zero())}isPrecompileOrSystemAddress(){const t=(0,Hi.bufferToBigInt)(this.buf),r=BigInt(0),n=BigInt("0xffff");return t>=r&&t<=n}toString(){return"0x"+this.buf.toString("hex")}toBuffer(){return q.from(this.buf)}}Bi.Address=Ut;var es={},Qf={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.toType=e.TypeOutput=void 0;const t=tn,r=le;var n;(function(o){o[o.Number=0]="Number",o[o.BigInt=1]="BigInt",o[o.Buffer=2]="Buffer",o[o.PrefixedHexString=3]="PrefixedHexString"})(n=e.TypeOutput||(e.TypeOutput={}));function i(o,s){if(o===null)return null;if(o===void 0)return;if(typeof o=="string"&&!(0,r.isHexString)(o))throw new Error(`A string must be provided with a 0x-prefix, given: ${o}`);if(typeof o=="number"&&!Number.isSafeInteger(o))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const a=(0,t.toBuffer)(o);switch(s){case n.Buffer:return a;case n.BigInt:return(0,t.bufferToBigInt)(a);case n.Number:{const f=(0,t.bufferToBigInt)(a);if(f>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(f)}case n.PrefixedHexString:return(0,t.bufferToHex)(a);default:throw new Error("unknown outputType")}}e.toType=i})(Qf);Object.defineProperty(es,"__esModule",{value:!0});es.Withdrawal=void 0;const Uu=Bi,ra=tn,we=Qf;class ni{constructor(t,r,n,i){this.index=t,this.validatorIndex=r,this.address=n,this.amount=i}static fromWithdrawalData(t){const{index:r,validatorIndex:n,address:i,amount:o}=t,s=(0,we.toType)(r,we.TypeOutput.BigInt),a=(0,we.toType)(n,we.TypeOutput.BigInt),f=new Uu.Address((0,we.toType)(i,we.TypeOutput.Buffer)),l=(0,we.toType)(o,we.TypeOutput.BigInt);return new ni(s,a,f,l)}static fromValuesArray(t){if(t.length!==4)throw Error(`Invalid withdrawalArray length expected=4 actual=${t.length}`);const[r,n,i,o]=t;return ni.fromWithdrawalData({index:r,validatorIndex:n,address:i,amount:o})}static toBufferArray(t){const{index:r,validatorIndex:n,address:i,amount:o}=t,s=(0,we.toType)(r,we.TypeOutput.BigInt)===BigInt(0)?q.alloc(0):(0,we.toType)(r,we.TypeOutput.Buffer),a=(0,we.toType)(n,we.TypeOutput.BigInt)===BigInt(0)?q.alloc(0):(0,we.toType)(n,we.TypeOutput.Buffer);let f;i instanceof Uu.Address?f=i.buf:f=(0,we.toType)(i,we.TypeOutput.Buffer);const l=(0,we.toType)(o,we.TypeOutput.BigInt)===BigInt(0)?q.alloc(0):(0,we.toType)(o,we.TypeOutput.Buffer);return[s,a,f,l]}raw(){return ni.toBufferArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.buf,amount:this.amount}}toJSON(){return{index:(0,ra.bigIntToHex)(this.index),validatorIndex:(0,ra.bigIntToHex)(this.validatorIndex),address:"0x"+this.address.buf.toString("hex"),amount:(0,ra.bigIntToHex)(this.amount)}}}es.Withdrawal=ni;var $e={};Object.defineProperty($e,"__esModule",{value:!0});$e.hashPersonalMessage=$e.isValidSignature=$e.fromRpcSig=$e.toCompactSig=$e.toRpcSig=$e.ecrecover=$e.ecsign=void 0;const Rm=ht,ig=Yo,Ke=tn,na=Ni,Im=ft;function Om(e,t,r){const n=ig.secp256k1.sign(e,t),i=n.toCompactRawBytes(),o=q.from(i.slice(0,32)),s=q.from(i.slice(32,64)),a=r===void 0?BigInt(n.recovery+27):BigInt(n.recovery+35)+BigInt(r)*BigInt(2);return{r:o,s,v:a}}$e.ecsign=Om;function ts(e,t){return e===BigInt(0)||e===BigInt(1)?e:t===void 0?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}function rs(e){return e===BigInt(0)||e===BigInt(1)}const Cm=function(e,t,r,n,i){const o=q.concat([(0,Ke.setLengthLeft)(r,32),(0,Ke.setLengthLeft)(n,32)],64),s=ts(t,i);if(!rs(s))throw new Error("Invalid signature v value");const f=ig.secp256k1.Signature.fromCompact(o).addRecoveryBit(Number(s)).recoverPublicKey(e);return q.from(f.toRawBytes(!1).slice(1))};$e.ecrecover=Cm;const Lm=function(e,t,r,n){const i=ts(e,n);if(!rs(i))throw new Error("Invalid signature v value");return(0,Ke.bufferToHex)(q.concat([(0,Ke.setLengthLeft)(t,32),(0,Ke.setLengthLeft)(r,32),(0,Ke.toBuffer)(e)]))};$e.toRpcSig=Lm;const Pm=function(e,t,r,n){const i=ts(e,n);if(!rs(i))throw new Error("Invalid signature v value");let o=r;return(e>BigInt(28)&&e%BigInt(2)===BigInt(1)||e===BigInt(1)||e===BigInt(28))&&(o=q.from(r),o[0]|=128),(0,Ke.bufferToHex)(q.concat([(0,Ke.setLengthLeft)(t,32),(0,Ke.setLengthLeft)(o,32)]))};$e.toCompactSig=Pm;const km=function(e){const t=(0,Ke.toBuffer)(e);let r,n,i;if(t.length>=65)r=t.slice(0,32),n=t.slice(32,64),i=(0,Ke.bufferToBigInt)(t.slice(64));else if(t.length===64)r=t.slice(0,32),n=t.slice(32,64),i=BigInt((0,Ke.bufferToInt)(t.slice(32,33))>>7),n[0]&=127;else throw new Error("Invalid signature length");return i<27&&(i=i+BigInt(27)),{v:i,r,s:n}};$e.fromRpcSig=km;const zm=function(e,t,r,n=!0,i){if(t.length!==32||r.length!==32||!rs(ts(e,i)))return!1;const o=(0,Ke.bufferToBigInt)(t),s=(0,Ke.bufferToBigInt)(r);return!(o===BigInt(0)||o>=na.SECP256K1_ORDER||s===BigInt(0)||s>=na.SECP256K1_ORDER||n&&s>=na.SECP256K1_ORDER_DIV_2)};$e.isValidSignature=zm;const $m=function(e){(0,Im.assertIsBuffer)(e);const t=q.from(`Ethereum Signed Message:
${e.length}`,"utf-8");return q.from((0,Rm.keccak256)(q.concat([t,e])))};$e.hashPersonalMessage=$m;var og={},sg={},ns={},fe={},oe={};Object.defineProperty(oe,"__esModule",{value:!0});oe.gindexChild=oe.gindexParent=oe.gindexSibling=oe.concatGindices=oe.getGindexBits=oe.gindexIterator=oe.getGindicesAtDepth=oe.iterateAtDepth=oe.countToDepth=oe.convertGindexToBitstring=oe.toGindexBitstring=oe.toGindex=oe.bitIndexBigInt=void 0;function Dm(e){return e.toString(2).length-1}oe.bitIndexBigInt=Dm;function el(e,t){const r=BigInt(1)<<BigInt(e);if(t>=r)throw new Error(`index ${t} too large for depth ${e}`);return r|t}oe.toGindex=el;function Mm(e,t){const r=t?Number(t).toString(2):"";if(r.length>e)throw new Error("index too large for depth");return"1"+r.padStart(e,"0")}oe.toGindexBitstring=Mm;function Um(e){if(typeof e=="string"){if(e.length===0)throw new Error(An);return e}else{if(e<1)throw new Error(An);return e.toString(2)}}oe.convertGindexToBitstring=Um;function Vm(e){return e<=1?0:(e-BigInt(1)).toString(2).length}oe.countToDepth=Vm;function jm(e,t,r){const n=BigInt(1)<<BigInt(e);if(t+r>n)throw new Error("Too large for depth");let i=el(e,t);const o=i+r;return{[Symbol.iterator](){return{next(){if(i<o){const s=i;return i++,{done:!1,value:s}}else return{done:!0,value:void 0}}}}}}oe.iterateAtDepth=jm;function Fm(e,t,r){const n=BigInt(1)<<BigInt(e);if(t+r>n)throw new Error("Too large for depth");let i=el(e,BigInt(t));const o=[];for(let s=0;s<r;s++)o.push(i++);return o}oe.getGindicesAtDepth=Fm;const An="Invalid gindex";function Hm(e){let t;if(typeof e=="string"){if(!e.length)throw new Error(An);t=e}else{if(e<1)throw new Error(An);t=e.toString(2)}let r=1;const n=()=>{if(r===t.length)return{done:!0,value:void 0};const i=Number(t[r]);return r++,{done:!1,value:i}};return{[Symbol.iterator](){return{next:n}},remainingBitLength(){return t.length-r}}}oe.gindexIterator=Hm;function qm(e){let t;if(typeof e=="string"){if(!e.length)throw new Error(An);t=e}else{if(e<1)throw new Error(An);t=e.toString(2)}const r=[];for(let n=1;n<t.length;n++)r.push(Number(t[n]));return r}oe.getGindexBits=qm;function Gm(e){return BigInt(e.reduce((t,r)=>t+r.toString(2).slice(1),"0b1"))}oe.concatGindices=Gm;function Wm(e){return e^BigInt(1)}oe.gindexSibling=Wm;function Zm(e){return e/BigInt(2)}oe.gindexParent=Zm;function Km(e,t){return e*BigInt(2)+BigInt(t)}oe.gindexChild=Km;var xi={},is={};const Xm=Jr(np);var Wr={},Nn={};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.byteArrayToHashObject=Nn.hashObjectToByteArray=void 0;function Ym(e,t,r){let n=e.h0;t[0+r]=n&255,n=n>>8,t[1+r]=n&255,n=n>>8,t[2+r]=n&255,n=n>>8,t[3+r]=n&255,n=e.h1,t[4+r]=n&255,n=n>>8,t[5+r]=n&255,n=n>>8,t[6+r]=n&255,n=n>>8,t[7+r]=n&255,n=e.h2,t[8+r]=n&255,n=n>>8,t[9+r]=n&255,n=n>>8,t[10+r]=n&255,n=n>>8,t[11+r]=n&255,n=e.h3,t[12+r]=n&255,n=n>>8,t[13+r]=n&255,n=n>>8,t[14+r]=n&255,n=n>>8,t[15+r]=n&255,n=e.h4,t[16+r]=n&255,n=n>>8,t[17+r]=n&255,n=n>>8,t[18+r]=n&255,n=n>>8,t[19+r]=n&255,n=e.h5,t[20+r]=n&255,n=n>>8,t[21+r]=n&255,n=n>>8,t[22+r]=n&255,n=n>>8,t[23+r]=n&255,n=e.h6,t[24+r]=n&255,n=n>>8,t[25+r]=n&255,n=n>>8,t[26+r]=n&255,n=n>>8,t[27+r]=n&255,n=e.h7,t[28+r]=n&255,n=n>>8,t[29+r]=n&255,n=n>>8,t[30+r]=n&255,n=n>>8,t[31+r]=n&255}Nn.hashObjectToByteArray=Ym;function Jm(e){let t=0;t|=e[3]&255,t=t<<8,t|=e[2]&255,t=t<<8,t|=e[1]&255,t=t<<8,t|=e[0]&255;const r=t;t=0,t|=e[7]&255,t=t<<8,t|=e[6]&255,t=t<<8,t|=e[5]&255,t=t<<8,t|=e[4]&255;const n=t;t=0,t|=e[11]&255,t=t<<8,t|=e[10]&255,t=t<<8,t|=e[9]&255,t=t<<8,t|=e[8]&255;const i=t;t=0,t|=e[15]&255,t=t<<8,t|=e[14]&255,t=t<<8,t|=e[13]&255,t=t<<8,t|=e[12]&255;const o=t;t=0,t|=e[19]&255,t=t<<8,t|=e[18]&255,t=t<<8,t|=e[17]&255,t=t<<8,t|=e[16]&255;const s=t;t=0,t|=e[23]&255,t=t<<8,t|=e[22]&255,t=t<<8,t|=e[21]&255,t=t<<8,t|=e[20]&255;const a=t;t=0,t|=e[27]&255,t=t<<8,t|=e[26]&255,t=t<<8,t|=e[25]&255,t=t<<8,t|=e[24]&255;const f=t;return t=0,t|=e[31]&255,t=t<<8,t|=e[30]&255,t=t<<8,t|=e[29]&255,t=t<<8,t|=e[28]&255,{h0:r,h1:n,h2:i,h3:o,h4:s,h5:a,h6:f,h7:t}}Nn.byteArrayToHashObject=Jm;Object.defineProperty(Wr,"__esModule",{value:!0});Wr.uint8ArrayToHashObject=Wr.hashObjectToUint8Array=void 0;const ag=Nn;function Qm(e){const t=new Uint8Array(32);return ag.hashObjectToByteArray(e,t,0),t}Wr.hashObjectToUint8Array=Qm;function e1(e){return ag.byteArrayToHashObject(e)}Wr.uint8ArrayToHashObject=e1;Object.defineProperty(is,"__esModule",{value:!0});is.hasher=void 0;const t1=Xm,ia=Wr,Vu=(e,t)=>t1.sha256.create().update(e).update(t).digest();is.hasher={digest64:Vu,digest64HashObjects:(e,t)=>ia.uint8ArrayToHashObject(Vu(ia.hashObjectToUint8Array(e),ia.hashObjectToUint8Array(t)))};var fg={};Object.defineProperty(fg,"__esModule",{value:!0});(function(e){var t=Ze&&Ze.__createBinding||(Object.create?function(o,s,a,f){f===void 0&&(f=a),Object.defineProperty(o,f,{enumerable:!0,get:function(){return s[a]}})}:function(o,s,a,f){f===void 0&&(f=a),o[f]=s[a]}),r=Ze&&Ze.__exportStar||function(o,s){for(var a in o)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,o,a)};Object.defineProperty(e,"__esModule",{value:!0}),e.setHasher=e.hasher=void 0;const n=is;r(fg,e),r(Wr,e),e.hasher=n.hasher;function i(o){e.hasher=o}e.setHasher=i})(xi);var ue={};Object.defineProperty(ue,"__esModule",{value:!0});ue.bitwiseOrNodeH=ue.setNodeH=ue.getNodeH=ue.compose=ue.identity=ue.LeafNode=ue.BranchNode=ue.Node=void 0;const Eo=xi,ju=2**32;class tl{constructor(t,r,n,i,o,s,a,f){this.h0=t,this.h1=r,this.h2=n,this.h3=i,this.h4=o,this.h5=s,this.h6=a,this.h7=f}applyHash(t){this.h0=t.h0,this.h1=t.h1,this.h2=t.h2,this.h3=t.h3,this.h4=t.h4,this.h5=t.h5,this.h6=t.h6,this.h7=t.h7}}ue.Node=tl;class r1 extends tl{constructor(t,r){if(super(null,0,0,0,0,0,0,0),this._left=t,this._right=r,!t)throw new Error("Left node is undefined");if(!r)throw new Error("Right node is undefined")}get rootHashObject(){return this.h0===null&&super.applyHash(Eo.hasher.digest64HashObjects(this.left.rootHashObject,this.right.rootHashObject)),this}get root(){return Eo.hashObjectToUint8Array(this.rootHashObject)}isLeaf(){return!1}get left(){return this._left}get right(){return this._right}}ue.BranchNode=r1;class yn extends tl{static fromRoot(t){return this.fromHashObject(Eo.uint8ArrayToHashObject(t))}static fromHashObject(t){return new yn(t.h0,t.h1,t.h2,t.h3,t.h4,t.h5,t.h6,t.h7)}static fromZero(){return new yn(0,0,0,0,0,0,0,0)}static fromUint32(t){return new yn(t,0,0,0,0,0,0,0)}clone(){return yn.fromHashObject(this)}get rootHashObject(){return this}get root(){return Eo.hashObjectToUint8Array(this)}isLeaf(){return!0}get left(){throw Error("LeafNode has no left node")}get right(){throw Error("LeafNode has no right node")}writeToBytes(t,r,n){t.set(this.root.slice(0,n),r)}getUint(t,r,n){const i=Math.floor(r/4);if(t<4){const o=r%4*8,s=mt(this,i);return t===1?255&s>>o:65535&s>>o}else{if(t===4)return mt(this,i)>>>0;if(t===8){const o=mt(this,i),s=mt(this,i+1);return s===0?o>>>0:s===-1&&o===-1&&n?1/0:(o>>>0)+(s>>>0)*ju}else throw Error("uintBytes > 8")}}getUintBigint(t,r){const n=Math.floor(r/4);if(t<4){const i=r%4*8,o=mt(this,n);return BigInt(t===1?255&o>>i:65535&o>>i)}else{if(t===4)return BigInt(mt(this,n)>>>0);{const i=Math.ceil(t/4);let o=BigInt(0);for(let s=0;s<i;s++)o+=BigInt(mt(this,n+s)>>>0)<<BigInt(32*s);return o}}}setUint(t,r,n,i){const o=Math.floor(r/4);if(t<4){const s=r%4*8;let a=mt(this,o);t===1?(a&=~(255<<s),a|=n<<s):(a&=~(65535<<s),a|=n<<s),vt(this,o,a)}else if(t===4)vt(this,o,n);else if(t===8)n===1/0&&i?(vt(this,o,-1),vt(this,o+1,-1)):(vt(this,o,n&4294967295),vt(this,o+1,n/ju&4294967295));else throw Error("uintBytes > 8")}setUintBigint(t,r,n){const i=Math.floor(r/4);if(t<4){const o=Number(n),s=r%4*8;let a=mt(this,i);t===1?(a&=~(255<<s),a|=o<<s):(a&=~(65535<<s),a|=o<<s),vt(this,i,a)}else if(t===4)vt(this,i,Number(n));else{const o=i+Math.ceil(t/4);for(let s=i;s<o;s++)vt(this,s,Number(n&BigInt(4294967295))),n=n>>BigInt(32)}}bitwiseOrUint(t,r,n){const i=Math.floor(r/4);if(t<4){const o=r%4*8;io(this,i,n<<o)}else if(t===4)io(this,i,n);else{const o=i+Math.ceil(t/4);for(let s=i;s<o;s++)io(this,s,n&4294967295),n>>=32}}}ue.LeafNode=yn;function n1(e){return e}ue.identity=n1;function i1(e,t){return function(r){return t(e(r))}}ue.compose=i1;function mt(e,t){if(t===0)return e.h0;if(t===1)return e.h1;if(t===2)return e.h2;if(t===3)return e.h3;if(t===4)return e.h4;if(t===5)return e.h5;if(t===6)return e.h6;if(t===7)return e.h7;throw Error("hIndex > 7")}ue.getNodeH=mt;function vt(e,t,r){if(t===0)e.h0=r;else if(t===1)e.h1=r;else if(t===2)e.h2=r;else if(t===3)e.h3=r;else if(t===4)e.h4=r;else if(t===5)e.h5=r;else if(t===6)e.h6=r;else if(t===7)e.h7=r;else throw Error("hIndex > 7")}ue.setNodeH=vt;function io(e,t,r){if(t===0)e.h0|=r;else if(t===1)e.h1|=r;else if(t===2)e.h2|=r;else if(t===3)e.h3|=r;else if(t===4)e.h4|=r;else if(t===5)e.h5|=r;else if(t===6)e.h6|=r;else if(t===7)e.h7|=r;else throw Error("hIndex > 7")}ue.bitwiseOrNodeH=io;var ur={},Ft={},Ln={};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.zeroNode=void 0;const lg=ue,fn=[lg.LeafNode.fromZero()];function o1(e){if(e>=fn.length)for(let t=fn.length;t<=e;t++)fn[t]=new lg.BranchNode(fn[t-1],fn[t-1]);return fn[e]}Ln.zeroNode=o1;Object.defineProperty(Ft,"__esModule",{value:!0});Ft.subtreeFillToContents=Ft.subtreeFillToLength=Ft.subtreeFillToDepth=void 0;const or=ue,ii=Ln;function cf(e,t){let r=e;for(;t>0;)r=new or.BranchNode(r,r),t--;return r}Ft.subtreeFillToDepth=cf;function df(e,t,r){const n=1<<t;if(r>n)throw new Error("ERR_TOO_MANY_NODES");if(r===n)return cf(e,t);if(t===0){if(r===1)return e;throw new Error("ERR_NAVIGATION")}if(t===1)return new or.BranchNode(e,r>1?e:ii.zeroNode(0));const i=n>>1;return r<=i?new or.BranchNode(df(e,t-1,r),ii.zeroNode(t-1)):new or.BranchNode(cf(e,t-1),df(e,t-1,r-i))}Ft.subtreeFillToLength=df;function s1(e,t){const r=2**t;if(e.length>r)throw new Error(`nodes.length ${e.length} over maxIndex at depth ${t}`);if(e.length===0)return ii.zeroNode(t);if(t===0)return e[0];if(t===1)return e.length>1?new or.BranchNode(e[0],e[1]):new or.BranchNode(e[0],ii.zeroNode(0));let n=e.length;for(let i=t;i>0;i--){const o=n%2,s=n-o;for(let a=0;a<s;a+=2)e[a/2]=new or.BranchNode(e[a],e[a+1]);o>0&&(e[s/2]=new or.BranchNode(e[s],ii.zeroNode(t-i))),n=s/2+o}return e[0]}Ft.subtreeFillToContents=s1;Object.defineProperty(ur,"__esModule",{value:!0});ur.packedNodeRootsToBytes=ur.packedRootsBytesToLeafNodes=ur.packedRootsBytesToNode=void 0;const a1=Ft,pn=ue;function f1(e,t,r,n){const i=ug(t,r,n);return a1.subtreeFillToContents(i,e)}ur.packedRootsBytesToNode=f1;function ug(e,t,r){const n=r-t,i=Math.floor(n/32),o=new Array(Math.ceil(n/32));for(let a=0;a<i;a++){const f=t+a*32;o[a]=new pn.LeafNode(e.getInt32(f+0,!0),e.getInt32(f+4,!0),e.getInt32(f+8,!0),e.getInt32(f+12,!0),e.getInt32(f+16,!0),e.getInt32(f+20,!0),e.getInt32(f+24,!0),e.getInt32(f+28,!0))}const s=n%32;if(s>0){const a=new pn.LeafNode(0,0,0,0,0,0,0,0);o[i]=a;const f=Math.floor(s/4);for(let u=0;u<f;u++)pn.setNodeH(a,u,e.getInt32(t+i*32+u*4,!0));const l=n%4;if(l>0){let u=0;for(let b=0;b<l;b++)u|=e.getUint8(t+n-l+b)<<b*8;pn.setNodeH(a,f,u)}}return o}ur.packedRootsBytesToLeafNodes=ug;function l1(e,t,r,n){const i=r%32,o=Math.floor(r/32);for(let s=0;s<o;s++){const a=n[s],f=t+s*32;e.setInt32(f+0,a.h0,!0),e.setInt32(f+4,a.h1,!0),e.setInt32(f+8,a.h2,!0),e.setInt32(f+12,a.h3,!0),e.setInt32(f+16,a.h4,!0),e.setInt32(f+20,a.h5,!0),e.setInt32(f+24,a.h6,!0),e.setInt32(f+28,a.h7,!0)}if(i>0){const s=n[o],a=Math.floor(i/4);for(let l=0;l<a;l++)e.setInt32(t+o*32+l*4,pn.getNodeH(s,l),!0);const f=r%4;if(f>0){const l=pn.getNodeH(s,a);for(let u=0;u<f;u++)e.setUint8(t+r-f+u,l>>u*8&255)}}}ur.packedNodeRootsToBytes=l1;var oa={},Lr={},ye={},rl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createNodeFromSingleProof=e.createSingleProof=e.ERR_INVALID_NAV=void 0;const t=ue,r=oe;e.ERR_INVALID_NAV="Invalid tree navigation";function n(o,s){const a=[];let f=o;for(const l of r.gindexIterator(s))if(l){if(f.isLeaf())throw new Error(e.ERR_INVALID_NAV);a.push(f.left.root),f=f.right}else{if(f.isLeaf())throw new Error(e.ERR_INVALID_NAV);a.push(f.right.root),f=f.left}return[f.root,a.reverse()]}e.createSingleProof=n;function i(o,s,a){let f=t.LeafNode.fromRoot(s);const l=a.slice().reverse();for(;o>1;){const u=t.LeafNode.fromRoot(l.pop());o%BigInt(2)===BigInt(0)?f=new t.BranchNode(f,u):f=new t.BranchNode(u,f),o=o/BigInt(2)}return f}e.createNodeFromSingleProof=i})(rl);var Fu;function cg(){if(Fu)return ye;Fu=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.treeZeroAfterIndex=ye.iterateNodesAtDepth=ye.getNodesAtDepth=ye.setNodesAtDepth=ye.setNodeAtDepth=ye.getNodeAtDepth=ye.setNodeWithFn=ye.setNode=ye.getNode=ye.Tree=void 0;const e=Ln,t=oe,r=ue,n=dg(),i=rl;class o{constructor(R,P){this._rootNode=R,P&&(typeof WeakRef>"u"?this.hook=P:this.hook=new WeakRef(P))}static createFromProof(R){return new o(n.createNodeFromProof(R))}get rootNode(){return this._rootNode}set rootNode(R){if(this._rootNode=R,this.hook)if(typeof WeakRef>"u")this.hook(R);else{const P=this.hook.deref();P?P(R):this.hook=void 0}}get root(){return this.rootNode.root}clone(){return new o(this.rootNode)}getSubtree(R){return new o(this.getNode(R),P=>this.setNode(R,P))}getNode(R){return s(this.rootNode,R)}getNodeAtDepth(R,P){return b(this.rootNode,R,P)}getRoot(R){return this.getNode(R).root}setNode(R,P){this.rootNode=a(this.rootNode,R,P)}setNodeWithFn(R,P){this.rootNode=f(this.rootNode,R,P)}setNodeAtDepth(R,P,z){this.rootNode=p(this.rootNode,R,P,z)}setRoot(R,P){this.setNode(R,r.LeafNode.fromRoot(P))}getNodesAtDepth(R,P,z){return E(this.rootNode,R,P,z)}iterateNodesAtDepth(R,P,z){return C(this.rootNode,R,P,z)}getSingleProof(R){return i.createSingleProof(this.rootNode,R)[1]}getProof(R){return n.createProof(this.rootNode,R)}}ye.Tree=o;function s(N,R){const P=t.convertGindexToBitstring(R);let z=N;for(let k=1;k<P.length;k++){if(z.isLeaf())throw new Error(`Invalid tree - found leaf at depth ${k}`);z=P[k]==="1"?z.right:z.left}return z}ye.getNode=s;function a(N,R,P){const z=t.convertGindexToBitstring(R),k=l(N,z);return u(z,k,P)}ye.setNode=a;function f(N,R,P){const z=t.convertGindexToBitstring(R),k=l(N,z),c=k[k.length-1],d=z[z.length-1]==="1"?c.right:c.left,S=P(d);return u(z,k,S)}ye.setNodeWithFn=f;function l(N,R){let P=N;const z=[N];for(let k=1;k<R.length-1;k++)R[k]==="1"?P=P.right:P=P.left,z.push(P);return z}function u(N,R,P){let z=P;for(let k=N.length-1;k>=1;k--)N[k]==="1"?z=new r.BranchNode(R[k-1].left,z):z=new r.BranchNode(z,R[k-1].right);return z}function b(N,R,P){if(R===0)return N;if(R===1)return P===0?N.left:N.right;const z=R-1,k=0;let c=N;for(let y=z;y>=k;y--)c=x(y,P)?c.left:c.right;return c}ye.getNodeAtDepth=b;function p(N,R,P,z){return g(N,R,[P],[z])}ye.setNodeAtDepth=p;function g(N,R,P,z){if(R===0)return z.length>0?z[0]:N;const k=new Array(R),c=new Array(R),y=R-1,d=0;let S=y,m=N;k[y]=N;for(let A=0;A<P.length;A++){const _=P[A];for(let O=S;O>d;O--)m=x(O,_)?m.left:m.right,k[O-1]=m;S=d,(_&1)!==1?_+1===P[A+1]?(m=new r.BranchNode(z[A],z[A+1]),A++):m=new r.BranchNode(z[A],m.right):m=new r.BranchNode(m.left,z[A]);const v=A>=P.length-1,I=v?y:w(_,P[A+1]);for(let O=d+1;O<=I;O++)if(x(O,_))v||O!==I?m=new r.BranchNode(m,k[O].right):(c[O]=m,m=k[O]);else{const M=c[O];M!==void 0?(m=new r.BranchNode(M,m),c[O]=void 0):m=new r.BranchNode(k[O].left,m)}S=I}return m}ye.setNodesAtDepth=g;function E(N,R,P,z){if(R===0)return P===0&&z>0?[N]:[];if(R===1)return z===0?[]:z===1?P===0?[N.left]:[N.right]:[N.left,N.right];const k=R-1,c=0;let y=k,d=N;const S=new Array(R),m=new Array(R),A=new Array(z);S[k]=N;for(let _=0;_<z;_++){for(let h=y;h>=c;h--){h!==y&&(S[h]=d);const v=x(h,P+_);m[h]=v,d=v?d.left:d.right}A[_]=d;for(let h=c;h<=k;h++)if(m[h]===!0){y=h;break}d=S[y]}return A}ye.getNodesAtDepth=E;function*C(N,R,P,z){const k=P+z,c=R-1,y=0;let d=c,S=N;const m=new Array(R),A=new Array(R);m[c]=N;for(let _=P;_<k;_++){for(let h=d;h>=y;h--){h!==d&&(m[h]=S);const v=x(h,_);A[h]=v,S=v?S.left:S.right}yield S;for(let h=y;h<=c;h++)if(A[h]===!0){d=h;break}S=m[d]}}ye.iterateNodesAtDepth=C;function L(N,R,P){if(P<0)return e.zeroNode(R);const z=new Array(R),k=R-1,c=0;let y=k,d=N;z[k]=N;for(let S=y;S>=c;S--)d=x(S,P)?d.left:d.right,z[S-1]=d;y=c;for(let S=c;S<=k;S++)x(S,P)?d=new r.BranchNode(d,e.zeroNode(S)):d=new r.BranchNode(z[S].left,d);return d}ye.treeZeroAfterIndex=L;function x(N,R){if(N>31){const z=R/4294967296>>>0,k=1<<N-32;return(z&k)!==k}const P=1<<N;return(R&P)!==P}function w(N,R){return Math.ceil(Math.log2(-~(N^R)))-1}return ye}var os={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.computeMultiProofBitstrings=e.SortOrder=e.filterParentBitstrings=e.sortDecreasingBitstrings=e.sortInOrderBitstrings=e.computeProofBitstrings=e.computeProofGindices=void 0;const t=oe;function r(l){const u=new Set,b=new Set;let p=l;for(;p>1;)u.add(p),b.add(t.gindexSibling(p)),p=t.gindexParent(p);return{path:u,branch:b}}e.computeProofGindices=r;function n(l){const u=new Set,b=new Set;let p=l;for(;p.length>1;){u.add(p);const g=p[p.length-1],E=p.substring(0,p.length-1);b.add(E+(Number(g)^1)),p=E}return{path:u,branch:b}}e.computeProofBitstrings=n;function i(l,u){return l.length?l.map(b=>b.padEnd(u)).sort().map(b=>b.trim()):[]}e.sortInOrderBitstrings=i;function o(l){return l.length?l.sort((u,b)=>{if(u.length<b.length)return 1;if(b.length<u.length)return-1;let p=u.indexOf("0"),g=b.indexOf("0");for(;;){if(p===-1)return-1;if(g===-1||p<g)return 1;if(g<p)return-1;p=u.indexOf("0",p+1),g=b.indexOf("0",g+1)}}):[]}e.sortDecreasingBitstrings=o;function s(l){const u=l.slice().sort((p,g)=>p.length-g.length),b=[];e:for(let p=0;p<u.length;p++){const g=u[p];for(let E=p+1;E<u.length;E++)if(u[E].startsWith(g))continue e;b.push(g)}return b}e.filterParentBitstrings=s;var a;(function(l){l[l.InOrder=0]="InOrder",l[l.Decreasing=1]="Decreasing",l[l.Unsorted=2]="Unsorted"})(a=e.SortOrder||(e.SortOrder={}));function f(l,u=!0,b=a.InOrder){const p=s(l),g=new Set(u?p:[]),E=new Set,C=new Set;let L=1;for(const x of p){x.length>L&&(L=x.length);const{path:w,branch:N}=n(x);w.forEach(R=>E.add(R)),N.forEach(R=>C.add(R))}switch(E.forEach(x=>C.delete(x)),C.forEach(x=>g.add(x)),b){case a.InOrder:return i(Array.from(g),L);case a.Decreasing:return o(Array.from(g));case a.Unsorted:return Array.from(g)}}e.computeMultiProofBitstrings=f})(os);var Hu;function u1(){if(Hu)return Lr;Hu=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.createNodeFromMultiProof=Lr.createMultiProof=void 0;const e=ue,t=cg(),r=os;function n(o,s){const a=new t.Tree(o),f=r.computeMultiProofBitstrings(s.map(p=>p.toString(2)),!1,r.SortOrder.Decreasing),l=s.slice().sort((p,g)=>p<g?1:-1),u=l.map(p=>a.getRoot(p)),b=f.map(p=>a.getRoot(p));return[u,b,l]}Lr.createMultiProof=n;function i(o,s,a){if(o.length!==a.length)throw new Error("Leaves length should equal gindices length");const f=a.map(g=>g.toString(2)),l=r.computeMultiProofBitstrings(f,!1,r.SortOrder.Decreasing);if(l.length!==s.length)throw new Error("Witnesses length should equal witnesses gindices length");const u=Math.max(f[0]?.length??0,l[0]?.length??0),b=Object.fromEntries(Array.from({length:u},(g,E)=>[E+1,{}]));for(let g=0;g<f.length;g++){const E=f[g],C=o[g];b[E.length][E]=e.LeafNode.fromRoot(C)}for(let g=0;g<l.length;g++){const E=l[g],C=s[g];b[E.length][E]=e.LeafNode.fromRoot(C)}for(let g=u;g>1;g--){const E=b[g],C=b[g-1];for(const L of Object.keys(E)){const x=E[L];if(!x)continue;const w=L[L.length-1]==="0",N=L.substring(0,L.length-1),R=N+(w?"1":"0"),P=E[R];if(!P)throw new Error(`Sibling not found: ${R}`);const z=w?new e.BranchNode(x,P):new e.BranchNode(P,x);C[N]=z,delete E[L],delete E[R]}}const p=b[1][1];if(!p)throw new Error("Internal consistency error: no root found");return p}return Lr.createNodeFromMultiProof=i,Lr}var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.createNodeFromCompactMultiProof=Fe.createCompactMultiProof=Fe.compactMultiProofToNode=Fe.nodeToCompactMultiProof=Fe.descriptorToBitlist=Fe.computeDescriptor=void 0;const c1=oe,qu=ue,d1=os;function h1(e){const t=new Set,r=new Set;for(const s of e){const a=c1.convertGindexToBitstring(s);t.add(a);const{branch:f,path:l}=d1.computeProofBitstrings(a);l.delete(a);for(const u of l)r.add(u);for(const u of f)t.add(u)}for(const s of r)t.delete(s);const n=Array.from(t).sort((s,a)=>s.localeCompare(a));let i="";for(const s of n)for(let a=0;a<s.length;a++)if(s[s.length-1-a]==="1"){i+="1".padStart(a+1,"0");break}i.length%8!=0&&(i=i.padEnd(8-i.length%8+i.length,"0"));const o=new Uint8Array(i.length/8);for(let s=0;s<o.length;s++)o[s]=+("0b"+i.substring(s*8,(s+1)*8));return o}Fe.computeDescriptor=h1;function Gu(e,t){const r=t%8,n=Math.floor(t/8),i=e[n];switch(r){case 0:return(i&128)!==0;case 1:return(i&64)!==0;case 2:return(i&32)!==0;case 3:return(i&16)!==0;case 4:return(i&8)!==0;case 5:return(i&4)!==0;case 6:return(i&2)!==0;case 7:return(i&1)!==0;default:throw new Error("unreachable")}}function nl(e){const t=[],r=e.length*8;let n=0,i=0;for(let o=0;o<r;o++){const s=Gu(e,o);if(t.push(s),s?i++:n++,i>n){if(o++,o+7<r)throw new Error("Invalid descriptor: too many bytes");for(;o<r;o++)if(Gu(e,o))throw new Error("Invalid descriptor: too many 1 bits");return t}}throw new Error("Invalid descriptor: not enough 1 bits")}Fe.descriptorToBitlist=nl;function To(e,t,r){if(t[r])return[e.root];{const n=To(e.left,t,r+1),i=To(e.right,t,r+n.length*2);return[...n,...i]}}Fe.nodeToCompactMultiProof=To;function So(e,t,r){return e[r.bitIndex++]?qu.LeafNode.fromRoot(t[r.leafIndex++]):new qu.BranchNode(So(e,t,r),So(e,t,r))}Fe.compactMultiProofToNode=So;function g1(e,t){return To(e,nl(t),0)}Fe.createCompactMultiProof=g1;function y1(e,t){const r=nl(t);if(r.length!==e.length*2-1)throw new Error("Invalid multiproof: invalid number of leaves");return So(r,e,{bitIndex:0,leafIndex:0})}Fe.createNodeFromCompactMultiProof=y1;var De={};Object.defineProperty(De,"__esModule",{value:!0});De.deserializeTreeOffsetProof=De.serializeTreeOffsetProof=De.computeTreeOffsetProofSerializedLength=De.createNodeFromTreeOffsetProof=De.createTreeOffsetProof=De.treeOffsetProofToNode=De.nodeToTreeOffsetProof=void 0;const Wu=ue,p1=os;function Ao(e,t,r){if(!r.length||!r[0].startsWith(t))return[[],[]];if(t===r[0])return r.shift(),[[],[e.root]];{const[n,i]=Ao(e.left,t+"0",r),[o,s]=Ao(e.right,t+"1",r);return[[i.length].concat(n,o),i.concat(s)]}}De.nodeToTreeOffsetProof=Ao;function No(e,t){if(t.length){if(t.length===1)return Wu.LeafNode.fromRoot(t[0]);{const r=e[0];return new Wu.BranchNode(No(e.slice(1,r),t.slice(0,r)),No(e.slice(r),t.slice(r)))}}else throw new Error("Proof must contain gt 0 leaves")}De.treeOffsetProofToNode=No;function _1(e,t){return Ao(e,"1",p1.computeMultiProofBitstrings(t.map(r=>r.toString(2))))}De.createTreeOffsetProof=_1;function b1(e,t){return No(e,t)}De.createNodeFromTreeOffsetProof=b1;function w1(e,t){return(e.length+1)*2+t.length*32}De.computeTreeOffsetProofSerializedLength=w1;function m1(e,t,r,n){const i=new DataView(e.buffer,e.byteOffset,e.byteLength);i.setUint16(t,n.length,!0);const o=t+2;for(let a=0;a<r.length;a++)i.setUint16(a*2+o,r[a],!0);const s=o+r.length*2;for(let a=0;a<n.length;a++)e.set(n[a],a*32+s)}De.serializeTreeOffsetProof=m1;function v1(e,t){const r=new DataView(e.buffer,e.byteOffset,e.byteLength),n=r.getUint16(t,!0);if(e.length<(n-1)*2+n*32)throw new Error("Unable to deserialize tree offset proof: not enough bytes");const i=t+2,o=Array.from({length:n-1},(f,l)=>r.getUint16(l*2+i,!0)),s=i+o.length*2,a=Array.from({length:n},(f,l)=>e.subarray(l*32+s,(l+1)*32+s));return[o,a]}De.deserializeTreeOffsetProof=v1;var Zu;function dg(){return Zu||(Zu=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.deserializeProof=e.serializeProof=e.createNodeFromProof=e.createProof=e.ProofTypeSerialized=e.ProofType=e.descriptorToBitlist=e.computeDescriptor=void 0;const t=u1(),r=Fe,n=rl,i=De;var o=Fe;Object.defineProperty(e,"computeDescriptor",{enumerable:!0,get:function(){return o.computeDescriptor}}),Object.defineProperty(e,"descriptorToBitlist",{enumerable:!0,get:function(){return o.descriptorToBitlist}});var s;(function(b){b.single="single",b.treeOffset="treeOffset",b.multi="multi",b.compactMulti="compactMulti"})(s=e.ProofType||(e.ProofType={})),e.ProofTypeSerialized=[s.single,s.treeOffset,s.multi,s.compactMulti];function a(b,p){switch(p.type){case s.single:{const[g,E]=n.createSingleProof(b,p.gindex);return{type:s.single,gindex:p.gindex,leaf:g,witnesses:E}}case s.treeOffset:{const[g,E]=i.createTreeOffsetProof(b,p.gindices);return{type:s.treeOffset,offsets:g,leaves:E}}case s.multi:{const[g,E,C]=t.createMultiProof(b,p.gindices);return{type:s.multi,leaves:g,witnesses:E,gindices:C}}case s.compactMulti:{const g=r.createCompactMultiProof(b,p.descriptor);return{type:s.compactMulti,leaves:g,descriptor:p.descriptor}}default:throw new Error("Invalid proof type")}}e.createProof=a;function f(b){switch(b.type){case s.single:return n.createNodeFromSingleProof(b.gindex,b.leaf,b.witnesses);case s.treeOffset:return i.createNodeFromTreeOffsetProof(b.offsets,b.leaves);case s.multi:return t.createNodeFromMultiProof(b.leaves,b.witnesses,b.gindices);case s.compactMulti:return r.createNodeFromCompactMultiProof(b.leaves,b.descriptor);default:throw new Error("Invalid proof type")}}e.createNodeFromProof=f;function l(b){switch(b.type){case s.single:case s.multi:throw new Error("Not implemented");case s.treeOffset:{const p=new Uint8Array(1+i.computeTreeOffsetProofSerializedLength(b.offsets,b.leaves));return p[0]=e.ProofTypeSerialized.indexOf(s.treeOffset),i.serializeTreeOffsetProof(p,1,b.offsets,b.leaves),p}default:throw new Error("Invalid proof type")}}e.serializeProof=l;function u(b){const p=e.ProofTypeSerialized[b[0]];if(!p)throw new Error("Invalid proof type");switch(p){case s.single:case s.multi:throw new Error("Not implemented");case s.treeOffset:{const[g,E]=i.deserializeTreeOffsetProof(b,1);return{type:s.treeOffset,offsets:g,leaves:E}}default:throw new Error("Invalid proof type")}}e.deserializeProof=u}(oa)),oa}(function(e){var t=Ze&&Ze.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=Ze&&Ze.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&t(i,n,o)};Object.defineProperty(e,"__esModule",{value:!0}),r(oe,e),r(xi,e),r(ue,e),r(ur,e),r(dg(),e),r(Ft,e),r(cg(),e),r(Ln,e)})(fe);var ae={},ss={};Object.defineProperty(ss,"__esModule",{value:!0});ss.zeroHash=void 0;const E1=xi,ln=[new Uint8Array(32)];function T1(e){if(e>=ln.length)for(let t=ln.length;t<=e;t++)ln[t]=E1.hasher.digest64(ln[t-1],ln[t-1]);return ln[e]}ss.zeroHash=T1;Object.defineProperty(ae,"__esModule",{value:!0});ae.nextPowerOf2=ae.maxChunksToDepth=ae.bitLength=ae.mixInLength=ae.splitIntoRootChunks=ae.merkleize=ae.hash64=void 0;const S1=xi,Ku=ss;function il(e,t){return S1.hasher.digest64(e,t)}ae.hash64=il;function A1(e,t){const r=ol(hg(t)-1);if(e.length==0)return Ku.zeroHash(r);let n=e.length;for(let i=0;i<r;i++){const o=n%2,s=n+o;for(let a=0;a<o;a++)e[n+a]=Ku.zeroHash(i);for(let a=0;a<s;a+=2)e[a/2]=il(e[a],e[a+1]);n=s/2}return e[0]}ae.merkleize=A1;function N1(e){const t=Math.ceil(e.length/32),r=new Array(t);for(let n=0;n<t;n++){const i=new Uint8Array(32);i.set(e.slice(n*32,(n+1)*32)),r[n]=i}return r}ae.splitIntoRootChunks=N1;function B1(e,t){const r=q.alloc(32);return r.writeUIntLE(t,0,6),il(e,r)}ae.mixInLength=B1;function ol(e){return e===0?0:Math.floor(Math.log2(e))+1}ae.bitLength=ol;function x1(e){return e===0?0:Math.ceil(Math.log2(e))}ae.maxChunksToDepth=x1;function hg(e){return e<=0?1:Math.pow(2,ol(e-1))}ae.nextPowerOf2=hg;var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.namedClass=void 0;function R1(e,t){return new Function("superClass",`return class ${t} extends superClass {}`)(e)}Ue.namedClass=R1;var te={};Object.defineProperty(te,"__esModule",{value:!0});te.assertValidArrayLength=te.value_defaultValueArray=te.value_equals=te.value_cloneArray=te.value_toJsonArray=te.value_fromJsonArray=te.tree_deserializeFromBytesArrayBasic=te.tree_serializeToBytesArrayBasic=te.value_deserializeFromBytesArrayBasic=te.value_serializeToBytesArrayBasic=te.setChunksNode=te.addLengthNode=te.getChunksNodeFromRootNode=te.getLengthFromRootNode=void 0;const Zr=fe;function I1(e){return e.right.getUint(4,0)}te.getLengthFromRootNode=I1;function O1(e){return e.left}te.getChunksNodeFromRootNode=O1;function gg(e,t){return new Zr.BranchNode(e,Zr.LeafNode.fromUint32(t))}te.addLengthNode=gg;function C1(e,t,r){const n=r!==void 0?Zr.LeafNode.fromUint32(r):e.right;return new Zr.BranchNode(t,n)}te.setChunksNode=C1;function L1(e,t,r,n,i){const o=e.byteLength;for(let s=0;s<t;s++)e.value_serializeToBytes(r,n+s*o,i[s]);return n+t*o}te.value_serializeToBytesArrayBasic=L1;function P1(e,t,r,n,i){const o=e.byteLength,s=(n-r)/o;as(s,i,!0);const a=new Array(s);for(let f=0;f<s;f++)a[f]=e.value_deserializeFromBytes(t,r+f*o,r+(f+1)*o);return a}te.value_deserializeFromBytesArrayBasic=P1;function k1(e,t,r,n,i,o){const s=e.byteLength*t,a=Math.ceil(s/32),f=Zr.getNodesAtDepth(o,r,0,a);return Zr.packedNodeRootsToBytes(n.dataView,i,s,f),i+s}te.tree_serializeToBytesArrayBasic=k1;function z1(e,t,r,n,i,o){const s=(i-n)/e.byteLength;as(s,o,!0);const a=Zr.packedRootsBytesToNode(t,r.dataView,n,i);return o.isList?gg(a,s):a}te.tree_deserializeFromBytesArrayBasic=z1;function $1(e,t,r){if(!Array.isArray(t))throw Error("JSON is not an array");as(t.length,r);const n=new Array(t.length);for(let i=0;i<t.length;i++)n[i]=e.fromJson(t[i]);return n}te.value_fromJsonArray=$1;function D1(e,t,r){const n=r.isList?t.length:r.length,i=new Array(n);for(let o=0;o<n;o++)i[o]=e.toJson(t[o]);return i}te.value_toJsonArray=D1;function M1(e,t){const r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=e.clone(t[n]);return r}te.value_cloneArray=M1;function U1(e,t,r){if(t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(!e.equals(t[n],r[n]))return!1;return!0}te.value_equals=U1;function V1(e,t){const r=new Array(t);for(let n=0;n<t;n++)r[n]=e.defaultValue();return r}te.value_defaultValueArray=V1;function as(e,t,r){if(r&&e%1!==0)throw Error("size not multiple of element fixedSize");if(t.isList){if(e>t.limit)throw new Error(`Invalid list length ${e} over limit ${t.limit}`)}else if(e!==t.length)throw new Error(`Incorrect vector length ${e} expected ${t.length}`)}te.assertValidArrayLength=as;var _r={};Object.defineProperty(_r,"__esModule",{value:!0});_r.getUint8ByteToBitBooleanArray=_r.BitArray=void 0;const sa=new Array(256);class _n{constructor(t,r){if(this.uint8Array=t,this.bitLen=r,t.length!==Math.ceil(r/8))throw Error("BitArray uint8Array length does not match bitLen")}static fromBitLen(t){return new _n(new Uint8Array(Math.ceil(t/8)),t)}static fromSingleBit(t,r){const n=_n.fromBitLen(t);return n.set(r,!0),n}static fromBoolArray(t){const r=_n.fromBitLen(t.length);for(let n=0;n<t.length;n++)t[n]===!0&&r.set(n,!0);return r}clone(){return new _n(Uint8Array.prototype.slice.call(this.uint8Array,0),this.bitLen)}get(t){const r=Math.floor(t/8),i=1<<t%8;return(this.uint8Array[r]&i)===i}set(t,r){if(t>=this.bitLen)throw Error(`BitArray set bitIndex ${t} beyond bitLen ${this.bitLen}`);const n=Math.floor(t/8),o=1<<t%8;let s=this.uint8Array[n];r?(s|=o,this.uint8Array[n]=s):(s&o)===o&&(s^=o,this.uint8Array[n]=s)}mergeOrWith(t){if(t.bitLen!==this.bitLen)throw Error("Must merge BitArrays of same bitLen");for(let r=0;r<this.uint8Array.length;r++)this.uint8Array[r]=this.uint8Array[r]|t.uint8Array[r]}intersectValues(t){const r=[];if(t.length!==this.bitLen)throw Error(`Must not intersect values of length ${t.length} != bitLen ${this.bitLen}`);const n=Math.floor(this.bitLen/8),i=this.bitLen%8,o=this.uint8Array;for(let s=0;s<n;s++){const a=ei(o[s]);for(let f=0;f<8;f++)a[f]&&r.push(t[s*8+f])}if(i>0){const s=ei(o[n]);for(let a=0;a<i;a++)s[a]&&r.push(t[n*8+a])}return r}getTrueBitIndexes(){const t=[],r=this.uint8Array;for(let n=0,i=r.length;n<i;n++){const o=ei(r[n]);for(let s=0;s<8;s++)o[s]&&t.push(n*8+s)}return t}getSingleTrueBit(){let t=null;const r=this.uint8Array;for(let n=0,i=r.length;n<i;n++){if(r[n]===0)continue;const o=ei(r[n]);for(let s=0;s<8;s++)if(o[s]===!0){if(t!==null)return null;t=n*8+s}}return t===null?null:t}toBoolArray(){const t=new Array(this.bitLen);for(let r=0;r<this.bitLen;r++)t[r]=this.get(r);return t}}_r.BitArray=_n;function ei(e){return sa[e]||(sa[e]=j1(e)),sa[e]}_r.getUint8ByteToBitBooleanArray=ei;function j1(e){const t=e.toString(2),r=t.length,n=new Array(8);for(let i=0;i<8;i++)n[i]=i<r?t[r-i-1]==="1":!1;return n}var Pn={},gt={};Object.defineProperty(gt,"__esModule",{value:!0});gt.byteArrayEquals=gt.fromHexString=gt.toHexString=void 0;const aa=new Array(256);function F1(e){let t="0x";for(const r of e)aa[r]||(aa[r]=r<16?"0"+r.toString(16):r.toString(16)),t+=aa[r];return t}gt.toHexString=F1;function H1(e){if(typeof e!="string")throw new Error(`hex argument type ${typeof e} must be of type string`);if(e.startsWith("0x")&&(e=e.slice(2)),e.length%2!==0)throw new Error(`hex string length ${e.length} must be multiple of 2`);const t=e.length/2,r=new Uint8Array(t);for(let n=0;n<t;n++){const i=parseInt(e.slice(n*2,(n+1)*2),16);r[n]=i}return r}gt.fromHexString=H1;function q1(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}gt.byteArrayEquals=q1;var Oe={},fs={};Object.defineProperty(fs,"__esModule",{value:!0});fs.treePostProcessFromProofNode=void 0;const G1=fe;function Xu(e){return!e.isBasic}function oo(e,t,r="",n=0){if(n===0){const o=t.tree_fromProofNode(e);if(o.done)return o.node;e=o.node}const i=t.depth===n;if(e.isLeaf())if(i){const o=t.getIndexProperty(Yu(r));if(o===null)return e;const s=t.getPropertyType(o);return s.maxChunkCount===1&&Xu(s)?s.tree_fromProofNode(e).node:e}else return e;else if(i){const o=t.getIndexProperty(Yu(r));if(o===null)return e;const s=t.getPropertyType(o);if(!Xu(s))throw Error("BranchNode does not map to CompositeType");const a=s.tree_fromProofNode(e);return a.done?a.node:oo(a.node,s)}else{const o=oo(e.left,t,r+"0",n+1),s=oo(e.right,t,r+"1",n+1);return o===e.left&&s===e.right?e:new G1.BranchNode(o,s)}}fs.treePostProcessFromProofNode=oo;function Yu(e){return e===""?0:parseInt(e,2)}var kn={};Object.defineProperty(kn,"__esModule",{value:!0});kn.Type=void 0;class W1{value_toTree(t){const r=new Uint8Array(this.value_serializedSize(t)),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return this.value_serializeToBytes({uint8Array:r,dataView:n},0,t),this.tree_deserializeFromBytes({uint8Array:r,dataView:n},0,r.length)}tree_toValue(t){const r=new Uint8Array(this.tree_serializedSize(t)),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return this.tree_serializeToBytes({uint8Array:r,dataView:n},0,t),this.value_deserializeFromBytes({uint8Array:r,dataView:n},0,r.length)}serialize(t){const r=new Uint8Array(this.value_serializedSize(t)),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return this.value_serializeToBytes({uint8Array:r,dataView:n},0,t),r}deserialize(t){const r=new DataView(t.buffer,t.byteOffset,t.byteLength);return this.value_deserializeFromBytes({uint8Array:t,dataView:r},0,t.length)}}kn.Type=W1;Object.defineProperty(Oe,"__esModule",{value:!0});Oe.isCompositeType=Oe.CompositeType=Oe.LENGTH_GINDEX=void 0;const zt=fe,Z1=gt,K1=ae,X1=fs,Y1=kn;Oe.LENGTH_GINDEX=BigInt(3);const fa=Symbol("ssz_cached_permanent_root");class J1 extends Y1.Type{constructor(t){super(),this.cachePermanentRootStruct=t,this.isBasic=!1}defaultView(){return this.toView(this.defaultValue())}defaultViewDU(){return this.toViewDU(this.defaultValue())}deserializeToView(t){const r=new DataView(t.buffer,t.byteOffset,t.byteLength),n=this.tree_deserializeFromBytes({uint8Array:t,dataView:r},0,t.length);return this.getView(new zt.Tree(n))}deserializeToViewDU(t){const r=new DataView(t.buffer,t.byteOffset,t.byteLength),n=this.tree_deserializeFromBytes({uint8Array:t,dataView:r},0,t.length);return this.getViewDU(n)}toView(t){const r=this.value_toTree(t);return this.getView(new zt.Tree(r))}toViewDU(t){const r=this.value_toTree(t);return this.getViewDU(r)}toValueFromView(t){const r=this.commitView(t);return this.tree_toValue(r)}toValueFromViewDU(t){const r=this.commitViewDU(t);return this.tree_toValue(r)}toViewFromViewDU(t){const r=this.commitViewDU(t);return this.getView(new zt.Tree(r))}toViewDUFromView(t){const r=this.commitView(t);return this.getViewDU(r)}hashTreeRoot(t){if(this.cachePermanentRootStruct){const n=t[fa];if(n)return n}const r=K1.merkleize(this.getRoots(t),this.maxChunkCount);return this.cachePermanentRootStruct&&(t[fa]=r),r}getCachedPermanentRoot(t){return t[fa]}createFromProof(t,r){const n=zt.Tree.createFromProof(t).rootNode,i=X1.treePostProcessFromProofNode(n,this);if(r!==void 0&&!Z1.byteArrayEquals(i.root,r))throw new Error("Proof does not match trusted root");return this.getView(new zt.Tree(i))}tree_createProof(t,r){const n=this.tree_createProofGindexes(t,r);return zt.createProof(t,{type:zt.ProofType.treeOffset,gindices:n})}tree_createProofGindexes(t,r){const n=[];for(const i of r){const{type:o,gindex:s}=this.getPathInfo(i);if(!yg(o))n.push(s);else{const a=o.tree_getLeafGindices(s,o.fixedSize===null?zt.getNode(t,s):void 0);for(const f of a)n.push(f)}}return n}getPathInfo(t){const r=[];let n=this;for(const i of t){if(n.isBasic)throw new Error("Invalid path: cannot navigate beyond a basic type");const o=n.getPropertyGindex(i);o!==null&&(r.push(o),n=n.getPropertyType(i))}return{type:n,gindex:zt.concatGindices(r)}}tree_fromProofNode(t){return{node:t,done:!1}}}Oe.CompositeType=J1;function yg(e){return!e.isBasic}Oe.isCompositeType=yg;var ls={},Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.TreeView=void 0;const Q1=fe;class ev{serialize(){const t=new Uint8Array(this.type.tree_serializedSize(this.node)),r=new DataView(t.buffer,t.byteOffset,t.byteLength);return this.type.tree_serializeToBytes({uint8Array:t,dataView:r},0,this.node),t}hashTreeRoot(){return this.node.root}createProof(t){return this.type.tree_createProof(this.node,t)}toValue(){return this.type.tree_toValue(this.node)}clone(){return this.type.getView(new Q1.Tree(this.node))}}Ot.TreeView=ev;Object.defineProperty(ls,"__esModule",{value:!0});ls.BitArrayTreeView=void 0;const tv=Ot;class rv extends tv.TreeView{constructor(t,r){super(),this.type=t,this.tree=r,this.bitArray=t.tree_toValue(r.rootNode)}get node(){return this.tree.rootNode}get uint8Array(){return this.bitArray.uint8Array}get bitLen(){return this.bitArray.bitLen}get(t){return this.bitArray.get(t)}set(t,r){this.bitArray.set(t,r),this.tree.rootNode=this.type.value_toTree(this.bitArray)}mergeOrWith(t){this.bitArray.mergeOrWith(t)}intersectValues(t){return this.bitArray.intersectValues(t)}getTrueBitIndexes(){return this.bitArray.getTrueBitIndexes()}getSingleTrueBit(){return this.bitArray.getSingleTrueBit()}toBoolArray(){return this.bitArray.toBoolArray()}}ls.BitArrayTreeView=rv;var us={},Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.TreeViewDU=void 0;const nv=Ot;class iv extends nv.TreeView{hashTreeRoot(){return this.commit(),super.hashTreeRoot()}serialize(){return this.commit(),super.serialize()}clone(t){if(t)return this.type.getViewDU(this.node);{const r=this.cache;return this.clearCache(),this.type.getViewDU(this.node,r)}}}Xt.TreeViewDU=iv;Object.defineProperty(us,"__esModule",{value:!0});us.BitArrayTreeViewDU=void 0;const ov=Xt;class sv extends ov.TreeViewDU{constructor(t,r){super(),this.type=t,this._rootNode=r,this._bitArray=null}get node(){return this._rootNode}get cache(){}commit(){this._bitArray!==null&&(this._rootNode=this.type.value_toTree(this._bitArray))}get uint8Array(){return this.bitArray.uint8Array}get bitLen(){return this.bitArray.bitLen}get(t){return this.bitArray.get(t)}set(t,r){this.bitArray.set(t,r)}mergeOrWith(t){this.bitArray.mergeOrWith(t)}intersectValues(t){return this.bitArray.intersectValues(t)}getTrueBitIndexes(){return this.bitArray.getTrueBitIndexes()}getSingleTrueBit(){return this.bitArray.getSingleTrueBit()}toBoolArray(){return this.bitArray.toBoolArray()}get bitArray(){return this._bitArray===null&&(this._bitArray=this.type.tree_toValue(this._rootNode)),this._bitArray}clearCache(){this._bitArray=null}}us.BitArrayTreeViewDU=sv;Object.defineProperty(Pn,"__esModule",{value:!0});Pn.BitArrayType=void 0;const la=fe,ua=gt,av=ae,Ju=Oe,fv=ls,lv=us;class uv extends Ju.CompositeType{constructor(){super(...arguments),this.isViewMutable=!0}getView(t){return new fv.BitArrayTreeView(this,t)}getViewDU(t){return new lv.BitArrayTreeViewDU(this,t)}commitView(t){return t.node}commitViewDU(t){return t.commit(),t.node}cacheOfViewDU(t){return t.cache}getRoots(t){return av.splitIntoRootChunks(t.uint8Array)}getPropertyGindex(){return null}getPropertyType(){throw Error("Must only request BitArray complete data")}getIndexProperty(){throw Error("Must only request BitArray complete data")}tree_fromProofNode(t){return{node:t,done:!0}}tree_getLeafGindices(t,r){const n=this.tree_getByteLen(r),i=Math.ceil(n/32),o=la.concatGindices([t,la.toGindex(this.depth,BigInt(0))]),s=new Array(i);for(let a=0,f=o;a<i;a++,f++)s[a]=f;return this.isList&&s.push(la.concatGindices([t,Ju.LENGTH_GINDEX])),s}fromJson(t){const r=ua.fromHexString(t),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return this.value_deserializeFromBytes({uint8Array:r,dataView:n},0,r.length)}toJson(t){return ua.toHexString(this.serialize(t))}clone(t){return t.clone()}equals(t,r){return t.bitLen===r.bitLen&&ua.byteArrayEquals(t.uint8Array,r.uint8Array)}}Pn.BitArrayType=uv;Object.defineProperty(ns,"__esModule",{value:!0});ns.BitListType=void 0;const ca=fe,Qu=ae,cv=Ue,Wn=te,ec=_r,dv=Pn;class sl extends dv.BitArrayType{constructor(t,r){if(super(),this.limitBits=t,this.fixedSize=null,this.minSize=1,this.isList=!0,t===0)throw Error("List limit must be > 0");this.typeName=r?.typeName??`BitList[${t}]`,this.maxChunkCount=Math.ceil(this.limitBits/8/32),this.chunkDepth=Qu.maxChunksToDepth(this.maxChunkCount),this.depth=1+this.chunkDepth,this.maxSize=Math.ceil(t/8)+1}static named(t,r){return new(cv.namedClass(sl,r.typeName))(t,r)}defaultValue(){return ec.BitArray.fromBitLen(0)}value_serializedSize(t){return tc(t.bitLen)}value_serializeToBytes(t,r,n){return t.uint8Array.set(n.uint8Array,r),rc(t.uint8Array,r,n.bitLen)}value_deserializeFromBytes(t,r,n){const{uint8Array:i,bitLen:o}=this.deserializeUint8ArrayBitListFromBytes(t.uint8Array,r,n);return new ec.BitArray(i,o)}tree_serializedSize(t){return tc(Wn.getLengthFromRootNode(t))}tree_serializeToBytes(t,r,n){const i=Wn.getChunksNodeFromRootNode(n),o=Wn.getLengthFromRootNode(n),s=Math.ceil(o/8),a=Math.ceil(s/32),f=ca.getNodesAtDepth(i,this.chunkDepth,0,a);return ca.packedNodeRootsToBytes(t.dataView,r,s,f),rc(t.uint8Array,r,o)}tree_deserializeFromBytes(t,r,n){const{uint8Array:i,bitLen:o}=this.deserializeUint8ArrayBitListFromBytes(t.uint8Array,r,n),s=new DataView(i.buffer,i.byteOffset,i.byteLength),a=ca.packedRootsBytesToNode(this.chunkDepth,s,0,i.length);return Wn.addLengthNode(a,o)}tree_getByteLen(t){if(!t)throw new Error("BitListType requires a node to get leaves");return Math.ceil(Wn.getLengthFromRootNode(t)/8)}hashTreeRoot(t){return Qu.mixInLength(super.hashTreeRoot(t),t.bitLen)}deserializeUint8ArrayBitListFromBytes(t,r,n){const{uint8Array:i,bitLen:o}=hv(t,r,n);if(o>this.limitBits)throw Error(`bitLen over limit ${o} > ${this.limitBits}`);return{uint8Array:i,bitLen:o}}}ns.BitListType=sl;function hv(e,t,r){if(r>e.length)throw Error(`BitList attempting to read byte ${r} of data length ${e.length}`);const n=e[r-1],i=r-t;if(n===0)throw new Error("Invalid deserialized bitlist, padding bit required");if(n===1){const l=Uint8Array.prototype.slice.call(e,t,r-1),u=(i-1)*8;return{uint8Array:l,bitLen:u}}const o=Uint8Array.prototype.slice.call(e,t,r),s=n.toString(2).length-1,a=(i-1)*8+s,f=255>>8-s;return o[i-1]&=f,{uint8Array:o,bitLen:a}}function tc(e){const t=Math.ceil(e/8);return e%8===0?t+1:t}function rc(e,t,r){const n=Math.ceil(r/8),i=t+n;return r%8===0?(e[i]=1,i+1):(e[i-1]|=1<<r%8,i)}var cs={};Object.defineProperty(cs,"__esModule",{value:!0});cs.BitVectorType=void 0;const da=fe,gv=ae,yv=Ue,nc=_r,pv=Pn;class al extends pv.BitArrayType{constructor(t,r){if(super(),this.lengthBits=t,this.isList=!1,t===0)throw Error("Vector length must be > 0");this.typeName=r?.typeName??`BitVector[${t}]`,this.chunkCount=Math.ceil(this.lengthBits/8/32),this.maxChunkCount=this.chunkCount,this.depth=gv.maxChunksToDepth(this.chunkCount),this.fixedSize=Math.ceil(this.lengthBits/8),this.minSize=this.fixedSize,this.maxSize=this.fixedSize,this.zeroBitsMask=t%8===0?0:255&255<<t%8}static named(t,r){return new(yv.namedClass(al,r.typeName))(t,r)}defaultValue(){return nc.BitArray.fromBitLen(this.lengthBits)}value_serializedSize(){return this.fixedSize}value_serializeToBytes(t,r,n){return t.uint8Array.set(n.uint8Array,r),r+this.fixedSize}value_deserializeFromBytes(t,r,n){return this.assertValidLength(t.uint8Array,r,n),new nc.BitArray(Uint8Array.prototype.slice.call(t.uint8Array,r,n),this.lengthBits)}tree_serializedSize(){return this.fixedSize}tree_serializeToBytes(t,r,n){const i=da.getNodesAtDepth(n,this.depth,0,this.chunkCount);return da.packedNodeRootsToBytes(t.dataView,r,this.fixedSize,i),r+this.fixedSize}tree_deserializeFromBytes(t,r,n){return this.assertValidLength(t.uint8Array,r,n),da.packedRootsBytesToNode(this.depth,t.dataView,r,n)}tree_getByteLen(){return this.fixedSize}assertValidLength(t,r,n){const i=n-r;if(n-r!==this.fixedSize)throw Error(`Invalid BitVector size ${i} != ${this.fixedSize}`);if(this.zeroBitsMask>0&&(t[n-1]&this.zeroBitsMask)>0)throw Error("BitVector: nonzero bits past length")}}cs.BitVectorType=al;var ds={},_t={};Object.defineProperty(_t,"__esModule",{value:!0});_t.isBasicType=_t.BasicType=void 0;const _v=kn;class bv extends _v.Type{constructor(){super(...arguments),this.isBasic=!0,this.depth=0,this.maxChunkCount=1}value_serializedSize(){return this.byteLength}tree_serializedSize(){return this.byteLength}assertValidSize(t){if(t!==this.byteLength)throw Error(`BasicType invalid size ${t} expected ${this.byteLength}`)}hashTreeRoot(t){const r=new Uint8Array(32),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return this.value_serializeToBytes({uint8Array:r,dataView:n},0,t),r}clone(t){return t}equals(t,r){return t===r}}_t.BasicType=bv;function wv(e){return e.isBasic}_t.isBasicType=wv;Object.defineProperty(ds,"__esModule",{value:!0});ds.BooleanType=void 0;const mv=fe,vv=Ue,Ev=_t;class fl extends Ev.BasicType{constructor(t){super(),this.byteLength=1,this.itemsPerChunk=32,this.fixedSize=1,this.minSize=1,this.maxSize=1,this.typeName=t?.typeName??"boolean"}static named(t){return new(vv.namedClass(fl,t.typeName))(t)}defaultValue(){return!1}value_serializeToBytes(t,r,n){return t.uint8Array[r]=n?1:0,r+1}value_deserializeFromBytes(t,r,n){switch(this.assertValidSize(n-r),t.uint8Array[r]){case 1:return!0;case 0:return!1;default:throw new Error(`Boolean: invalid value: ${t.uint8Array[r]}`)}}tree_serializeToBytes(t,r,n){return t.uint8Array[r]=n.getUint(4,0),r+1}tree_deserializeFromBytes(t,r,n){this.assertValidSize(n-r);const i=t.uint8Array[r];if(i>1)throw Error(`Boolean: invalid value ${i}`);return mv.LeafNode.fromUint32(i)}tree_getFromNode(t){return t.getUint(4,0)===1}tree_setToNode(t,r){t.setUint(4,0,r?1:0)}tree_getFromPackedNode(t,r){const n=r%this.itemsPerChunk;return t.getUint(1,n)!==0}tree_setToPackedNode(t,r,n){const i=r%this.itemsPerChunk;t.setUint(1,i,n?1:0)}fromJson(t){if(typeof t!="boolean")throw Error(`JSON invalid type ${typeof t} expected boolean`);return t}toJson(t){return t}}ds.BooleanType=fl;var hs={},zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.ByteArrayType=void 0;const ha=fe,ga=gt,Tv=ae,ic=Oe;class Sv extends ic.CompositeType{constructor(){super(...arguments),this.isViewMutable=!1}defaultValue(){return new Uint8Array(this.minSize)}getView(t){return this.getViewDU(t.rootNode)}getViewDU(t){return this.tree_toValue(t)}commitView(t){return this.commitViewDU(t)}commitViewDU(t){const r=new Uint8Array(this.value_serializedSize(t)),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return this.value_serializeToBytes({uint8Array:r,dataView:n},0,t),this.tree_deserializeFromBytes({uint8Array:r,dataView:n},0,r.length)}cacheOfViewDU(){}toView(t){return t}toViewDU(t){return t}value_serializeToBytes(t,r,n){return t.uint8Array.set(n,r),r+n.length}value_deserializeFromBytes(t,r,n){return this.assertValidSize(n-r),Uint8Array.prototype.slice.call(t.uint8Array,r,n)}getRoots(t){return Tv.splitIntoRootChunks(t)}getPropertyGindex(){return null}getPropertyType(){throw Error("Must only request ByteArray complete data")}getIndexProperty(){throw Error("Must only request ByteArray complete data")}tree_fromProofNode(t){return{node:t,done:!0}}tree_getLeafGindices(t,r){const n=this.tree_getByteLen(r),i=Math.ceil(n/32),o=ha.concatGindices([t,ha.toGindex(this.depth,BigInt(0))]),s=new Array(i);for(let a=0,f=o;a<i;a++,f++)s[a]=f;return this.isList&&s.push(ha.concatGindices([t,ic.LENGTH_GINDEX])),s}fromJson(t){const r=ga.fromHexString(t);return this.assertValidSize(r.length),r}toJson(t){return ga.toHexString(t)}clone(t){return t}equals(t,r){return ga.byteArrayEquals(t,r)}}zn.ByteArrayType=Sv;Object.defineProperty(hs,"__esModule",{value:!0});hs.ByteListType=void 0;const ya=fe,oc=ae,Av=Ue,Zn=te,Nv=zn;class ll extends Nv.ByteArrayType{constructor(t,r){if(super(),this.limitBytes=t,this.fixedSize=null,this.isList=!0,t===0)throw Error("List limit must be > 0");this.typeName=r?.typeName??`ByteList[${t}]`,this.maxChunkCount=Math.ceil(this.limitBytes/32),this.chunkDepth=oc.maxChunksToDepth(this.maxChunkCount),this.depth=1+this.chunkDepth,this.minSize=0,this.maxSize=this.limitBytes}static named(t,r){return new(Av.namedClass(ll,r.typeName))(t,r)}value_serializedSize(t){return t.length}tree_serializedSize(t){return Zn.getLengthFromRootNode(t)}tree_serializeToBytes(t,r,n){const i=Zn.getChunksNodeFromRootNode(n),o=Zn.getLengthFromRootNode(n),s=Math.ceil(o/32),a=ya.getNodesAtDepth(i,this.chunkDepth,0,s);return ya.packedNodeRootsToBytes(t.dataView,r,o,a),r+o}tree_deserializeFromBytes(t,r,n){this.assertValidSize(n-r);const i=ya.packedRootsBytesToNode(this.chunkDepth,t.dataView,r,n);return Zn.addLengthNode(i,n-r)}tree_getByteLen(t){if(!t)throw new Error("ByteListType requires a node to get leaves");return Zn.getLengthFromRootNode(t)}hashTreeRoot(t){return oc.mixInLength(super.hashTreeRoot(t),t.length)}assertValidSize(t){if(t>this.limitBytes)throw Error(`ByteList invalid size ${t} limit ${this.limitBytes}`)}}hs.ByteListType=ll;var gs={};Object.defineProperty(gs,"__esModule",{value:!0});gs.ByteVectorType=void 0;const pa=fe,Bv=ae,xv=Ue,Rv=zn;class ul extends Rv.ByteArrayType{constructor(t,r){if(super(),this.lengthBytes=t,this.isList=!1,t===0)throw Error("Vector length must be > 0");this.typeName=r?.typeName??`ByteVector[${t}]`,this.maxChunkCount=Math.ceil(this.lengthBytes/32),this.chunkDepth=Bv.maxChunksToDepth(this.maxChunkCount),this.depth=this.chunkDepth,this.fixedSize=this.lengthBytes,this.minSize=this.fixedSize,this.maxSize=this.fixedSize}static named(t,r){return new(xv.namedClass(ul,r.typeName))(t,r)}value_serializedSize(){return this.fixedSize}tree_serializedSize(){return this.fixedSize}tree_serializeToBytes(t,r,n){const i=pa.getNodesAtDepth(n,this.chunkDepth,0,this.maxChunkCount);return pa.packedNodeRootsToBytes(t.dataView,r,this.fixedSize,i),r+this.fixedSize}tree_deserializeFromBytes(t,r,n){return this.assertValidSize(n-r),pa.packedRootsBytesToNode(this.chunkDepth,t.dataView,r,n)}tree_getByteLen(){return this.lengthBytes}assertValidSize(t){if(t!==this.lengthBytes)throw Error(`ByteVector invalid size ${t} expected ${this.lengthBytes}`)}}gs.ByteVectorType=ul;var Ht={},ys={};Object.defineProperty(ys,"__esModule",{value:!0});ys.getContainerTreeViewClass=void 0;const _a=fe,Iv=_t,Ov=Oe,Cv=Ot;let Lv=class extends Cv.TreeView{constructor(t,r){super(),this.type=t,this.tree=r}get node(){return this.tree.rootNode}};function Pv(e){class t extends Lv{}for(let r=0;r<e.fieldsEntries.length;r++){const{fieldName:n,fieldType:i}=e.fieldsEntries[r];if(Iv.isBasicType(i))Object.defineProperty(t.prototype,n,{configurable:!1,enumerable:!0,get:function(){const o=_a.getNodeAtDepth(this.node,this.type.depth,r);return i.tree_getFromNode(o)},set:function(o){const a=_a.getNodeAtDepth(this.node,this.type.depth,r).clone();i.tree_setToNode(a,o),this.tree.setNodeAtDepth(this.type.depth,r,a)}});else if(Ov.isCompositeType(i))Object.defineProperty(t.prototype,n,{configurable:!1,enumerable:!0,get:function(){const o=_a.toGindexBitstring(this.type.depth,r);return i.getView(this.tree.getSubtree(o))},set:function(o){const s=i.commitView(o);this.tree.setNodeAtDepth(this.type.depth,r,s)}});else throw Error(`Unknown fieldType ${i.typeName} for fieldName ${n}`)}return Object.defineProperty(t,"name",{value:e.typeName,writable:!1}),t}ys.getContainerTreeViewClass=Pv;var ps={};Object.defineProperty(ps,"__esModule",{value:!0});ps.getContainerTreeViewDUClass=void 0;const so=fe,kv=_t,zv=Oe,$v=Xt;let Dv=class extends $v.TreeViewDU{constructor(t,r,n){super(),this.type=t,this._rootNode=r,this.nodes=[],this.nodesChanged=new Set,this.viewsChanged=new Map,n?(this.nodes=n.nodes,this.caches=n.caches,this.nodesPopulated=n.nodesPopulated):(this.nodes=[],this.caches=[],this.nodesPopulated=!1)}get node(){return this._rootNode}get cache(){return{nodes:this.nodes,caches:this.caches,nodesPopulated:this.nodesPopulated}}commit(){if(this.nodesChanged.size===0&&this.viewsChanged.size===0)return;const t=[];for(const[o,s]of this.viewsChanged){const a=this.type.fieldsEntries[o].fieldType,f=a.commitViewDU(s);this.nodes[o]=f,t.push({index:o,node:f});const l=a.cacheOfViewDU(s);l&&(this.caches[o]=l)}for(const o of this.nodesChanged)t.push({index:o,node:this.nodes[o]});const r=t.sort((o,s)=>o.index-s.index),n=r.map(o=>o.index),i=r.map(o=>o.node);this._rootNode=so.setNodesAtDepth(this._rootNode,this.type.depth,n,i),this.nodesChanged.clear(),this.viewsChanged.clear()}clearCache(){this.nodes=[],this.caches=[],this.nodesPopulated=!1,this.nodesChanged.clear(),this.viewsChanged.clear()}};function Mv(e){class t extends Dv{}for(let r=0;r<e.fieldsEntries.length;r++){const{fieldName:n,fieldType:i}=e.fieldsEntries[r];if(kv.isBasicType(i))Object.defineProperty(t.prototype,n,{configurable:!1,enumerable:!0,get:function(){let o=this.nodes[r];return o===void 0&&(o=so.getNodeAtDepth(this._rootNode,this.type.depth,r),this.nodes[r]=o),i.tree_getFromNode(o)},set:function(o){let s;this.nodesChanged.has(r)?s=this.nodes[r]:(s=(this.nodes[r]??so.getNodeAtDepth(this._rootNode,this.type.depth,r)).clone(),this.nodes[r]=s,this.nodesChanged.add(r)),i.tree_setToNode(s,o)}});else if(zv.isCompositeType(i))Object.defineProperty(t.prototype,n,{configurable:!1,enumerable:!0,get:function(){const o=this.viewsChanged.get(r);if(o)return o;let s=this.nodes[r];s===void 0&&(s=so.getNodeAtDepth(this._rootNode,this.type.depth,r),this.nodes[r]=s);const a=i.getViewDU(s,this.caches[r]);return i.isViewMutable&&this.viewsChanged.set(r,a),a},set:function(o){this.viewsChanged.set(r,o)}});else throw Error(`Unknown fieldType ${i.typeName} for fieldName ${n}`)}return Object.defineProperty(t,"name",{value:e.typeName,writable:!1}),t}ps.getContainerTreeViewDUClass=Mv;var pg={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Case=void 0,e.Case={snake:t=>t.replace(/[^0-z]/g,"").replace(/[a-z][A-Z]|[0-9][A-Z]/g,r=>r[0]+"_"+r[1].toLowerCase()),constant:t=>t.replace(/[^0-z]/g,"").replace(/[a-z][A-Z]|[0-9][A-Z]/g,r=>r[0]+"_"+r[1]).toUpperCase(),pascal:t=>(t[0].toUpperCase()+t.slice(1)).replace(/[^0-z]/g,""),camel:t=>t[0].toLowerCase()+t.slice(1),header:t=>t[0].toUpperCase()+t.slice(1).replace(/[^0-z]/g,"").replace(/[a-z][A-Z]|[0-9][A-Z]/g,n=>n[0]+"-"+n[1]),eth2:t=>e.Case.snake(t).replace(/(\d)$/,"_$1")}})(pg);Object.defineProperty(Ht,"__esModule",{value:!0});Ht.renderContainerTypeName=Ht.precomputeJsonKey=Ht.ContainerType=void 0;const Pr=fe,Uv=ae,Vv=Ue,jv=Oe,Fv=ys,Hv=ps,qv=pg;class cl extends jv.CompositeType{constructor(t,r){super(r?.cachePermanentRootStruct),this.fields=t,this.opts=r,this.isList=!1,this.isViewMutable=!0,this.typeName=r?.typeName??bg(t),this.maxChunkCount=Object.keys(t).length,this.depth=Uv.maxChunksToDepth(this.maxChunkCount),this.fieldsEntries=[];for(const u of Object.keys(t))this.fieldsEntries.push({fieldName:u,fieldType:this.fields[u],jsonKey:_g(u,r?.casingMap,r?.jsonCase),gindex:Pr.toGindex(this.depth,BigInt(this.fieldsEntries.length))});if(this.fieldsEntries.length===0)throw Error("Container must have > 0 fields");this.fieldsGindex={};for(let u=0;u<this.fieldsEntries.length;u++)this.fieldsGindex[this.fieldsEntries[u].fieldName]=Pr.toGindex(this.depth,BigInt(u));this.jsonKeyToFieldName={};for(const{fieldName:u,jsonKey:b}of this.fieldsEntries)this.jsonKeyToFieldName[b]=u;const{minLen:n,maxLen:i,fixedSize:o}=Zv(t);this.minSize=n,this.maxSize=i,this.fixedSize=o;const{isFixedLen:s,fieldRangesFixedLen:a,variableOffsetsPosition:f,fixedEnd:l}=Wv(t);this.isFixedLen=s,this.fieldRangesFixedLen=a,this.variableOffsetsPosition=f,this.fixedEnd=l,this.TreeView=r?.getContainerTreeViewClass?.(this)??Fv.getContainerTreeViewClass(this),this.TreeViewDU=r?.getContainerTreeViewDUClass?.(this)??Hv.getContainerTreeViewDUClass(this)}static named(t,r){return new(Vv.namedClass(cl,r.typeName))(t,r)}defaultValue(){const t={};for(const{fieldName:r,fieldType:n}of this.fieldsEntries)t[r]=n.defaultValue();return t}getView(t){return new this.TreeView(this,t)}getViewDU(t,r){return new this.TreeViewDU(this,t,r)}cacheOfViewDU(t){return t.cache}commitView(t){return t.node}commitViewDU(t){return t.commit(),t.node}value_serializedSize(t){let r=0;for(let n=0;n<this.fieldsEntries.length;n++){const{fieldName:i,fieldType:o}=this.fieldsEntries[n];r+=o.fixedSize===null?4+o.value_serializedSize(t[i]):o.fixedSize}return r}value_serializeToBytes(t,r,n){let i=r,o=r+this.fixedEnd;for(let s=0;s<this.fieldsEntries.length;s++){const{fieldName:a,fieldType:f}=this.fieldsEntries[s];f.fixedSize===null?(t.dataView.setUint32(i,o-r,!0),i+=4,o=f.value_serializeToBytes(t,o,n[a])):i=f.value_serializeToBytes(t,i,n[a])}return o}value_deserializeFromBytes(t,r,n){const i=this.getFieldRanges(t.dataView,r,n),o={};for(let s=0;s<this.fieldsEntries.length;s++){const{fieldName:a,fieldType:f}=this.fieldsEntries[s],l=i[s];o[a]=f.value_deserializeFromBytes(t,r+l.start,r+l.end)}return o}tree_serializedSize(t){let r=0;const n=Pr.getNodesAtDepth(t,this.depth,0,this.fieldsEntries.length);for(let i=0;i<this.fieldsEntries.length;i++){const{fieldType:o}=this.fieldsEntries[i],s=n[i];r+=o.fixedSize===null?4+o.tree_serializedSize(s):o.fixedSize}return r}tree_serializeToBytes(t,r,n){let i=r,o=r+this.fixedEnd;const s=Pr.getNodesAtDepth(n,this.depth,0,this.fieldsEntries.length);for(let a=0;a<this.fieldsEntries.length;a++){const{fieldType:f}=this.fieldsEntries[a],l=s[a];f.fixedSize===null?(t.dataView.setUint32(i,o-r,!0),i+=4,o=f.tree_serializeToBytes(t,o,l)):i=f.tree_serializeToBytes(t,i,l)}return o}tree_deserializeFromBytes(t,r,n){const i=this.getFieldRanges(t.dataView,r,n),o=new Array(this.fieldsEntries.length);for(let s=0;s<this.fieldsEntries.length;s++){const{fieldType:a}=this.fieldsEntries[s],f=i[s];o[s]=a.tree_deserializeFromBytes(t,r+f.start,r+f.end)}return Pr.subtreeFillToContents(o,this.depth)}getRoots(t){const r=new Array(this.fieldsEntries.length);for(let n=0;n<this.fieldsEntries.length;n++){const{fieldName:i,fieldType:o}=this.fieldsEntries[n];r[n]=o.hashTreeRoot(t[i])}return r}getPropertyGindex(t){const r=this.fieldsGindex[t]??this.fieldsGindex[this.jsonKeyToFieldName[t]];if(r===void 0)throw Error(`Unknown container property ${t}`);return r}getPropertyType(t){const r=this.fields[t]??this.fields[this.jsonKeyToFieldName[t]];if(r===void 0)throw Error(`Unknown container property ${t}`);return r}getIndexProperty(t){return t>=this.fieldsEntries.length?null:this.fieldsEntries[t].fieldName}tree_getLeafGindices(t,r){const n=[];for(let i=0;i<this.fieldsEntries.length;i++){const{fieldName:o,fieldType:s}=this.fieldsEntries[i],a=this.fieldsGindex[o],f=Pr.concatGindices([t,a]);if(s.isBasic)n.push(f);else{const l=s;if(s.fixedSize===null){if(!r)throw new Error("variable type requires tree argument to get leaves");n.push(...l.tree_getLeafGindices(f,Pr.getNode(r,a)))}else n.push(...l.tree_getLeafGindices(f))}}return n}fromJson(t){if(typeof t!="object")throw Error("JSON must be of type object");if(t===null)throw Error("JSON must not be null");const r={};for(let n=0;n<this.fieldsEntries.length;n++){const{fieldName:i,fieldType:o,jsonKey:s}=this.fieldsEntries[n],a=t[s];if(a===void 0)throw Error(`JSON expected key ${s} is undefined`);r[i]=o.fromJson(a)}return r}toJson(t){const r={};for(let n=0;n<this.fieldsEntries.length;n++){const{fieldName:i,fieldType:o,jsonKey:s}=this.fieldsEntries[n];r[s]=o.toJson(t[i])}return r}clone(t){const r={};for(let n=0;n<this.fieldsEntries.length;n++){const{fieldName:i,fieldType:o}=this.fieldsEntries[n];r[i]=o.clone(t[i])}return r}equals(t,r){for(let n=0;n<this.fieldsEntries.length;n++){const{fieldName:i,fieldType:o}=this.fieldsEntries[n];if(!o.equals(t[i],r[i]))return!1}return!0}getFieldRanges(t,r,n){if(this.variableOffsetsPosition.length===0){const f=n-r;if(f!==this.fixedEnd)throw Error(`${this.typeName} size ${f} not equal fixed size ${this.fixedEnd}`);return this.fieldRangesFixedLen}const i=Gv(t,r,n,this.fixedEnd,this.variableOffsetsPosition);i.push(n-r);let o=0,s=0;const a=new Array(this.isFixedLen.length);for(let f=0;f<this.isFixedLen.length;f++)this.isFixedLen[f]?a[f]=this.fieldRangesFixedLen[s++]:(a[f]={start:i[o],end:i[o+1]},o++);return a}}Ht.ContainerType=cl;function Gv(e,t,r,n,i){const o=r-t,s=new Array(i.length);for(let a=0;a<i.length;a++){const f=e.getUint32(t+i[a],!0);if(f>o)throw new Error(`Offset out of bounds ${f} > ${o}`);if(a===0){if(f!==n)throw new Error(`First offset must equal to fixedEnd ${f} != ${n}`)}else if(f<s[a-1])throw new Error(`Offsets must be increasing ${f} < ${s[a-1]}`);s[a]=f}return s}function Wv(e){const t=[],r=[],n=[];let i=0;for(const o of Object.values(e))t.push(o.fixedSize!==null),o.fixedSize===null?(n.push(i),i+=4):(r.push({start:i,end:i+o.fixedSize}),i+=o.fixedSize);return{isFixedLen:t,fieldRangesFixedLen:r,variableOffsetsPosition:n,fixedEnd:i}}function Zv(e){let t=0,r=0,n=0;for(const i of Object.values(e))t+=i.minSize,r+=i.maxSize,i.fixedSize===null?(t+=4,r+=4,n=null):n!==null&&(n+=i.fixedSize);return{minLen:t,maxLen:r,fixedSize:n}}function _g(e,t,r){if(t){const n=t[e];if(n===void 0)throw Error(`casingMap[${e}] not defined`);return n}else return r?qv.Case[r](e):e}Ht.precomputeJsonKey=_g;function bg(e,t="Container"){const n=Object.keys(e).map(i=>`${i}: ${e[i].typeName}`).join(", ");return`${t}({${n}})`}Ht.renderContainerTypeName=bg;var _s={},bs={},Ri={};Object.defineProperty(Ri,"__esModule",{value:!0});Ri.BranchNodeStruct=void 0;const sc=fe;class Kv extends sc.Node{constructor(t,r){super(null,0,0,0,0,0,0,0),this.valueToNode=t,this.value=r}get rootHashObject(){if(this.h0===null){const t=this.valueToNode(this.value);super.applyHash(t.rootHashObject)}return this}get root(){return sc.hashObjectToUint8Array(this.rootHashObject)}isLeaf(){return!1}get left(){return this.valueToNode(this.value).left}get right(){return this.valueToNode(this.value).right}}Ri.BranchNodeStruct=Kv;Object.defineProperty(bs,"__esModule",{value:!0});bs.getContainerTreeViewClass=void 0;const Xv=Oe,ac=Ri,Yv=Ot;class Jv extends Yv.TreeView{constructor(t,r){super(),this.type=t,this.tree=r}get node(){return this.tree.rootNode}}function Qv(e){class t extends Jv{}for(let r=0;r<e.fieldsEntries.length;r++){const{fieldName:n,fieldType:i}=e.fieldsEntries[r];if(i.isBasic)Object.defineProperty(t.prototype,n,{configurable:!1,enumerable:!0,get:function(){return this.tree.rootNode.value[n]},set:function(o){const s=this.tree.rootNode,a=this.type.clone(s.value);a[n]=o,this.tree.rootNode=new ac.BranchNodeStruct(s.valueToNode,a)}});else if(Xv.isCompositeType(i))Object.defineProperty(t.prototype,n,{configurable:!1,enumerable:!0,get:function(){const{value:o}=this.tree.rootNode;return i.toView(o[n])},set:function(o){const s=this.tree.rootNode,a=this.type.clone(s.value);a[n]=i.toValueFromView(o),this.tree.rootNode=new ac.BranchNodeStruct(s.valueToNode,a)}});else throw Error(`Unknown fieldType ${i.typeName} for fieldName ${n}`)}return Object.defineProperty(t,"name",{value:e.typeName,writable:!1}),t}bs.getContainerTreeViewClass=Qv;var ws={};Object.defineProperty(ws,"__esModule",{value:!0});ws.getContainerTreeViewDUClass=void 0;const eE=Oe,tE=Xt;class rE extends tE.TreeViewDU{constructor(t,r){super(),this.type=t,this.valueChanged=null,this._rootNode=r}get node(){return this._rootNode}get cache(){}commit(){if(this.valueChanged===null)return;const t=this.valueChanged;this.valueChanged=null,this._rootNode=this.type.value_toTree(t)}clearCache(){this.valueChanged=null}}function nE(e){class t extends rE{}for(let r=0;r<e.fieldsEntries.length;r++){const{fieldName:n,fieldType:i}=e.fieldsEntries[r];if(i.isBasic)Object.defineProperty(t.prototype,n,{configurable:!1,enumerable:!0,get:function(){return(this.valueChanged||this._rootNode.value)[n]},set:function(o){this.valueChanged===null&&(this.valueChanged=this.type.clone(this._rootNode.value)),this.valueChanged[n]=o}});else if(eE.isCompositeType(i))Object.defineProperty(t.prototype,n,{configurable:!1,enumerable:!0,get:function(){const o=this.valueChanged||this._rootNode.value;return i.toViewDU(o[n])},set:function(o){this.valueChanged===null&&(this.valueChanged=this.type.clone(this._rootNode.value));const s=i.toValueFromViewDU(o);this.valueChanged[n]=s}});else throw Error(`Unknown fieldType ${i.typeName} for fieldName ${n}`)}return Object.defineProperty(t,"name",{value:e.typeName,writable:!1}),t}ws.getContainerTreeViewDUClass=nE;Object.defineProperty(_s,"__esModule",{value:!0});_s.ContainerNodeStructType=void 0;const iE=Oe,ba=Ht,oE=Ue,sE=bs,aE=ws,wa=Ri;class fE extends ba.ContainerType{constructor(t,r){super(t,{typeName:r?.typeName??ba.renderContainerTypeName(t,"ContainerNodeStruct"),...r,getContainerTreeViewClass:sE.getContainerTreeViewClass,getContainerTreeViewDUClass:aE.getContainerTreeViewDUClass}),this.fields=t;for(const{fieldName:n,fieldType:i}of this.fieldsEntries)if(iE.isCompositeType(i)&&i.isViewMutable)throw Error(`ContainerNodeStructType field '${n}' ${i.typeName} view is mutable`)}static named(t,r){return new(oE.namedClass(ba.ContainerType,r.typeName))(t,r)}tree_serializedSize(t){return this.value_serializedSize(t.value)}tree_serializeToBytes(t,r,n){const{value:i}=n;return this.value_serializeToBytes(t,r,i)}tree_deserializeFromBytes(t,r,n){const i=this.value_deserializeFromBytes(t,r,n);return new wa.BranchNodeStruct(this.valueToTree.bind(this),i)}getPropertyGindex(){return null}tree_fromProofNode(t){const r=new Uint8Array(super.tree_serializedSize(t)),n=new DataView(r.buffer,r.byteOffset,r.byteLength);super.tree_serializeToBytes({uint8Array:r,dataView:n},0,t);const i=this.value_deserializeFromBytes({uint8Array:r,dataView:n},0,r.length);return{node:new wa.BranchNodeStruct(this.valueToTree.bind(this),i),done:!0}}tree_toValue(t){return t.value}value_toTree(t){return new wa.BranchNodeStruct(this.valueToTree.bind(this),t)}valueToTree(t){const r=new Uint8Array(this.value_serializedSize(t)),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return this.value_serializeToBytes({uint8Array:r,dataView:n},0,t),super.tree_deserializeFromBytes({uint8Array:r,dataView:n},0,r.length)}}_s.ContainerNodeStructType=fE;var ms={},vs={},Ii={};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.ArrayBasicTreeView=void 0;const lE=fe,uE=Ot;class cE extends uE.TreeView{constructor(t,r){super(),this.type=t,this.tree=r}get length(){return this.type.tree_getLength(this.tree.rootNode)}get node(){return this.tree.rootNode}get(t){const r=Math.floor(t/this.type.itemsPerChunk),n=this.tree.getNodeAtDepth(this.type.depth,r);return this.type.elementType.tree_getFromPackedNode(n,t)}set(t,r){const n=this.length;if(t>=n)throw Error(`Error setting index over length ${t} > ${n}`);const i=Math.floor(t/this.type.itemsPerChunk),s=this.tree.getNodeAtDepth(this.type.depth,i).clone();this.type.elementType.tree_setToPackedNode(s,t,r),this.tree.setNodeAtDepth(this.type.depth,i,s)}getAll(){const t=this.length,r=this.type.tree_getChunksNode(this.node),n=Math.ceil(t/this.type.itemsPerChunk),i=lE.getNodesAtDepth(r,this.type.chunkDepth,0,n),o=new Array(t),s=this.type.itemsPerChunk,a=Math.floor(t/s),f=t%s;for(let l=0;l<a;l++){const u=i[l];for(let b=0;b<s;b++)o[l*s+b]=this.type.elementType.tree_getFromPackedNode(u,b)}if(f>0){const l=i[a];for(let u=0;u<f;u++)o[a*s+u]=this.type.elementType.tree_getFromPackedNode(l,u)}return o}}Ii.ArrayBasicTreeView=cE;Object.defineProperty(vs,"__esModule",{value:!0});vs.ListBasicTreeView=void 0;const dE=fe,hE=Ii;class gE extends hE.ArrayBasicTreeView{constructor(t,r){super(t,r),this.type=t,this.tree=r}push(t){const r=this.length;if(r>=this.type.limit)throw Error("Error pushing over limit");if(this.type.tree_setLength(this.tree,r+1),r%this.type.itemsPerChunk===0){const n=dE.LeafNode.fromZero();this.type.elementType.tree_setToPackedNode(n,r,t);const i=Math.floor(r/this.type.itemsPerChunk);this.tree.setNodeAtDepth(this.type.depth,i,n)}else this.set(r,t)}}vs.ListBasicTreeView=gE;var Es={},Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.ArrayBasicTreeViewDU=void 0;const qi=fe,yE=Xt;class pE extends yE.TreeViewDU{constructor(t,r,n){super(),this.type=t,this._rootNode=r,this.nodesChanged=new Set,this.dirtyLength=!1,n?(this.nodes=n.nodes,this._length=n.length,this.nodesPopulated=n.nodesPopulated):(this.nodes=[],this._length=this.type.tree_getLength(r),this.nodesPopulated=!1)}get length(){return this._length}get node(){return this._rootNode}get cache(){return{nodes:this.nodes,length:this._length,nodesPopulated:this.nodesPopulated}}get(t){const r=Math.floor(t/this.type.itemsPerChunk);let n=this.nodes[r];return n===void 0&&(n=qi.getNodeAtDepth(this._rootNode,this.type.depth,r),this.nodes[r]=n),this.type.elementType.tree_getFromPackedNode(n,t)}set(t,r){if(t>=this._length)throw Error(`Error setting index over length ${t} > ${this._length}`);const n=Math.floor(t/this.type.itemsPerChunk);let i;this.nodesChanged.has(n)?i=this.nodes[n]:(i=(this.nodes[n]??qi.getNodeAtDepth(this._rootNode,this.type.depth,n)).clone(),this.nodes[n]=i,this.nodesChanged.add(n)),this.type.elementType.tree_setToPackedNode(i,t,r)}getAll(){if(!this.nodesPopulated){const o=this.nodes,s=this.type.tree_getChunksNode(this.node),a=Math.ceil(this._length/this.type.itemsPerChunk);this.nodes=qi.getNodesAtDepth(s,this.type.chunkDepth,0,a);for(const f of this.nodesChanged)this.nodes[f]=o[f];this.nodesPopulated=!0}const t=new Array(this._length),r=this.type.itemsPerChunk,n=Math.floor(this._length/r),i=this._length%r;for(let o=0;o<n;o++){const s=this.nodes[o];for(let a=0;a<r;a++)t[o*r+a]=this.type.elementType.tree_getFromPackedNode(s,a)}if(i>0){const o=this.nodes[n];for(let s=0;s<i;s++)t[n*r+s]=this.type.elementType.tree_getFromPackedNode(o,s)}return t}commit(){if(this.nodesChanged.size===0)return;const t=Array.from(this.nodesChanged.keys()).sort((o,s)=>o-s),r=new Array(t.length);for(let o=0;o<t.length;o++)r[o]=this.nodes[t[o]];const n=this.type.tree_getChunksNode(this._rootNode),i=qi.setNodesAtDepth(n,this.type.chunkDepth,t,r);this._rootNode=this.type.tree_setChunksNode(this._rootNode,i,this.dirtyLength?this._length:void 0),this.nodesChanged.clear(),this.dirtyLength=!1}clearCache(){this.nodes=[],this.nodesPopulated=!1,this.nodesChanged.clear(),this.dirtyLength&&(this._length=this.type.tree_getLength(this._rootNode),this.dirtyLength=!1)}}Oi.ArrayBasicTreeViewDU=pE;Object.defineProperty(Es,"__esModule",{value:!0});Es.ListBasicTreeViewDU=void 0;const _E=fe,bE=Oi;class wE extends bE.ArrayBasicTreeViewDU{constructor(t,r,n){super(t,r,n),this.type=t,this._rootNode=r}push(t){if(this._length>=this.type.limit)throw Error("Error pushing over limit");this.dirtyLength=!0;const r=this._length++;if(r%this.type.itemsPerChunk===0){const n=Math.floor(r/this.type.itemsPerChunk);this.nodes[n]=_E.zeroNode(0)}this.set(r,t)}}Es.ListBasicTreeViewDU=wE;var Rr={};Object.defineProperty(Rr,"__esModule",{value:!0});Rr.ArrayType=void 0;const kr=fe,ma=Oe,Kn=te;class mE extends ma.CompositeType{constructor(t){super(),this.elementType=t}defaultValue(){return Kn.value_defaultValueArray(this.elementType,this.defaultLen)}getPropertyType(){return this.elementType}getPropertyGindex(t){if(typeof t!="number")throw Error(`Invalid array index: ${t}`);const r=Math.floor(t/this.itemsPerChunk);return kr.toGindex(this.depth,BigInt(r))}getIndexProperty(t){return t}tree_getLeafGindices(t,r){let n;if(this.isList){if(!r)throw new Error("List type requires tree argument to get leaves");n=this.tree_getLength(r)}else n=this.tree_getLength(null);const i=[];if(ma.isCompositeType(this.elementType)){const o=kr.toGindex(this.depth,BigInt(0)),s=o+BigInt(n),a=kr.concatGindices([t,o]);if(this.elementType.fixedSize===null){if(!r)throw new Error("Array of variable size requires tree argument to get leaves");for(let f=o,l=a;f<s;f++,l++)i.push(...this.elementType.tree_getLeafGindices(l,kr.getNode(r,f)))}else for(let f=0,l=a;f<n;f++,l++)i.push(...this.elementType.tree_getLeafGindices(l))}else{const o=Math.ceil(n/this.itemsPerChunk),s=kr.concatGindices([t,kr.toGindex(this.depth,BigInt(0))]),a=s+BigInt(o);for(let f=s;f<a;f++)i.push(f)}return this.isList&&i.push(kr.concatGindices([t,ma.LENGTH_GINDEX])),i}fromJson(t){return Kn.value_fromJsonArray(this.elementType,t,this)}toJson(t){return Kn.value_toJsonArray(this.elementType,t,this)}clone(t){return Kn.value_cloneArray(this.elementType,t)}equals(t,r){return Kn.value_equals(this.elementType,t,r)}}Rr.ArrayType=mE;Object.defineProperty(ms,"__esModule",{value:!0});ms.ListBasicType=void 0;const zr=te,va=ae,vE=Ue,EE=vs,TE=Es,SE=Rr;class dl extends SE.ArrayType{constructor(t,r,n){if(super(t),this.elementType=t,this.limit=r,this.fixedSize=null,this.isList=!0,this.isViewMutable=!0,this.defaultLen=0,!t.isBasic)throw Error("elementType must be basic");if(r===0)throw Error("List limit must be > 0");this.typeName=n?.typeName??`List[${t.typeName}, ${r}]`,this.itemsPerChunk=32/t.byteLength,this.maxChunkCount=Math.ceil(this.limit*t.byteLength/32),this.chunkDepth=va.maxChunksToDepth(this.maxChunkCount),this.depth=this.chunkDepth+1,this.minSize=0,this.maxSize=this.limit*t.maxSize}static named(t,r,n){return new(vE.namedClass(dl,n.typeName))(t,r,n)}getView(t){return new EE.ListBasicTreeView(this,t)}getViewDU(t,r){return new TE.ListBasicTreeViewDU(this,t,r)}commitView(t){return t.node}commitViewDU(t){return t.commit(),t.node}cacheOfViewDU(t){return t.cache}value_serializedSize(t){return t.length*this.elementType.byteLength}value_serializeToBytes(t,r,n){return zr.value_serializeToBytesArrayBasic(this.elementType,n.length,t,r,n)}value_deserializeFromBytes(t,r,n){return zr.value_deserializeFromBytesArrayBasic(this.elementType,t,r,n,this)}tree_serializedSize(t){return this.tree_getLength(t)*this.elementType.byteLength}tree_serializeToBytes(t,r,n){const i=this.tree_getChunksNode(n),o=this.tree_getLength(n);return zr.tree_serializeToBytesArrayBasic(this.elementType,o,this.chunkDepth,t,r,i)}tree_deserializeFromBytes(t,r,n){return zr.tree_deserializeFromBytesArrayBasic(this.elementType,this.chunkDepth,t,r,n,this)}tree_getLength(t){return t.right.getUint(4,0)}tree_setLength(t,r){t.rootNode=zr.addLengthNode(t.rootNode.left,r)}tree_getChunksNode(t){return t.left}tree_setChunksNode(t,r,n){return zr.setChunksNode(t,r,n)}hashTreeRoot(t){return va.mixInLength(super.hashTreeRoot(t),t.length)}getRoots(t){const r=new Uint8Array(this.value_serializedSize(t)),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return zr.value_serializeToBytesArrayBasic(this.elementType,t.length,{uint8Array:r,dataView:n},0,t),va.splitIntoRootChunks(r)}}ms.ListBasicType=dl;var Ts={},me={};Object.defineProperty(me,"__esModule",{value:!0});me.value_getRootsArrayComposite=me.tree_deserializeFromBytesArrayComposite=me.tree_serializeToBytesArrayComposite=me.tree_serializedSizeArrayComposite=me.value_deserializeFromBytesArrayComposite=me.value_serializeToBytesArrayComposite=me.value_serializedSizeArrayComposite=me.maxSizeArrayComposite=me.minSizeArrayComposite=void 0;const hl=fe,wg=te;function AE(e,t){return e.fixedSize===null?t*(4+e.minSize):t*e.minSize}me.minSizeArrayComposite=AE;function NE(e,t){return e.fixedSize===null?t*(4+e.maxSize):t*e.maxSize}me.maxSizeArrayComposite=NE;function BE(e,t,r){if(e.fixedSize===null){let n=0;for(let i=0;i<t;i++)n+=4+e.value_serializedSize(r[i]);return n}else return t*e.fixedSize}me.value_serializedSizeArrayComposite=BE;function xE(e,t,r,n,i){if(e.fixedSize===null){let o=n+t*4;for(let s=0;s<t;s++)r.dataView.setUint32(n+s*4,o-n,!0),o=e.value_serializeToBytes(r,o,i[s]);return o}else{for(let o=0;o<t;o++)e.value_serializeToBytes(r,n+o*e.fixedSize,i[o]);return n+t*e.fixedSize}}me.value_serializeToBytesArrayComposite=xE;function RE(e,t,r,n,i){const o=mg(e.fixedSize,t.dataView,r,n,i),s=o.length,a=new Array(s);for(let f=0;f<s;f++){const l=r+o[f],u=f===s-1?n:r+o[f+1];a[f]=e.value_deserializeFromBytes(t,l,u)}return a}me.value_deserializeFromBytesArrayComposite=RE;function IE(e,t,r,n){if(e.fixedSize===null){const i=hl.getNodesAtDepth(n,r,0,t);let o=0;for(let s=0;s<i.length;s++)o+=4+e.tree_serializedSize(i[s]);return o}else return t*e.fixedSize}me.tree_serializedSizeArrayComposite=IE;function OE(e,t,r,n,i,o){const s=hl.getNodesAtDepth(n,r,0,t);if(e.fixedSize===null){let a=o+t*4;const{dataView:f}=i;for(let l=0;l<s.length;l++)f.setUint32(o+l*4,a-o,!0),a=e.tree_serializeToBytes(i,a,s[l]);return a}else{for(let a=0;a<s.length;a++)o=e.tree_serializeToBytes(i,o,s[a]);return o}}me.tree_serializeToBytesArrayComposite=OE;function CE(e,t,r,n,i,o){const s=mg(e.fixedSize,r.dataView,n,i,o),a=s.length,f=new Array(a);for(let u=0;u<a;u++){const b=n+s[u],p=u===a-1?i:n+s[u+1];f[u]=e.tree_deserializeFromBytes(r,b,p)}const l=hl.subtreeFillToContents(f,t);return o.isList?wg.addLengthNode(l,a):l}me.tree_deserializeFromBytesArrayComposite=CE;function LE(e,t,r){const n=new Array(t);for(let i=0;i<t;i++)n[i]=e.hashTreeRoot(r[i]);return n}me.value_getRootsArrayComposite=LE;function mg(e,t,r,n,i){const o=n-r;let s;if(e===null)s=PE(t,r,o);else{if(e===0)throw Error("element fixed length is 0");if(o%e!==0)throw Error(`size ${o} is not multiple of element fixedSize ${e}`);const a=o/e;s=new Uint32Array(a);for(let f=0;f<a;f++)s[f]=f*e}return wg.assertValidArrayLength(s.length,i),s}function PE(e,t,r){if(r===0)return new Uint32Array(0);const n=e.getUint32(t,!0),i=n;if(n===0)throw Error("First offset must be > 0");if(i%4!==0)throw Error("Offset data length not multiple of 4");const o=i/4,s=new Uint32Array(o);s[0]=n;for(let a=1;a<o;a++){const f=e.getUint32(t+a*4,!0);if(s[a]=f,f>r)throw new Error(`Offset out of bounds ${f} > ${r}`);if(f<s[a-1])throw new Error(`Offsets must be increasing ${f} < ${s[a-1]}`)}return s}var Ss={},Ci={};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.ArrayCompositeTreeView=void 0;const un=fe,kE=Ot;class zE extends kE.TreeView{constructor(t,r){super(),this.type=t,this.tree=r}get length(){return this.type.tree_getLength(this.tree.rootNode)}get node(){return this.tree.rootNode}get(t){const r=un.toGindexBitstring(this.type.depth,t),n=this.tree.getSubtree(r);return this.type.elementType.getView(n)}getReadonly(t){const r=un.toGindexBitstring(this.type.depth,t),n=new un.Tree(this.tree.getNode(r));return this.type.elementType.getView(n)}set(t,r){const n=this.length;if(t>=n)throw Error(`Error setting index over length ${t} > ${n}`);const i=this.type.elementType.commitView(r);this.tree.setNodeAtDepth(this.type.depth,t,i)}getAllReadonly(){const t=this.length,r=this.type.tree_getChunksNode(this.node),n=un.getNodesAtDepth(r,this.type.chunkDepth,0,t),i=new Array(t);for(let o=0;o<t;o++)i[o]=this.type.elementType.getView(new un.Tree(n[o]));return i}getAllReadonlyValues(){const t=this.length,r=this.type.tree_getChunksNode(this.node),n=un.getNodesAtDepth(r,this.type.chunkDepth,0,t),i=new Array(t);for(let o=0;o<t;o++)i[o]=this.type.elementType.tree_toValue(n[o]);return i}}Ci.ArrayCompositeTreeView=zE;Object.defineProperty(Ss,"__esModule",{value:!0});Ss.ListCompositeTreeView=void 0;const $E=Ci;class DE extends $E.ArrayCompositeTreeView{constructor(t,r){super(t,r),this.type=t,this.tree=r}push(t){const r=this.length;if(r>=this.type.limit)throw Error("Error pushing over limit");this.type.tree_setLength(this.tree,r+1),this.set(r,t)}}Ss.ListCompositeTreeView=DE;var As={},Li={};Object.defineProperty(Li,"__esModule",{value:!0});Li.ArrayCompositeTreeViewDU=void 0;const Gi=fe,ME=Xt;class UE extends ME.TreeViewDU{constructor(t,r,n){super(),this.type=t,this._rootNode=r,this.viewsChanged=new Map,this.dirtyLength=!1,n?(this.nodes=n.nodes,this.caches=n.caches,this._length=n.length,this.nodesPopulated=n.nodesPopulated):(this.nodes=[],this.caches=[],this._length=this.type.tree_getLength(r),this.nodesPopulated=this._length===0)}get length(){return this._length}get node(){return this._rootNode}get cache(){return{nodes:this.nodes,caches:this.caches,length:this._length,nodesPopulated:this.nodesPopulated}}get(t){const r=this.viewsChanged.get(t);if(r)return r;let n=this.nodes[t];n===void 0&&(n=Gi.getNodeAtDepth(this._rootNode,this.type.depth,t),this.nodes[t]=n);const i=this.type.elementType.getViewDU(n,this.caches[t]);return this.type.elementType.isViewMutable&&this.viewsChanged.set(t,i),i}getReadonly(t){const r=this.viewsChanged.get(t);if(r)return r;let n=this.nodes[t];return n===void 0&&(n=Gi.getNodeAtDepth(this._rootNode,this.type.depth,t),this.nodes[t]=n),this.type.elementType.getViewDU(n,this.caches[t])}set(t,r){if(t>=this._length)throw Error(`Error setting index over length ${t} > ${this._length}`);this.viewsChanged.set(t,r)}getAllReadonly(){this.populateAllNodes();const t=new Array(this._length);for(let r=0;r<this._length;r++)t[r]=this.type.elementType.getViewDU(this.nodes[r],this.caches[r]);return t}getAllReadonlyValues(){this.populateAllNodes();const t=new Array(this._length);for(let r=0;r<this._length;r++)t[r]=this.type.elementType.tree_toValue(this.nodes[r]);return t}commit(){if(this.viewsChanged.size===0)return;const t=[];for(const[a,f]of this.viewsChanged){const l=this.type.elementType.commitViewDU(f);this.nodes[a]=l,t.push({index:a,node:l});const u=this.type.elementType.cacheOfViewDU(f);u&&(this.caches[a]=u)}const r=t.sort((a,f)=>a.index-f.index),n=r.map(a=>a.index),i=r.map(a=>a.node),o=this.type.tree_getChunksNode(this._rootNode),s=Gi.setNodesAtDepth(o,this.type.chunkDepth,n,i);this._rootNode=this.type.tree_setChunksNode(this._rootNode,s,this.dirtyLength?this._length:void 0),this.viewsChanged.clear(),this.dirtyLength=!1}clearCache(){this.nodes=[],this.caches=[],this.nodesPopulated=!1,this.viewsChanged.clear(),this.dirtyLength&&(this._length=this.type.tree_getLength(this._rootNode),this.dirtyLength=!1)}populateAllNodes(){if(this.viewsChanged.size>0)throw Error("Must commit changes before reading all nodes");this.nodesPopulated||(this.nodes=Gi.getNodesAtDepth(this._rootNode,this.type.depth,0,this.length),this.nodesPopulated=!0)}}Li.ArrayCompositeTreeViewDU=UE;Object.defineProperty(As,"__esModule",{value:!0});As.ListCompositeTreeViewDU=void 0;const VE=fe,jE=Li;class FE extends jE.ArrayCompositeTreeViewDU{constructor(t,r,n){super(t,r,n),this.type=t,this._rootNode=r}push(t){if(this._length>=this.type.limit)throw Error("Error pushing over limit");this.dirtyLength=!0;const r=this._length++;this.set(r,t)}sliceTo(t){this.commit();const r=this._rootNode,n=this.type.tree_getLength(r);if(t>=n-1)return this;const i=this.type.tree_getChunksNode(r),o=VE.treeZeroAfterIndex(i,this.type.chunkDepth,t),s=t+1,a=this.type.tree_setChunksNode(r,o,s);return this.type.getViewDU(a)}}As.ListCompositeTreeViewDU=FE;Object.defineProperty(Ts,"__esModule",{value:!0});Ts.ListCompositeType=void 0;const fc=ae,HE=Ue,Ea=te,Qt=me,qE=Ss,GE=As,WE=Rr;class gl extends WE.ArrayType{constructor(t,r,n){if(super(t),this.elementType=t,this.limit=r,this.itemsPerChunk=1,this.fixedSize=null,this.isList=!0,this.isViewMutable=!0,this.defaultLen=0,t.isBasic)throw Error("elementType must not be basic");if(r===0)throw Error("List limit must be > 0");this.typeName=n?.typeName??`List[${t.typeName}, ${r}]`,this.maxChunkCount=this.limit,this.chunkDepth=fc.maxChunksToDepth(this.maxChunkCount),this.depth=this.chunkDepth+1,this.minSize=0,this.maxSize=Qt.maxSizeArrayComposite(t,this.limit)}static named(t,r,n){return new(HE.namedClass(gl,n.typeName))(t,r,n)}getView(t){return new qE.ListCompositeTreeView(this,t)}getViewDU(t,r){return new GE.ListCompositeTreeViewDU(this,t,r)}commitView(t){return t.node}commitViewDU(t){return t.commit(),t.node}cacheOfViewDU(t){return t.cache}value_serializedSize(t){return Qt.value_serializedSizeArrayComposite(this.elementType,t.length,t)}value_serializeToBytes(t,r,n){return Qt.value_serializeToBytesArrayComposite(this.elementType,n.length,t,r,n)}value_deserializeFromBytes(t,r,n){return Qt.value_deserializeFromBytesArrayComposite(this.elementType,t,r,n,this)}tree_serializedSize(t){const r=this.tree_getChunksNode(t),n=this.tree_getLength(t);return Qt.tree_serializedSizeArrayComposite(this.elementType,n,this.chunkDepth,r)}tree_serializeToBytes(t,r,n){const i=this.tree_getChunksNode(n),o=this.tree_getLength(n);return Qt.tree_serializeToBytesArrayComposite(this.elementType,o,this.chunkDepth,i,t,r)}tree_deserializeFromBytes(t,r,n){return Qt.tree_deserializeFromBytesArrayComposite(this.elementType,this.chunkDepth,t,r,n,this)}tree_getLength(t){return Ea.getLengthFromRootNode(t)}tree_setLength(t,r){t.rootNode=Ea.addLengthNode(t.rootNode.left,r)}tree_getChunksNode(t){return t.left}tree_setChunksNode(t,r,n){return Ea.setChunksNode(t,r,n)}hashTreeRoot(t){return fc.mixInLength(super.hashTreeRoot(t),t.length)}getRoots(t){return Qt.value_getRootsArrayComposite(this.elementType,t.length,t)}}Ts.ListCompositeType=gl;var Pi={};Object.defineProperty(Pi,"__esModule",{value:!0});Pi.NoneType=void 0;const ZE=fe,KE=_t;class XE extends KE.BasicType{constructor(){super(...arguments),this.typeName="none",this.byteLength=0,this.itemsPerChunk=32,this.fixedSize=0,this.minSize=0,this.maxSize=0}defaultValue(){return null}value_serializeToBytes(t,r,n){return r}value_deserializeFromBytes(t,r){return null}tree_serializeToBytes(t,r,n){return r}tree_deserializeFromBytes(t,r,n){return ZE.zeroNode(0)}tree_getFromNode(t){return null}tree_setToNode(t,r){}tree_getFromPackedNode(t,r){return null}tree_setToPackedNode(t,r,n){}fromJson(t){if(t!==null)throw Error("JSON invalid type none must be null");return null}toJson(t){return null}}Pi.NoneType=XE;var Nt={};Object.defineProperty(Nt,"__esModule",{value:!0});Nt.UintBigintType=Nt.UintNumberType=Nt.uintBigintByteLens=Nt.uintNumberByteLens=void 0;const vg=fe,Eg=Ue,Tg=_t,YE=BigInt(Number.MAX_SAFE_INTEGER),Ta=BigInt(2)**BigInt(64),JE=BigInt(2)**BigInt(128),QE=BigInt(2)**BigInt(192),lc=2**32,uc=4294967295;Nt.uintNumberByteLens=[1,2,4,8];Nt.uintBigintByteLens=[1,2,4,8,16,32];class yl extends Tg.BasicType{constructor(t,r){if(super(),this.byteLength=t,t>8)throw Error("UintNumber byteLength limit is 8");if(Math.log2(t)%1!==0)throw Error("byteLength must be a power of 2");this.typeName=r?.typeName??`uint${t*8}`,r?.clipInfinity&&(this.typeName+="Inf"),r?.setBitwiseOR&&(this.typeName+="OR"),this.itemsPerChunk=32/this.byteLength,this.fixedSize=t,this.minSize=t,this.maxSize=t,this.maxDecimalStr=(BigInt(2)**BigInt(this.byteLength*8)-BigInt(1)).toString(10),this.clipInfinity=r?.clipInfinity===!0,this.setBitwiseOR=r?.setBitwiseOR===!0}static named(t,r){return new(Eg.namedClass(yl,r.typeName))(t,r)}defaultValue(){return 0}value_serializeToBytes({dataView:t},r,n){switch(this.byteLength){case 1:t.setInt8(r,n);break;case 2:t.setUint16(r,n,!0);break;case 4:t.setUint32(r,n,!0);break;case 8:n===1/0?(t.setUint32(r,4294967295),t.setUint32(r+4,4294967295)):(t.setUint32(r,n&4294967295,!0),t.setUint32(r+4,n/lc&4294967295,!0));break}return r+this.byteLength}value_deserializeFromBytes({dataView:t},r,n){switch(this.assertValidSize(n-r),this.byteLength){case 1:return t.getUint8(r);case 2:return t.getUint16(r,!0);case 4:return t.getUint32(r,!0);case 8:{const i=t.getUint32(r,!0),o=t.getUint32(r+4,!0);return o===uc&&i===uc&&this.clipInfinity?1/0:o*lc+i}}}tree_serializeToBytes(t,r,n){const i=n.getUint(this.byteLength,0,this.clipInfinity);return this.value_serializeToBytes(t,r,i),r+this.byteLength}tree_deserializeFromBytes(t,r,n){this.assertValidSize(n-r);const i=this.value_deserializeFromBytes(t,r,n),o=vg.LeafNode.fromZero();return o.setUint(this.byteLength,0,i,this.clipInfinity),o}tree_getFromNode(t){return t.getUint(this.byteLength,0,this.clipInfinity)}tree_setToNode(t,r){this.tree_setToPackedNode(t,0,r)}tree_getFromPackedNode(t,r){const n=this.byteLength*(r%this.itemsPerChunk);return t.getUint(this.byteLength,n,this.clipInfinity)}tree_setToPackedNode(t,r,n){const i=this.byteLength*(r%this.itemsPerChunk);this.setBitwiseOR?t.bitwiseOrUint(this.byteLength,i,n):t.setUint(this.byteLength,i,n,this.clipInfinity)}fromJson(t){if(typeof t=="number")return t;if(typeof t=="string"){if(this.clipInfinity&&t===this.maxDecimalStr)return 1/0;{const r=parseInt(t,10);if(isNaN(r))throw Error("JSON invalid number isNaN");if(r>Number.MAX_SAFE_INTEGER)throw Error("JSON invalid number > MAX_SAFE_INTEGER");return r}}else if(typeof t=="bigint"){if(t>YE)throw Error("JSON invalid number > MAX_SAFE_INTEGER_BN");return Number(t)}else throw Error(`JSON invalid type ${typeof t} expected number`)}toJson(t){return t===1/0?this.maxDecimalStr:t.toString(10)}}Nt.UintNumberType=yl;class pl extends Tg.BasicType{constructor(t,r){if(super(),this.byteLength=t,t>32)throw Error("UintBigint byteLength limit is 32");if(Math.log2(t)%1!==0)throw Error("byteLength must be a power of 2");this.typeName=r?.typeName??`uintBigint${t*8}`,this.byteLength=t,this.itemsPerChunk=32/this.byteLength,this.fixedSize=t,this.minSize=t,this.maxSize=t}static named(t,r){return new(Eg.namedClass(pl,r.typeName))(t,r)}defaultValue(){return BigInt(0)}value_serializeToBytes({dataView:t},r,n){switch(this.byteLength){case 1:t.setInt8(r,Number(n));break;case 2:t.setUint16(r,Number(n),!0);break;case 4:t.setUint32(r,Number(n),!0);break;case 8:t.setBigUint64(r,n,!0);break;default:for(let i=0;i<this.byteLength;i+=8){i>0&&(n=n/Ta);const o=BigInt.asUintN(64,n);t.setBigUint64(r+i,o,!0)}}return r+this.byteLength}value_deserializeFromBytes({dataView:t},r,n){const i=n-r;if(i!==this.byteLength)throw Error(`Invalid size ${i} expected ${this.byteLength}`);switch(this.byteLength){case 1:return BigInt(t.getUint8(r));case 2:return BigInt(t.getUint16(r,!0));case 4:return BigInt(t.getUint32(r,!0));case 8:return t.getBigUint64(r,!0);case 16:{const o=t.getBigUint64(r,!0);return t.getBigUint64(r+8,!0)*Ta+o}case 32:{const o=t.getBigUint64(r,!0),s=t.getBigUint64(r+8,!0),a=t.getBigUint64(r+16,!0);return t.getBigUint64(r+24,!0)*QE+a*JE+s*Ta+o}}}tree_serializeToBytes(t,r,n){const i=n.getUintBigint(this.byteLength,0);return this.value_serializeToBytes(t,r,i),r+this.byteLength}tree_deserializeFromBytes(t,r,n){const i=n-r;if(i!==this.byteLength)throw Error(`Invalid size ${i} expected ${this.byteLength}`);const o=this.value_deserializeFromBytes(t,r,n),s=vg.LeafNode.fromZero();return s.setUintBigint(this.byteLength,0,o),s}tree_getFromNode(t){return t.getUintBigint(this.byteLength,0)}tree_setToNode(t,r){this.tree_setToPackedNode(t,0,r)}tree_getFromPackedNode(t,r){const n=this.byteLength*(r%this.itemsPerChunk);return t.getUintBigint(this.byteLength,n)}tree_setToPackedNode(t,r,n){const i=this.byteLength*(r%this.itemsPerChunk);t.setUintBigint(this.byteLength,i,n)}fromJson(t){if(typeof t=="bigint")return t;if(typeof t=="string"||typeof t=="number")return BigInt(t);throw Error(`JSON invalid type ${typeof t} expected bigint`)}toJson(t){return t.toString(10)}}Nt.UintBigintType=pl;var Ns={};Object.defineProperty(Ns,"__esModule",{value:!0});Ns.UnionType=void 0;const Sa=fe,eT=ae,tT=Ue,cc=Oe,Wi=te,dc=Pi,Aa=BigInt(2),hc=BigInt(3);class _l extends cc.CompositeType{constructor(t,r){if(super(),this.types=t,this.depth=1,this.maxChunkCount=1,this.fixedSize=null,this.isList=!0,this.isViewMutable=!0,t.length>=128)throw Error("Must have less than 128 types");if(t.length===0)throw Error("Must have at least 1 type option");if(t[0]instanceof dc.NoneType&&t.length<2)throw Error("Must have at least 2 type options if the first is None");for(let o=1;o<t.length;o++)if(t[o]instanceof dc.NoneType)throw Error("None may only be the first option");this.typeName=r?.typeName??`Union[${t.map(o=>o.typeName).join(",")}]`;const n=[],i=[];for(const o of t)n.push(o.minSize),i.push(o.maxSize);this.minSize=1+Math.min(...n),this.maxSize=1+Math.max(...i),this.maxSelector=this.types.length-1}static named(t,r){return new(tT.namedClass(_l,r.typeName))(t,r)}defaultValue(){return{selector:0,value:this.types[0].defaultValue()}}getView(t){return this.tree_toValue(t.rootNode)}getViewDU(t){return this.tree_toValue(t)}cacheOfViewDU(){}commitView(t){return this.value_toTree(t)}commitViewDU(t){return this.value_toTree(t)}value_serializedSize(t){return 1+this.types[t.selector].value_serializedSize(t.value)}value_serializeToBytes(t,r,n){return t.uint8Array[r]=n.selector,this.types[n.selector].value_serializeToBytes(t,r+1,n.value)}value_deserializeFromBytes(t,r,n){const i=t.uint8Array[r];if(i>this.maxSelector)throw Error(`Invalid selector ${i}`);return{selector:i,value:this.types[i].value_deserializeFromBytes(t,r+1,n)}}tree_serializedSize(t){const r=Wi.getLengthFromRootNode(t),n=t.left;return 1+this.types[r].value_serializedSize(n)}tree_serializeToBytes(t,r,n){const i=Wi.getLengthFromRootNode(n),o=n.left;return t.uint8Array[r]=i,this.types[i].tree_serializeToBytes(t,r+1,o)}tree_deserializeFromBytes(t,r,n){const i=t.uint8Array[r];if(i>this.maxSelector)throw Error(`Invalid selector ${i}`);const o=this.types[i].tree_deserializeFromBytes(t,r+1,n);return Wi.addLengthNode(o,i)}hashTreeRoot(t){return eT.mixInLength(super.hashTreeRoot(t),t.selector)}getRoots(t){return[this.types[t.selector].hashTreeRoot(t.value)]}getPropertyGindex(t){switch(t){case"value":return Aa;case"selector":return hc;default:throw new Error(`Invalid Union type property ${t}`)}}getPropertyType(){throw new Error("Not applicable for Union type")}getIndexProperty(t){if(t===0)return"value";if(t===1)return"selector";throw Error("Union index of out bounds")}tree_getLeafGindices(t,r){if(!r)throw Error("rootNode required");const n=[Sa.concatGindices([t,hc])],i=Wi.getLengthFromRootNode(r),o=this.types[i],s=Sa.concatGindices([t,Aa]);return cc.isCompositeType(o)?n.push(...o.tree_getLeafGindices(s,Sa.getNode(r,Aa))):n.push(s),n}fromJson(t){if(typeof t!="object")throw new Error("JSON must be of type object");const r=t;if(typeof r.selector!="number")throw new Error("Invalid JSON Union selector must be number");const n=this.types[r.selector];if(!n)throw new Error("Invalid JSON Union selector out of range");return{selector:r.selector,value:n.toJson(r.value)}}toJson(t){return{selector:t.selector,value:this.types[t.selector].toJson(t.value)}}clone(t){return{selector:t.selector,value:this.types[t.selector].clone(t.value)}}equals(t,r){return t.selector!==r.selector?!1:this.types[t.selector].equals(t.value,r.value)}}Ns.UnionType=_l;var Bs={};Object.defineProperty(Bs,"__esModule",{value:!0});Bs.VectorBasicType=void 0;const gc=ae,rT=Ue,Xn=te,nT=Ii,iT=Oi,oT=Rr;class bl extends oT.ArrayType{constructor(t,r,n){if(super(t),this.elementType=t,this.length=r,this.isList=!1,this.isViewMutable=!0,!t.isBasic)throw Error("elementType must be basic");if(r===0)throw Error("Vector length must be > 0");this.typeName=n?.typeName??`Vector[${t.typeName}, ${r}]`,this.itemsPerChunk=32/t.byteLength,this.maxChunkCount=Math.ceil(r*t.byteLength/32),this.chunkDepth=gc.maxChunksToDepth(this.maxChunkCount),this.depth=this.chunkDepth,this.fixedSize=r*t.byteLength,this.minSize=this.fixedSize,this.maxSize=this.fixedSize,this.defaultLen=r}static named(t,r,n){return new(rT.namedClass(bl,n.typeName))(t,r,n)}getView(t){return new nT.ArrayBasicTreeView(this,t)}getViewDU(t,r){return new iT.ArrayBasicTreeViewDU(this,t,r)}commitView(t){return t.node}commitViewDU(t){return t.commit(),t.node}cacheOfViewDU(t){return t.cache}value_serializedSize(){return this.fixedSize}value_serializeToBytes(t,r,n){return Xn.value_serializeToBytesArrayBasic(this.elementType,this.length,t,r,n)}value_deserializeFromBytes(t,r,n){return Xn.value_deserializeFromBytesArrayBasic(this.elementType,t,r,n,this)}tree_serializedSize(){return this.fixedSize}tree_serializeToBytes(t,r,n){return Xn.tree_serializeToBytesArrayBasic(this.elementType,this.length,this.depth,t,r,n)}tree_deserializeFromBytes(t,r,n){return Xn.tree_deserializeFromBytesArrayBasic(this.elementType,this.depth,t,r,n,this)}tree_getLength(){return this.length}tree_setLength(){}tree_getChunksNode(t){return t}tree_setChunksNode(t,r){return r}getRoots(t){const r=new Uint8Array(this.fixedSize),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return Xn.value_serializeToBytesArrayBasic(this.elementType,this.length,{uint8Array:r,dataView:n},0,t),gc.splitIntoRootChunks(r)}}Bs.VectorBasicType=bl;var xs={};Object.defineProperty(xs,"__esModule",{value:!0});xs.VectorCompositeType=void 0;const sT=ae,aT=Ue,$t=me,fT=Ci,lT=Li,uT=Rr;class wl extends uT.ArrayType{constructor(t,r,n){if(super(t),this.elementType=t,this.length=r,this.itemsPerChunk=1,this.isList=!1,this.isViewMutable=!0,t.isBasic)throw Error("elementType must not be basic");if(r===0)throw Error("Vector length must be > 0");this.typeName=n?.typeName??`Vector[${t.typeName}, ${r}]`,this.maxChunkCount=r,this.chunkDepth=sT.maxChunksToDepth(this.maxChunkCount),this.depth=this.chunkDepth,this.fixedSize=t.fixedSize===null?null:r*t.fixedSize,this.minSize=$t.minSizeArrayComposite(t,r),this.maxSize=$t.maxSizeArrayComposite(t,r),this.defaultLen=r}static named(t,r,n){return new(aT.namedClass(wl,n.typeName))(t,r,n)}getView(t){return new fT.ArrayCompositeTreeView(this,t)}getViewDU(t,r){return new lT.ArrayCompositeTreeViewDU(this,t,r)}commitView(t){return t.node}commitViewDU(t){return t.commit(),t.node}cacheOfViewDU(t){return t.cache}value_serializedSize(t){return $t.value_serializedSizeArrayComposite(this.elementType,this.length,t)}value_serializeToBytes(t,r,n){return $t.value_serializeToBytesArrayComposite(this.elementType,this.length,t,r,n)}value_deserializeFromBytes(t,r,n){return $t.value_deserializeFromBytesArrayComposite(this.elementType,t,r,n,this)}tree_serializedSize(t){return $t.tree_serializedSizeArrayComposite(this.elementType,this.length,this.depth,t)}tree_serializeToBytes(t,r,n){return $t.tree_serializeToBytesArrayComposite(this.elementType,this.length,this.depth,n,t,r)}tree_deserializeFromBytes(t,r,n){return $t.tree_deserializeFromBytesArrayComposite(this.elementType,this.depth,t,r,n,this)}tree_getLength(){return this.length}tree_setLength(){}tree_getChunksNode(t){return t}tree_setChunksNode(t,r){return r}getRoots(t){return $t.value_getRootsArrayComposite(this.elementType,this.length,t)}}xs.VectorCompositeType=wl;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hash64=e.byteArrayEquals=e.toHexString=e.fromHexString=e.getUint8ByteToBitBooleanArray=e.BitArray=e.TreeViewDU=e.TreeView=e.isCompositeType=e.CompositeType=e.isBasicType=e.BasicType=e.Type=e.ByteArrayType=e.BitArrayType=e.ArrayType=e.VectorCompositeType=e.VectorBasicType=e.UnionType=e.UintNumberType=e.UintBigintType=e.NoneType=e.ListCompositeType=e.ListBasicType=e.ContainerNodeStructType=e.ContainerType=e.ByteVectorType=e.ByteListType=e.BooleanType=e.BitVectorType=e.BitListType=void 0;var t=ns;Object.defineProperty(e,"BitListType",{enumerable:!0,get:function(){return t.BitListType}});var r=cs;Object.defineProperty(e,"BitVectorType",{enumerable:!0,get:function(){return r.BitVectorType}});var n=ds;Object.defineProperty(e,"BooleanType",{enumerable:!0,get:function(){return n.BooleanType}});var i=hs;Object.defineProperty(e,"ByteListType",{enumerable:!0,get:function(){return i.ByteListType}});var o=gs;Object.defineProperty(e,"ByteVectorType",{enumerable:!0,get:function(){return o.ByteVectorType}});var s=Ht;Object.defineProperty(e,"ContainerType",{enumerable:!0,get:function(){return s.ContainerType}});var a=_s;Object.defineProperty(e,"ContainerNodeStructType",{enumerable:!0,get:function(){return a.ContainerNodeStructType}});var f=ms;Object.defineProperty(e,"ListBasicType",{enumerable:!0,get:function(){return f.ListBasicType}});var l=Ts;Object.defineProperty(e,"ListCompositeType",{enumerable:!0,get:function(){return l.ListCompositeType}});var u=Pi;Object.defineProperty(e,"NoneType",{enumerable:!0,get:function(){return u.NoneType}});var b=Nt;Object.defineProperty(e,"UintBigintType",{enumerable:!0,get:function(){return b.UintBigintType}}),Object.defineProperty(e,"UintNumberType",{enumerable:!0,get:function(){return b.UintNumberType}});var p=Ns;Object.defineProperty(e,"UnionType",{enumerable:!0,get:function(){return p.UnionType}});var g=Bs;Object.defineProperty(e,"VectorBasicType",{enumerable:!0,get:function(){return g.VectorBasicType}});var E=xs;Object.defineProperty(e,"VectorCompositeType",{enumerable:!0,get:function(){return E.VectorCompositeType}});var C=Rr;Object.defineProperty(e,"ArrayType",{enumerable:!0,get:function(){return C.ArrayType}});var L=Pn;Object.defineProperty(e,"BitArrayType",{enumerable:!0,get:function(){return L.BitArrayType}});var x=zn;Object.defineProperty(e,"ByteArrayType",{enumerable:!0,get:function(){return x.ByteArrayType}});var w=kn;Object.defineProperty(e,"Type",{enumerable:!0,get:function(){return w.Type}});var N=_t;Object.defineProperty(e,"BasicType",{enumerable:!0,get:function(){return N.BasicType}}),Object.defineProperty(e,"isBasicType",{enumerable:!0,get:function(){return N.isBasicType}});var R=Oe;Object.defineProperty(e,"CompositeType",{enumerable:!0,get:function(){return R.CompositeType}}),Object.defineProperty(e,"isCompositeType",{enumerable:!0,get:function(){return R.isCompositeType}});var P=Ot;Object.defineProperty(e,"TreeView",{enumerable:!0,get:function(){return P.TreeView}});var z=Xt;Object.defineProperty(e,"TreeViewDU",{enumerable:!0,get:function(){return z.TreeViewDU}});var k=_r;Object.defineProperty(e,"BitArray",{enumerable:!0,get:function(){return k.BitArray}}),Object.defineProperty(e,"getUint8ByteToBitBooleanArray",{enumerable:!0,get:function(){return k.getUint8ByteToBitBooleanArray}});var c=gt;Object.defineProperty(e,"fromHexString",{enumerable:!0,get:function(){return c.fromHexString}}),Object.defineProperty(e,"toHexString",{enumerable:!0,get:function(){return c.toHexString}}),Object.defineProperty(e,"byteArrayEquals",{enumerable:!0,get:function(){return c.byteArrayEquals}});var y=ae;Object.defineProperty(e,"hash64",{enumerable:!0,get:function(){return y.hash64}})})(sg);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Withdrawals=e.Withdrawal=e.Bytes20=e.UintBigInt64=e.UintNum64=void 0;const t=sg,r=Ni;e.UintNum64=new t.UintNumberType(8),e.UintBigInt64=new t.UintBigintType(8),e.Bytes20=new t.ByteVectorType(20),e.Withdrawal=new t.ContainerType({index:e.UintBigInt64,validatorIndex:e.UintBigInt64,address:e.Bytes20,amount:e.UintBigInt64},{typeName:"Withdrawal",jsonCase:"eth2"}),e.Withdrawals=new t.ListCompositeType(e.Withdrawal,r.MAX_WITHDRAWALS_PER_PAYLOAD)})(og);var Sg={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.compactBytesToNibbles=e.bytesToNibbles=e.nibblesToCompactBytes=e.nibblesToBytes=e.hasTerminator=void 0;const t=s=>s.length>0&&s[s.length-1]===16;e.hasTerminator=t;const r=(s,a)=>{for(let f=0,l=0;l<s.length;f+=1,l+=2)a[f]=s[l]<<4|s[l+1]};e.nibblesToBytes=r;const n=s=>{let a=0;(0,e.hasTerminator)(s)&&(a=1,s=s.subarray(0,s.length-1));const f=new Uint8Array(s.length/2+1);return f[0]=a<<5,(s.length&1)===1&&(f[0]|=16,f[0]|=s[0],s=s.subarray(1)),(0,e.nibblesToBytes)(s,f.subarray(1)),f};e.nibblesToCompactBytes=n;const i=s=>{const a=s.length*2+1,f=new Uint8Array(a);for(let l=0;l<s.length;l++){const u=s[l];f[l*2]=u/16,f[l*2+1]=u%16}return f[a-1]=16,f};e.bytesToNibbles=i;const o=s=>{if(s.length===0)return s;let a=(0,e.bytesToNibbles)(s);a[0]<2&&(a=a.subarray(0,a.length-1));const f=2-(a[0]&1);return a.subarray(f)};e.compactBytesToNibbles=o})(Sg);var Rs={};Object.defineProperty(Rs,"__esModule",{value:!0});Rs.AsyncEventEmitter=void 0;const cT=Oo;async function dT(e,t,r){let n;for await(const i of t)try{i.length<2?i.call(e,r):await new Promise((o,s)=>{i.call(e,r,a=>{a?s(a):o()})})}catch(o){n=o}if(n)throw n}class hT extends cT.EventEmitter{emit(t,...r){let[n,i]=r;const o=this;let s=o._events[t]??[];return i===void 0&&typeof n=="function"&&(i=n,n=void 0),(t==="newListener"||t==="removeListener")&&(n={event:n,fn:i},i=void 0),s=Array.isArray(s)?s:[s],dT(o,s.slice(),n).then(i).catch(i),o.listenerCount(t)>0}once(t,r){const n=this;let i;if(typeof r!="function")throw new TypeError("listener must be a function");return r.length>=2?i=function(o,s){n.removeListener(t,i),r(o,s)}:i=function(o){n.removeListener(t,i),r(o,i)},n.on(t,i),n}first(t,r){let n=this._events[t]??[];if(typeof r!="function")throw new TypeError("listener must be a function");return Array.isArray(n)||(this._events[t]=n=[n]),n.unshift(r),this}before(t,r,n){return this.beforeOrAfter(t,r,n)}after(t,r,n){return this.beforeOrAfter(t,r,n,"after")}beforeOrAfter(t,r,n,i){let o=this._events[t]??[],s,a;const f=i==="after"?1:0;if(typeof n!="function")throw new TypeError("listener must be a function");if(typeof r!="function")throw new TypeError("target must be a function");for(Array.isArray(o)||(this._events[t]=o=[o]),a=o.length,s=o.length;s--;)if(o[s]===r){a=s+f;break}return o.splice(a,0,n),this}on(t,r){return super.on(t,r)}addListener(t,r){return super.addListener(t,r)}prependListener(t,r){return super.prependListener(t,r)}prependOnceListener(t,r){return super.prependOnceListener(t,r)}removeAllListeners(t){return super.removeAllListeners(t)}removeListener(t,r){return super.removeListener(t,r)}eventNames(){return super.eventNames()}listeners(t){return super.listeners(t)}listenerCount(t){return super.listenerCount(t)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(t){return super.setMaxListeners(t)}}Rs.AsyncEventEmitter=hT;var Is={};Object.defineProperty(Is,"__esModule",{value:!0});Is.Lock=void 0;class gT{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise(t=>this.promiseResolverQueue.push(t))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(this.permits===1&&this.promiseResolverQueue.length>0){this.permits-=1;const t=this.promiseResolverQueue.shift();t&&t(!0)}}}Is.Lock=gT;var Bn={},Kr={},ml=gi(globalThis.fetch)&&gi(globalThis.ReadableStream),Yn;function yT(){if(typeof Yn<"u")return Yn;try{new globalThis.Blob([new ArrayBuffer(1)]),Yn=!0}catch{Yn=!1}return Yn}var Mr;function vl(e){Mr||(Mr=new globalThis.XMLHttpRequest,Mr.open("GET",globalThis.location.host?"/":"https://example.com"));try{return Mr.responseType=e,Mr.responseType===e}catch{return!1}}var El=typeof globalThis.ArrayBuffer<"u",pT=El&&gi(globalThis.ArrayBuffer.prototype.slice),_T=El&&vl("arraybuffer"),bT=!ml&&pT&&vl("ms-stream"),wT=!ml&&El&&vl("moz-chunked-arraybuffer"),Ag=gi(Mr.overrideMimeType),mT=gi(globalThis.VBArray);function gi(e){return typeof e=="function"}Mr=null;var Ur={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};function Os(e,t,r){var n=this;yd.call(n),n._mode=r,n.headers={},n.rawHeaders=[],n.trailers={},n.rawTrailers=[],n.on("end",function(){at.nextTick(function(){n.emit("close")})});var i;if(r==="fetch"){n._fetchResponse=t,n.url=t.url,n.statusCode=t.status,n.statusMessage=t.statusText;for(var o,s,a=t.headers[Symbol.iterator]();o=(s=a.next()).value,!s.done;)n.headers[o[0].toLowerCase()]=o[1],n.rawHeaders.push(o[0],o[1]);var f=t.body.getReader();i=function(){f.read().then(function(p){if(!n._destroyed){if(p.done){n.push(null);return}n.push(new q(p.value)),i()}})},i()}else{n._xhr=e,n._pos=0,n.url=e.responseURL,n.statusCode=e.status,n.statusMessage=e.statusText;var l=e.getAllResponseHeaders().split(/\r?\n/);if(l.forEach(function(p){var g=p.match(/^([^:]+):\s*(.*)/);if(g){var E=g[1].toLowerCase();E==="set-cookie"?(n.headers[E]===void 0&&(n.headers[E]=[]),n.headers[E].push(g[2])):n.headers[E]!==void 0?n.headers[E]+=", "+g[2]:n.headers[E]=g[2],n.rawHeaders.push(g[1],g[2])}}),n._charset="x-user-defined",!Ag){var u=n.rawHeaders["mime-type"];if(u){var b=u.match(/;\s*charset=([^;])(;|$)/);b&&(n._charset=b[1].toLowerCase())}n._charset||(n._charset="utf-8")}}}Rt(Os,yd);Os.prototype._read=function(){};Os.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(t.readyState!==Ur.DONE)break;try{r=new globalThis.VBArray(t.responseBody).toArray()}catch{}if(r!==null){e.push(new q(r));break}case"text":try{r=t.responseText}catch{e._mode="text:vbarray";break}if(r.length>e._pos){var n=r.substr(e._pos);if(e._charset==="x-user-defined"){for(var i=new q(n.length),o=0;o<n.length;o++)i[o]=n.charCodeAt(o)&255;e.push(i)}else e.push(n,e._charset);e._pos=r.length}break;case"arraybuffer":if(t.readyState!==Ur.DONE||!t.response)break;r=t.response,e.push(new q(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,t.readyState!==Ur.LOADING||!r)break;e.push(new q(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,t.readyState!==Ur.LOADING)break;var s=new globalThis.MSStreamReader;s.onprogress=function(){s.result.byteLength>e._pos&&(e.push(new q(new Uint8Array(s.result.slice(e._pos)))),e._pos=s.result.byteLength)},s.onload=function(){e.push(null)},s.readAsArrayBuffer(r);break}e._xhr.readyState===Ur.DONE&&e._mode!=="ms-stream"&&e.push(null)};function vT(e){if(e instanceof Uint8Array){if(e.byteOffset===0&&e.byteLength===e.buffer.byteLength)return e.buffer;if(typeof e.buffer.slice=="function")return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(M0(e)){for(var t=new Uint8Array(e.length),r=e.length,n=0;n<r;n++)t[n]=e[n];return t.buffer}else throw new Error("Argument must be a Buffer")}function ET(e,t){return ml&&t?"fetch":wT?"moz-chunked-arraybuffer":bT?"ms-stream":_T&&e?"arraybuffer":mT&&e?"text:vbarray":"text"}function Me(e){var t=this;Tf.call(t),t._opts=e,t._body=[],t._headers={},e.auth&&t.setHeader("Authorization","Basic "+new q(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(i){t.setHeader(i,e.headers[i])});var r,n=!0;if(e.mode==="disable-fetch")n=!1,r=!0;else if(e.mode==="prefer-streaming")r=!1;else if(e.mode==="allow-wrong-content-type")r=!Ag;else if(!e.mode||e.mode==="default"||e.mode==="prefer-fast")r=!0;else throw new Error("Invalid value for opts.mode");t._mode=ET(r,n),t.on("finish",function(){t._onFinish()})}Rt(Me,Tf);var TT=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];Me.prototype.setHeader=function(e,t){var r=this,n=e.toLowerCase();TT.indexOf(n)===-1&&(r._headers[n]={name:e,value:t})};Me.prototype.getHeader=function(e){var t=this;return t._headers[e.toLowerCase()].value};Me.prototype.removeHeader=function(e){var t=this;delete t._headers[e.toLowerCase()]};Me.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,r=e._headers,n;if((t.method==="POST"||t.method==="PUT"||t.method==="PATCH")&&(yT()?n=new globalThis.Blob(e._body.map(function(s){return vT(s)}),{type:(r["content-type"]||{}).value||""}):n=q.concat(e._body).toString()),e._mode==="fetch"){var i=Object.keys(r).map(function(s){return[r[s].name,r[s].value]});globalThis.fetch(e._opts.url,{method:e._opts.method,headers:i,body:n,mode:"cors",credentials:t.withCredentials?"include":"same-origin"}).then(function(s){e._fetchResponse=s,e._connect()},function(s){e.emit("error",s)})}else{var o=e._xhr=new globalThis.XMLHttpRequest;try{o.open(e._opts.method,e._opts.url,!0)}catch(s){at.nextTick(function(){e.emit("error",s)});return}"responseType"in o&&(o.responseType=e._mode.split(":")[0]),"withCredentials"in o&&(o.withCredentials=!!t.withCredentials),e._mode==="text"&&"overrideMimeType"in o&&o.overrideMimeType("text/plain; charset=x-user-defined"),Object.keys(r).forEach(function(s){o.setRequestHeader(r[s].name,r[s].value)}),e._response=null,o.onreadystatechange=function(){switch(o.readyState){case Ur.LOADING:case Ur.DONE:e._onXHRProgress();break}},e._mode==="moz-chunked-arraybuffer"&&(o.onprogress=function(){e._onXHRProgress()}),o.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{o.send(n)}catch(s){at.nextTick(function(){e.emit("error",s)});return}}}};function ST(e){try{var t=e.status;return t!==null&&t!==0}catch{return!1}}Me.prototype._onXHRProgress=function(){var e=this;!ST(e._xhr)||e._destroyed||(e._response||e._connect(),e._response._onXHRProgress())};Me.prototype._connect=function(){var e=this;e._destroyed||(e._response=new Os(e._xhr,e._fetchResponse,e._mode),e.emit("response",e._response))};Me.prototype._write=function(e,t,r){var n=this;n._body.push(e),r()};Me.prototype.abort=Me.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()};Me.prototype.end=function(e,t,r){var n=this;typeof e=="function"&&(r=e,e=void 0),Tf.prototype.end.call(n,e,t,r)};Me.prototype.flushHeaders=function(){};Me.prototype.setTimeout=function(){};Me.prototype.setNoDelay=function(){};Me.prototype.setSocketKeepAlive=function(){};/*! https://mths.be/punycode v1.4.1 by @mathias */var Na=2147483647,oi=36,Ng=1,hf=26,AT=38,NT=700,BT=72,xT=128,RT="-",IT=/[^\x20-\x7E]/,OT=/[\x2E\u3002\uFF0E\uFF61]/g,CT={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ba=oi-Ng,bn=Math.floor,xa=String.fromCharCode;function yc(e){throw new RangeError(CT[e])}function LT(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function PT(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(OT,".");var i=e.split("."),o=LT(i,t).join(".");return n+o}function kT(e){for(var t=[],r=0,n=e.length,i,o;r<n;)i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<n?(o=e.charCodeAt(r++),(o&64512)==56320?t.push(((i&1023)<<10)+(o&1023)+65536):(t.push(i),r--)):t.push(i);return t}function pc(e,t){return e+22+75*(e<26)-((t!=0)<<5)}function zT(e,t,r){var n=0;for(e=r?bn(e/NT):e>>1,e+=bn(e/t);e>Ba*hf>>1;n+=oi)e=bn(e/Ba);return bn(n+(Ba+1)*e/(e+AT))}function $T(e){var t,r,n,i,o,s,a,f,l,u,b,p=[],g,E,C,L;for(e=kT(e),g=e.length,t=xT,r=0,o=BT,s=0;s<g;++s)b=e[s],b<128&&p.push(xa(b));for(n=i=p.length,i&&p.push(RT);n<g;){for(a=Na,s=0;s<g;++s)b=e[s],b>=t&&b<a&&(a=b);for(E=n+1,a-t>bn((Na-r)/E)&&yc("overflow"),r+=(a-t)*E,t=a,s=0;s<g;++s)if(b=e[s],b<t&&++r>Na&&yc("overflow"),b==t){for(f=r,l=oi;u=l<=o?Ng:l>=o+hf?hf:l-o,!(f<u);l+=oi)L=f-u,C=oi-u,p.push(xa(pc(u+L%C,0))),f=bn(L/C);p.push(xa(pc(f,0))),o=zT(r,E,n==i),r=0,++n}++r,++t}return p.join("")}function DT(e){return PT(e,function(t){return IT.test(t)?"xn--"+$T(t):t})}const MT={parse:$n,resolve:Rg,resolveObject:Ig,format:xg,Url:yt};function yt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var UT=/^([a-z0-9.+-]+:)/i,VT=/:[0-9]*$/,jT=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,FT=["<",">",'"',"`"," ","\r",`
`,"	"],HT=["{","}","|","\\","^","`"].concat(FT),gf=["'"].concat(HT),_c=["%","/","?",";","#"].concat(gf),bc=["/","?","#"],qT=255,wc=/^[+a-z0-9A-Z_-]{0,63}$/,GT=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,WT={javascript:!0,"javascript:":!0},yf={javascript:!0,"javascript:":!0},mn={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function $n(e,t,r){if(e&&pd(e)&&e instanceof yt)return e;var n=new yt;return n.parse(e,t,r),n}yt.prototype.parse=function(e,t,r){return Bg(this,e,t,r)};function Bg(e,t,r,n){if(!Sf(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),o=i!==-1&&i<t.indexOf("#")?"?":"#",s=t.split(o),a=/\\/g;s[0]=s[0].replace(a,"/"),t=s.join(o);var f=t;if(f=f.trim(),!n&&t.split("#").length===1){var l=jT.exec(f);if(l)return e.path=f,e.href=f,e.pathname=l[1],l[2]?(e.search=l[2],r?e.query=Ul(e.search.substr(1)):e.query=e.search.substr(1)):r&&(e.search="",e.query={}),e}var u=UT.exec(f);if(u){u=u[0];var b=u.toLowerCase();e.protocol=b,f=f.substr(u.length)}if(n||u||f.match(/^\/\/[^@\/]+@[^@\/]+/)){var p=f.substr(0,2)==="//";p&&!(u&&yf[u])&&(f=f.substr(2),e.slashes=!0)}var g,E,C,L;if(!yf[u]&&(p||u&&!mn[u])){var x=-1;for(g=0;g<bc.length;g++)E=f.indexOf(bc[g]),E!==-1&&(x===-1||E<x)&&(x=E);var w,N;for(x===-1?N=f.lastIndexOf("@"):N=f.lastIndexOf("@",x),N!==-1&&(w=f.slice(0,N),f=f.slice(N+1),e.auth=decodeURIComponent(w)),x=-1,g=0;g<_c.length;g++)E=f.indexOf(_c[g]),E!==-1&&(x===-1||E<x)&&(x=E);x===-1&&(x=f.length),e.host=f.slice(0,x),f=f.slice(x),Og(e),e.hostname=e.hostname||"";var R=e.hostname[0]==="["&&e.hostname[e.hostname.length-1]==="]";if(!R){var P=e.hostname.split(/\./);for(g=0,C=P.length;g<C;g++){var z=P[g];if(z&&!z.match(wc)){for(var k="",c=0,y=z.length;c<y;c++)z.charCodeAt(c)>127?k+="x":k+=z[c];if(!k.match(wc)){var d=P.slice(0,g),S=P.slice(g+1),m=z.match(GT);m&&(d.push(m[1]),S.unshift(m[2])),S.length&&(f="/"+S.join(".")+f),e.hostname=d.join(".");break}}}}e.hostname.length>qT?e.hostname="":e.hostname=e.hostname.toLowerCase(),R||(e.hostname=DT(e.hostname)),L=e.port?":"+e.port:"";var A=e.hostname||"";e.host=A+L,e.href+=e.host,R&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),f[0]!=="/"&&(f="/"+f))}if(!WT[b])for(g=0,C=gf.length;g<C;g++){var _=gf[g];if(f.indexOf(_)!==-1){var h=encodeURIComponent(_);h===_&&(h=escape(_)),f=f.split(_).join(h)}}var v=f.indexOf("#");v!==-1&&(e.hash=f.substr(v),f=f.slice(0,v));var I=f.indexOf("?");if(I!==-1?(e.search=f.substr(I),e.query=f.substr(I+1),r&&(e.query=Ul(e.query)),f=f.slice(0,I)):r&&(e.search="",e.query={}),f&&(e.pathname=f),mn[b]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){L=e.pathname||"";var O=e.search||"";e.path=L+O}return e.href=Tl(e),e}function xg(e){return Sf(e)&&(e=Bg({},e)),Tl(e)}function Tl(e){var t=e.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var r=e.protocol||"",n=e.pathname||"",i=e.hash||"",o=!1,s="";e.host?o=t+e.host:e.hostname&&(o=t+(e.hostname.indexOf(":")===-1?e.hostname:"["+this.hostname+"]"),e.port&&(o+=":"+e.port)),e.query&&pd(e.query)&&Object.keys(e.query).length&&(s=U0(e.query));var a=e.search||s&&"?"+s||"";return r&&r.substr(-1)!==":"&&(r+=":"),e.slashes||(!r||mn[r])&&o!==!1?(o="//"+(o||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):o||(o=""),i&&i.charAt(0)!=="#"&&(i="#"+i),a&&a.charAt(0)!=="?"&&(a="?"+a),n=n.replace(/[?#]/g,function(f){return encodeURIComponent(f)}),a=a.replace("#","%23"),r+o+n+a+i}yt.prototype.format=function(){return Tl(this)};function Rg(e,t){return $n(e,!1,!0).resolve(t)}yt.prototype.resolve=function(e){return this.resolveObject($n(e,!1,!0)).format()};function Ig(e,t){return e?$n(e,!1,!0).resolveObject(t):t}yt.prototype.resolveObject=function(e){if(Sf(e)){var t=new yt;t.parse(e,!1,!0),e=t}for(var r=new yt,n=Object.keys(this),i=0;i<n.length;i++){var o=n[i];r[o]=this[o]}if(r.hash=e.hash,e.href==="")return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),a=0;a<s.length;a++){var f=s[a];f!=="protocol"&&(r[f]=e[f])}return mn[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}var l;if(e.protocol&&e.protocol!==r.protocol){if(!mn[e.protocol]){for(var u=Object.keys(e),b=0;b<u.length;b++){var p=u[b];r[p]=e[p]}return r.href=r.format(),r}if(r.protocol=e.protocol,!e.host&&!yf[e.protocol]){for(l=(e.pathname||"").split("/");l.length&&!(e.host=l.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),l[0]!==""&&l.unshift(""),l.length<2&&l.unshift(""),r.pathname=l.join("/")}else r.pathname=e.pathname;if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var g=r.pathname||"",E=r.search||"";r.path=g+E}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var C=r.pathname&&r.pathname.charAt(0)==="/",L=e.host||e.pathname&&e.pathname.charAt(0)==="/",x=L||C||r.host&&e.pathname,w=x,N=r.pathname&&r.pathname.split("/")||[],R=r.protocol&&!mn[r.protocol];l=e.pathname&&e.pathname.split("/")||[],R&&(r.hostname="",r.port=null,r.host&&(N[0]===""?N[0]=r.host:N.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(l[0]===""?l[0]=e.host:l.unshift(e.host)),e.host=null),x=x&&(l[0]===""||N[0]===""));var P;if(L)r.host=e.host||e.host===""?e.host:r.host,r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname,r.search=e.search,r.query=e.query,N=l;else if(l.length)N||(N=[]),N.pop(),N=N.concat(l),r.search=e.search,r.query=e.query;else if(!V0(e.search))return R&&(r.hostname=r.host=N.shift(),P=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1,P&&(r.auth=P.shift(),r.host=r.hostname=P.shift())),r.search=e.search,r.query=e.query,(!Di(r.pathname)||!Di(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!N.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var z=N.slice(-1)[0],k=(r.host||e.host||N.length>1)&&(z==="."||z==="..")||z==="",c=0,y=N.length;y>=0;y--)z=N[y],z==="."?N.splice(y,1):z===".."?(N.splice(y,1),c++):c&&(N.splice(y,1),c--);if(!x&&!w)for(;c--;c)N.unshift("..");x&&N[0]!==""&&(!N[0]||N[0].charAt(0)!=="/")&&N.unshift(""),k&&N.join("/").substr(-1)!=="/"&&N.push("");var d=N[0]===""||N[0]&&N[0].charAt(0)==="/";return R&&(r.hostname=r.host=d?"":N.length?N.shift():"",P=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1,P&&(r.auth=P.shift(),r.host=r.hostname=P.shift())),x=x||r.host&&N.length,x&&!d&&N.unshift(""),N.length?r.pathname=N.join("/"):(r.pathname=null,r.path=null),(!Di(r.pathname)||!Di(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r};yt.prototype.parseHost=function(){return Og(this)};function Og(e){var t=e.host,r=VT.exec(t);r&&(r=r[0],r!==":"&&(e.port=r.substr(1)),t=t.substr(0,t.length-r.length)),t&&(e.hostname=t)}const ZT=Object.freeze(Object.defineProperty({__proto__:null,Url:yt,default:MT,format:xg,parse:$n,resolve:Rg,resolveObject:Ig},Symbol.toStringTag,{value:"Module"}));function Sl(e,t){typeof e=="string"&&(e=$n(e));var r=globalThis.location.protocol.search(/^https?:$/)===-1?"http:":"",n=e.protocol||r,i=e.hostname||e.host,o=e.port,s=e.path||"/";i&&i.indexOf(":")!==-1&&(i="["+i+"]"),e.url=(i?n+"//"+i:"")+(o?":"+o:"")+s,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var a=new Me(e);return t&&a.on("response",t),a}function Cg(e,t){var r=Sl(e,t);return r.end(),r}function Al(){}Al.defaultMaxSockets=4;var Lg=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],Pg={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};const KT={request:Sl,get:Cg,Agent:Al,METHODS:Lg,STATUS_CODES:Pg},XT=Object.freeze(Object.defineProperty({__proto__:null,Agent:Al,METHODS:Lg,STATUS_CODES:Pg,default:KT,get:Cg,request:Sl},Symbol.toStringTag,{value:"Module"})),mc=Jr(XT),kg={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function YT(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function qt(e,t,r,n,i){if(t.subarray&&e.subarray){e.set(t.subarray(r,r+n),i);return}for(var o=0;o<n;o++)e[i+o]=t[r+o]}var Bo=Uint8Array,st=Uint16Array,xo=Int32Array,JT=4,vc=0,Ec=1,QT=2;function Dn(e){for(var t=e.length;--t>=0;)e[t]=0}var eS=0,zg=1,tS=2,rS=3,nS=258,Nl=29,ki=256,yi=ki+1+Nl,vn=30,Bl=19,$g=2*yi+1,Fr=15,Ra=16,iS=7,xl=256,Dg=16,Mg=17,Ug=18,pf=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ao=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],oS=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Vg=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],sS=512,Vt=new Array((yi+2)*2);Dn(Vt);var si=new Array(vn*2);Dn(si);var pi=new Array(sS);Dn(pi);var _i=new Array(nS-rS+1);Dn(_i);var Rl=new Array(Nl);Dn(Rl);var Ro=new Array(vn);Dn(Ro);function Ia(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}var jg,Fg,Hg;function Oa(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function qg(e){return e<256?pi[e]:pi[256+(e>>>7)]}function bi(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function Xe(e,t,r){e.bi_valid>Ra-r?(e.bi_buf|=t<<e.bi_valid&65535,bi(e,e.bi_buf),e.bi_buf=t>>Ra-e.bi_valid,e.bi_valid+=r-Ra):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function St(e,t,r){Xe(e,r[t*2],r[t*2+1])}function Gg(e,t){var r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1}function aS(e){e.bi_valid===16?(bi(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function fS(e,t){var r=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,f=t.stat_desc.max_length,l,u,b,p,g,E,C=0;for(p=0;p<=Fr;p++)e.bl_count[p]=0;for(r[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<$g;l++)u=e.heap[l],p=r[r[u*2+1]*2+1]+1,p>f&&(p=f,C++),r[u*2+1]=p,!(u>n)&&(e.bl_count[p]++,g=0,u>=a&&(g=s[u-a]),E=r[u*2],e.opt_len+=E*(p+g),o&&(e.static_len+=E*(i[u*2+1]+g)));if(C!==0){do{for(p=f-1;e.bl_count[p]===0;)p--;e.bl_count[p]--,e.bl_count[p+1]+=2,e.bl_count[f]--,C-=2}while(C>0);for(p=f;p!==0;p--)for(u=e.bl_count[p];u!==0;)b=e.heap[--l],!(b>n)&&(r[b*2+1]!==p&&(e.opt_len+=(p-r[b*2+1])*r[b*2],r[b*2+1]=p),u--)}}function Wg(e,t,r){var n=new Array(Fr+1),i=0,o,s;for(o=1;o<=Fr;o++)n[o]=i=i+r[o-1]<<1;for(s=0;s<=t;s++){var a=e[s*2+1];a!==0&&(e[s*2]=Gg(n[a]++,a))}}function lS(){var e,t,r,n,i,o=new Array(Fr+1);for(r=0,n=0;n<Nl-1;n++)for(Rl[n]=r,e=0;e<1<<pf[n];e++)_i[r++]=n;for(_i[r-1]=n,i=0,n=0;n<16;n++)for(Ro[n]=i,e=0;e<1<<ao[n];e++)pi[i++]=n;for(i>>=7;n<vn;n++)for(Ro[n]=i<<7,e=0;e<1<<ao[n]-7;e++)pi[256+i++]=n;for(t=0;t<=Fr;t++)o[t]=0;for(e=0;e<=143;)Vt[e*2+1]=8,e++,o[8]++;for(;e<=255;)Vt[e*2+1]=9,e++,o[9]++;for(;e<=279;)Vt[e*2+1]=7,e++,o[7]++;for(;e<=287;)Vt[e*2+1]=8,e++,o[8]++;for(Wg(Vt,yi+1,o),e=0;e<vn;e++)si[e*2+1]=5,si[e*2]=Gg(e,5);jg=new Ia(Vt,pf,ki+1,yi,Fr),Fg=new Ia(si,ao,0,vn,Fr),Hg=new Ia(new Array(0),oS,0,Bl,iS)}function Zg(e){var t;for(t=0;t<yi;t++)e.dyn_ltree[t*2]=0;for(t=0;t<vn;t++)e.dyn_dtree[t*2]=0;for(t=0;t<Bl;t++)e.bl_tree[t*2]=0;e.dyn_ltree[xl*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Kg(e){e.bi_valid>8?bi(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function uS(e,t,r,n){Kg(e),n&&(bi(e,r),bi(e,~r)),qt(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}function Tc(e,t,r,n){var i=t*2,o=r*2;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]}function Ca(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&Tc(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!Tc(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function Sc(e,t,r){var n,i,o=0,s,a;if(e.last_lit!==0)do n=e.pending_buf[e.d_buf+o*2]<<8|e.pending_buf[e.d_buf+o*2+1],i=e.pending_buf[e.l_buf+o],o++,n===0?St(e,i,t):(s=_i[i],St(e,s+ki+1,t),a=pf[s],a!==0&&(i-=Rl[s],Xe(e,i,a)),n--,s=qg(n),St(e,s,r),a=ao[s],a!==0&&(n-=Ro[s],Xe(e,n,a)));while(o<e.last_lit);St(e,xl,t)}function _f(e,t){var r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems,s,a,f=-1,l;for(e.heap_len=0,e.heap_max=$g,s=0;s<o;s++)r[s*2]!==0?(e.heap[++e.heap_len]=f=s,e.depth[s]=0):r[s*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=f<2?++f:0,r[l*2]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=n[l*2+1]);for(t.max_code=f,s=e.heap_len>>1;s>=1;s--)Ca(e,r,s);l=o;do s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Ca(e,r,1),a=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=a,r[l*2]=r[s*2]+r[a*2],e.depth[l]=(e.depth[s]>=e.depth[a]?e.depth[s]:e.depth[a])+1,r[s*2+1]=r[a*2+1]=l,e.heap[1]=l++,Ca(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],fS(e,t),Wg(r,f,e.bl_count)}function Ac(e,t,r){var n,i=-1,o,s=t[0*2+1],a=0,f=7,l=4;for(s===0&&(f=138,l=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)o=s,s=t[(n+1)*2+1],!(++a<f&&o===s)&&(a<l?e.bl_tree[o*2]+=a:o!==0?(o!==i&&e.bl_tree[o*2]++,e.bl_tree[Dg*2]++):a<=10?e.bl_tree[Mg*2]++:e.bl_tree[Ug*2]++,a=0,i=o,s===0?(f=138,l=3):o===s?(f=6,l=3):(f=7,l=4))}function Nc(e,t,r){var n,i=-1,o,s=t[0*2+1],a=0,f=7,l=4;for(s===0&&(f=138,l=3),n=0;n<=r;n++)if(o=s,s=t[(n+1)*2+1],!(++a<f&&o===s)){if(a<l)do St(e,o,e.bl_tree);while(--a!==0);else o!==0?(o!==i&&(St(e,o,e.bl_tree),a--),St(e,Dg,e.bl_tree),Xe(e,a-3,2)):a<=10?(St(e,Mg,e.bl_tree),Xe(e,a-3,3)):(St(e,Ug,e.bl_tree),Xe(e,a-11,7));a=0,i=o,s===0?(f=138,l=3):o===s?(f=6,l=3):(f=7,l=4)}}function cS(e){var t;for(Ac(e,e.dyn_ltree,e.l_desc.max_code),Ac(e,e.dyn_dtree,e.d_desc.max_code),_f(e,e.bl_desc),t=Bl-1;t>=3&&e.bl_tree[Vg[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}function dS(e,t,r,n){var i;for(Xe(e,t-257,5),Xe(e,r-1,5),Xe(e,n-4,4),i=0;i<n;i++)Xe(e,e.bl_tree[Vg[i]*2+1],3);Nc(e,e.dyn_ltree,t-1),Nc(e,e.dyn_dtree,r-1)}function hS(e){var t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return vc;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Ec;for(r=32;r<ki;r++)if(e.dyn_ltree[r*2]!==0)return Ec;return vc}var Bc=!1;function gS(e){Bc||(lS(),Bc=!0),e.l_desc=new Oa(e.dyn_ltree,jg),e.d_desc=new Oa(e.dyn_dtree,Fg),e.bl_desc=new Oa(e.bl_tree,Hg),e.bi_buf=0,e.bi_valid=0,Zg(e)}function Xg(e,t,r,n){Xe(e,(eS<<1)+(n?1:0),3),uS(e,t,r,!0)}function yS(e){Xe(e,zg<<1,3),St(e,xl,Vt),aS(e)}function pS(e,t,r,n){var i,o,s=0;e.level>0?(e.strm.data_type===QT&&(e.strm.data_type=hS(e)),_f(e,e.l_desc),_f(e,e.d_desc),s=cS(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=r+5,r+4<=i&&t!==-1?Xg(e,t,r,n):e.strategy===JT||o===i?(Xe(e,(zg<<1)+(n?1:0),3),Sc(e,Vt,si)):(Xe(e,(tS<<1)+(n?1:0),3),dS(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),Sc(e,e.dyn_ltree,e.dyn_dtree)),Zg(e),n&&Kg(e)}function cr(e,t,r){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=r&255,e.last_lit++,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(_i[r]+ki+1)*2]++,e.dyn_dtree[qg(t)*2]++),e.last_lit===e.lit_bufsize-1}function bf(e,t,r,n){for(var i=e&65535|0,o=e>>>16&65535|0,s=0;r!==0;){s=r>2e3?2e3:r,r-=s;do i=i+t[n++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0}function _S(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t}var bS=_S();function Re(e,t,r,n){var i=bS,o=n+r;e^=-1;for(var s=n;s<o;s++)e=e>>>8^i[(e^t[s])&255];return e^-1}var rn=0,wS=1,mS=3,dr=4,xc=5,ir=0,Rc=1,hr=-2,vS=-3,La=-5,ES=-1,TS=1,Zi=2,SS=3,AS=4,NS=2,Il=8,BS=9,xS=29,RS=256,wf=RS+1+xS,IS=30,OS=19,CS=2*wf+1,LS=15,se=3,sr=258,pt=sr+se+1,PS=32,Ol=42,mf=69,fo=73,lo=91,uo=103,Hr=113,ti=666,Ne=1,zi=2,Xr=3,Mn=4,kS=3;function ar(e,t){return e.msg=kg[t],t}function Ic(e){return(e<<1)-(e>4?9:0)}function Vr(e){for(var t=e.length;--t>=0;)e[t]=0}function tr(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(qt(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))}function Le(e,t){pS(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,tr(e.strm)}function ie(e,t){e.pending_buf[e.pending++]=t}function Jn(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function zS(e,t,r,n){var i=e.avail_in;return i>n&&(i=n),i===0?0:(e.avail_in-=i,qt(t,e.input,e.next_in,i,r),e.state.wrap===1?e.adler=bf(e.adler,t,i,r):e.state.wrap===2&&(e.adler=Re(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)}function Yg(e,t){var r=e.max_chain_length,n=e.strstart,i,o,s=e.prev_length,a=e.nice_match,f=e.strstart>e.w_size-pt?e.strstart-(e.w_size-pt):0,l=e.window,u=e.w_mask,b=e.prev,p=e.strstart+sr,g=l[n+s-1],E=l[n+s];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do if(i=t,!(l[i+s]!==E||l[i+s-1]!==g||l[i]!==l[n]||l[++i]!==l[n+1])){n+=2,i++;do;while(l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&n<p);if(o=sr-(p-n),n=p-sr,o>s){if(e.match_start=t,s=o,o>=a)break;g=l[n+s-1],E=l[n+s]}}while((t=b[t&u])>f&&--r!==0);return s<=e.lookahead?s:e.lookahead}function $i(e){var t=e.w_size,r,n,i,o,s;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-pt)){qt(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,n=e.hash_size,r=n;do i=e.head[--r],e.head[r]=i>=t?i-t:0;while(--n);n=t,r=n;do i=e.prev[--r],e.prev[r]=i>=t?i-t:0;while(--n);o+=t}if(e.strm.avail_in===0)break;if(n=zS(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=n,e.lookahead+e.insert>=se)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+se-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<se)););}while(e.lookahead<pt&&e.strm.avail_in!==0)}function $S(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if($i(e),e.lookahead===0&&t===rn)return Ne;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((e.strstart===0||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,Le(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-pt&&(Le(e,!1),e.strm.avail_out===0))return Ne}return e.insert=0,t===dr?(Le(e,!0),e.strm.avail_out===0?Xr:Mn):(e.strstart>e.block_start&&(Le(e,!1),e.strm.avail_out===0),Ne)}function Pa(e,t){for(var r,n;;){if(e.lookahead<pt){if($i(e),e.lookahead<pt&&t===rn)return Ne;if(e.lookahead===0)break}if(r=0,e.lookahead>=se&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-pt&&(e.match_length=Yg(e,r)),e.match_length>=se)if(n=cr(e,e.strstart-e.match_start,e.match_length-se),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=se){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=cr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Le(e,!1),e.strm.avail_out===0))return Ne}return e.insert=e.strstart<se-1?e.strstart:se-1,t===dr?(Le(e,!0),e.strm.avail_out===0?Xr:Mn):e.last_lit&&(Le(e,!1),e.strm.avail_out===0)?Ne:zi}function cn(e,t){for(var r,n,i;;){if(e.lookahead<pt){if($i(e),e.lookahead<pt&&t===rn)return Ne;if(e.lookahead===0)break}if(r=0,e.lookahead>=se&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=se-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-pt&&(e.match_length=Yg(e,r),e.match_length<=5&&(e.strategy===TS||e.match_length===se&&e.strstart-e.match_start>4096)&&(e.match_length=se-1)),e.prev_length>=se&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-se,n=cr(e,e.strstart-1-e.prev_match,e.prev_length-se),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=se-1,e.strstart++,n&&(Le(e,!1),e.strm.avail_out===0))return Ne}else if(e.match_available){if(n=cr(e,0,e.window[e.strstart-1]),n&&Le(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Ne}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=cr(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<se-1?e.strstart:se-1,t===dr?(Le(e,!0),e.strm.avail_out===0?Xr:Mn):e.last_lit&&(Le(e,!1),e.strm.avail_out===0)?Ne:zi}function DS(e,t){for(var r,n,i,o,s=e.window;;){if(e.lookahead<=sr){if($i(e),e.lookahead<=sr&&t===rn)return Ne;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=se&&e.strstart>0&&(i=e.strstart-1,n=s[i],n===s[++i]&&n===s[++i]&&n===s[++i])){o=e.strstart+sr;do;while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<o);e.match_length=sr-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=se?(r=cr(e,1,e.match_length-se),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=cr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(Le(e,!1),e.strm.avail_out===0))return Ne}return e.insert=0,t===dr?(Le(e,!0),e.strm.avail_out===0?Xr:Mn):e.last_lit&&(Le(e,!1),e.strm.avail_out===0)?Ne:zi}function MS(e,t){for(var r;;){if(e.lookahead===0&&($i(e),e.lookahead===0)){if(t===rn)return Ne;break}if(e.match_length=0,r=cr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(Le(e,!1),e.strm.avail_out===0))return Ne}return e.insert=0,t===dr?(Le(e,!0),e.strm.avail_out===0?Xr:Mn):e.last_lit&&(Le(e,!1),e.strm.avail_out===0)?Ne:zi}function wt(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}var wn;wn=[new wt(0,0,0,0,$S),new wt(4,4,8,4,Pa),new wt(4,5,16,8,Pa),new wt(4,6,32,32,Pa),new wt(4,4,16,16,cn),new wt(8,16,32,32,cn),new wt(8,16,128,128,cn),new wt(8,32,128,256,cn),new wt(32,128,258,1024,cn),new wt(32,258,258,4096,cn)];function US(e){e.window_size=2*e.w_size,Vr(e.head),e.max_lazy_match=wn[e.level].max_lazy,e.good_match=wn[e.level].good_length,e.nice_match=wn[e.level].nice_length,e.max_chain_length=wn[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=se-1,e.match_available=0,e.ins_h=0}function VS(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Il,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new st(CS*2),this.dyn_dtree=new st((2*IS+1)*2),this.bl_tree=new st((2*OS+1)*2),Vr(this.dyn_ltree),Vr(this.dyn_dtree),Vr(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new st(LS+1),this.heap=new st(2*wf+1),Vr(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new st(2*wf+1),Vr(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function jS(e){var t;return!e||!e.state?ar(e,hr):(e.total_in=e.total_out=0,e.data_type=NS,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?Ol:Hr,e.adler=t.wrap===2?0:1,t.last_flush=rn,gS(t),ir)}function Jg(e){var t=jS(e);return t===ir&&US(e.state),t}function FS(e,t,r,n,i,o){if(!e)return hr;var s=1;if(t===ES&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),i<1||i>BS||r!==Il||n<8||n>15||t<0||t>9||o<0||o>AS)return ar(e,hr);n===8&&(n=9);var a=new VS;return e.state=a,a.strm=e,a.wrap=s,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+se-1)/se),a.window=new Bo(a.w_size*2),a.head=new st(a.hash_size),a.prev=new st(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Bo(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=(1+2)*a.lit_bufsize,a.level=t,a.strategy=o,a.method=r,Jg(e)}function HS(e,t){var r,n,i,o;if(!e||!e.state||t>xc||t<0)return e?ar(e,hr):hr;if(n=e.state,!e.output||!e.input&&e.avail_in!==0||n.status===ti&&t!==dr)return ar(e,e.avail_out===0?La:hr);if(n.strm=e,r=n.last_flush,n.last_flush=t,n.status===Ol)if(n.wrap===2)e.adler=0,ie(n,31),ie(n,139),ie(n,8),n.gzhead?(ie(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),ie(n,n.gzhead.time&255),ie(n,n.gzhead.time>>8&255),ie(n,n.gzhead.time>>16&255),ie(n,n.gzhead.time>>24&255),ie(n,n.level===9?2:n.strategy>=Zi||n.level<2?4:0),ie(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(ie(n,n.gzhead.extra.length&255),ie(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Re(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=mf):(ie(n,0),ie(n,0),ie(n,0),ie(n,0),ie(n,0),ie(n,n.level===9?2:n.strategy>=Zi||n.level<2?4:0),ie(n,kS),n.status=Hr);else{var s=Il+(n.w_bits-8<<4)<<8,a=-1;n.strategy>=Zi||n.level<2?a=0:n.level<6?a=1:n.level===6?a=2:a=3,s|=a<<6,n.strstart!==0&&(s|=PS),s+=31-s%31,n.status=Hr,Jn(n,s),n.strstart!==0&&(Jn(n,e.adler>>>16),Jn(n,e.adler&65535)),e.adler=1}if(n.status===mf)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=Re(e.adler,n.pending_buf,n.pending-i,i)),tr(e),i=n.pending,n.pending===n.pending_buf_size));)ie(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(e.adler=Re(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=fo)}else n.status=fo;if(n.status===fo)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=Re(e.adler,n.pending_buf,n.pending-i,i)),tr(e),i=n.pending,n.pending===n.pending_buf_size)){o=1;break}n.gzindex<n.gzhead.name.length?o=n.gzhead.name.charCodeAt(n.gzindex++)&255:o=0,ie(n,o)}while(o!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=Re(e.adler,n.pending_buf,n.pending-i,i)),o===0&&(n.gzindex=0,n.status=lo)}else n.status=lo;if(n.status===lo)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=Re(e.adler,n.pending_buf,n.pending-i,i)),tr(e),i=n.pending,n.pending===n.pending_buf_size)){o=1;break}n.gzindex<n.gzhead.comment.length?o=n.gzhead.comment.charCodeAt(n.gzindex++)&255:o=0,ie(n,o)}while(o!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=Re(e.adler,n.pending_buf,n.pending-i,i)),o===0&&(n.status=uo)}else n.status=uo;if(n.status===uo&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&tr(e),n.pending+2<=n.pending_buf_size&&(ie(n,e.adler&255),ie(n,e.adler>>8&255),e.adler=0,n.status=Hr)):n.status=Hr),n.pending!==0){if(tr(e),e.avail_out===0)return n.last_flush=-1,ir}else if(e.avail_in===0&&Ic(t)<=Ic(r)&&t!==dr)return ar(e,La);if(n.status===ti&&e.avail_in!==0)return ar(e,La);if(e.avail_in!==0||n.lookahead!==0||t!==rn&&n.status!==ti){var f=n.strategy===Zi?MS(n,t):n.strategy===SS?DS(n,t):wn[n.level].func(n,t);if((f===Xr||f===Mn)&&(n.status=ti),f===Ne||f===Xr)return e.avail_out===0&&(n.last_flush=-1),ir;if(f===zi&&(t===wS?yS(n):t!==xc&&(Xg(n,0,0,!1),t===mS&&(Vr(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),tr(e),e.avail_out===0))return n.last_flush=-1,ir}return t!==dr?ir:n.wrap<=0?Rc:(n.wrap===2?(ie(n,e.adler&255),ie(n,e.adler>>8&255),ie(n,e.adler>>16&255),ie(n,e.adler>>24&255),ie(n,e.total_in&255),ie(n,e.total_in>>8&255),ie(n,e.total_in>>16&255),ie(n,e.total_in>>24&255)):(Jn(n,e.adler>>>16),Jn(n,e.adler&65535)),tr(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?ir:Rc)}function qS(e){var t;return!e||!e.state?hr:(t=e.state.status,t!==Ol&&t!==mf&&t!==fo&&t!==lo&&t!==uo&&t!==Hr&&t!==ti?ar(e,hr):(e.state=null,t===Hr?ar(e,vS):ir))}var Ki=30,GS=12;function WS(e,t){var r,n,i,o,s,a,f,l,u,b,p,g,E,C,L,x,w,N,R,P,z,k,c,y,d;r=e.state,n=e.next_in,y=e.input,i=n+(e.avail_in-5),o=e.next_out,d=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),f=r.dmax,l=r.wsize,u=r.whave,b=r.wnext,p=r.window,g=r.hold,E=r.bits,C=r.lencode,L=r.distcode,x=(1<<r.lenbits)-1,w=(1<<r.distbits)-1;e:do{E<15&&(g+=y[n++]<<E,E+=8,g+=y[n++]<<E,E+=8),N=C[g&x];t:for(;;){if(R=N>>>24,g>>>=R,E-=R,R=N>>>16&255,R===0)d[o++]=N&65535;else if(R&16){P=N&65535,R&=15,R&&(E<R&&(g+=y[n++]<<E,E+=8),P+=g&(1<<R)-1,g>>>=R,E-=R),E<15&&(g+=y[n++]<<E,E+=8,g+=y[n++]<<E,E+=8),N=L[g&w];r:for(;;){if(R=N>>>24,g>>>=R,E-=R,R=N>>>16&255,R&16){if(z=N&65535,R&=15,E<R&&(g+=y[n++]<<E,E+=8,E<R&&(g+=y[n++]<<E,E+=8)),z+=g&(1<<R)-1,z>f){e.msg="invalid distance too far back",r.mode=Ki;break e}if(g>>>=R,E-=R,R=o-s,z>R){if(R=z-R,R>u&&r.sane){e.msg="invalid distance too far back",r.mode=Ki;break e}if(k=0,c=p,b===0){if(k+=l-R,R<P){P-=R;do d[o++]=p[k++];while(--R);k=o-z,c=d}}else if(b<R){if(k+=l+b-R,R-=b,R<P){P-=R;do d[o++]=p[k++];while(--R);if(k=0,b<P){R=b,P-=R;do d[o++]=p[k++];while(--R);k=o-z,c=d}}}else if(k+=b-R,R<P){P-=R;do d[o++]=p[k++];while(--R);k=o-z,c=d}for(;P>2;)d[o++]=c[k++],d[o++]=c[k++],d[o++]=c[k++],P-=3;P&&(d[o++]=c[k++],P>1&&(d[o++]=c[k++]))}else{k=o-z;do d[o++]=d[k++],d[o++]=d[k++],d[o++]=d[k++],P-=3;while(P>2);P&&(d[o++]=d[k++],P>1&&(d[o++]=d[k++]))}}else if(R&64){e.msg="invalid distance code",r.mode=Ki;break e}else{N=L[(N&65535)+(g&(1<<R)-1)];continue r}break}}else if(R&64)if(R&32){r.mode=GS;break e}else{e.msg="invalid literal/length code",r.mode=Ki;break e}else{N=C[(N&65535)+(g&(1<<R)-1)];continue t}break}}while(n<i&&o<a);P=E>>3,n-=P,E-=P<<3,g&=(1<<E)-1,e.next_in=n,e.next_out=o,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=o<a?257+(a-o):257-(o-a),r.hold=g,r.bits=E}var dn=15,Oc=852,Cc=592,Lc=0,ka=1,Pc=2,ZS=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],KS=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],XS=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],YS=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function ai(e,t,r,n,i,o,s,a){var f=a.bits,l=0,u=0,b=0,p=0,g=0,E=0,C=0,L=0,x=0,w=0,N,R,P,z,k,c=null,y=0,d,S=new st(dn+1),m=new st(dn+1),A=null,_=0,h,v,I;for(l=0;l<=dn;l++)S[l]=0;for(u=0;u<n;u++)S[t[r+u]]++;for(g=f,p=dn;p>=1&&S[p]===0;p--);if(g>p&&(g=p),p===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,a.bits=1,0;for(b=1;b<p&&S[b]===0;b++);for(g<b&&(g=b),L=1,l=1;l<=dn;l++)if(L<<=1,L-=S[l],L<0)return-1;if(L>0&&(e===Lc||p!==1))return-1;for(m[1]=0,l=1;l<dn;l++)m[l+1]=m[l]+S[l];for(u=0;u<n;u++)t[r+u]!==0&&(s[m[t[r+u]]++]=u);if(e===Lc?(c=A=s,d=19):e===ka?(c=ZS,y-=257,A=KS,_-=257,d=256):(c=XS,A=YS,d=-1),w=0,u=0,l=b,k=o,E=g,C=0,P=-1,x=1<<g,z=x-1,e===ka&&x>Oc||e===Pc&&x>Cc)return 1;for(;;){h=l-C,s[u]<d?(v=0,I=s[u]):s[u]>d?(v=A[_+s[u]],I=c[y+s[u]]):(v=32+64,I=0),N=1<<l-C,R=1<<E,b=R;do R-=N,i[k+(w>>C)+R]=h<<24|v<<16|I|0;while(R!==0);for(N=1<<l-1;w&N;)N>>=1;if(N!==0?(w&=N-1,w+=N):w=0,u++,--S[l]===0){if(l===p)break;l=t[r+s[u]]}if(l>g&&(w&z)!==P){for(C===0&&(C=g),k+=b,E=l-C,L=1<<E;E+C<p&&(L-=S[E+C],!(L<=0));)E++,L<<=1;if(x+=1<<E,e===ka&&x>Oc||e===Pc&&x>Cc)return 1;P=w&z,i[P]=g<<24|E<<16|k-o|0}}return w!==0&&(i[k+w]=l-C<<24|64<<16|0),a.bits=g,0}var JS=0,Qg=1,e0=2,kc=4,QS=5,Xi=6,wi=0,eA=1,tA=2,br=-2,rA=-3,nA=-4,iA=-5,zc=8,t0=1,$c=2,Dc=3,Mc=4,Uc=5,Vc=6,jc=7,Fc=8,Hc=9,qc=10,Gc=11,Dt=12,za=13,Wc=14,$a=15,Zc=16,Kc=17,Xc=18,Yc=19,Yi=20,Ji=21,Jc=22,Qc=23,ed=24,td=25,rd=26,Da=27,nd=28,id=29,he=30,oA=31,sA=32,aA=852,fA=592;function od(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function lA(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new st(320),this.work=new st(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function uA(e){var t;return!e||!e.state?br:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=t0,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new xo(aA),t.distcode=t.distdyn=new xo(fA),t.sane=1,t.back=-1,wi)}function r0(e){var t;return!e||!e.state?br:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,uA(e))}function cA(e,t){var r,n;return!e||!e.state||(n=e.state,t<0?(r=0,t=-t):(r=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?br:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,r0(e))}function dA(e,t){var r,n;return e?(n=new lA,e.state=n,n.window=null,r=cA(e,t),r!==wi&&(e.state=null),r):br}var sd=!0,Ma,Ua;function hA(e){if(sd){var t;for(Ma=new xo(512),Ua=new xo(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(ai(Qg,e.lens,0,288,Ma,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;ai(e0,e.lens,0,32,Ua,0,e.work,{bits:5}),sd=!1}e.lencode=Ma,e.lenbits=9,e.distcode=Ua,e.distbits=5}function gA(e,t,r,n){var i,o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Bo(o.wsize)),n>=o.wsize?(qt(o.window,t,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),qt(o.window,t,r-n,i,o.wnext),n-=i,n?(qt(o.window,t,r-n,n,0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function yA(e,t){var r,n,i,o,s,a,f,l,u,b,p,g,E,C,L=0,x,w,N,R,P,z,k,c,y=new Bo(4),d,S,m=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return br;r=e.state,r.mode===Dt&&(r.mode=za),s=e.next_out,i=e.output,f=e.avail_out,o=e.next_in,n=e.input,a=e.avail_in,l=r.hold,u=r.bits,b=a,p=f,c=wi;e:for(;;)switch(r.mode){case t0:if(r.wrap===0){r.mode=za;break}for(;u<16;){if(a===0)break e;a--,l+=n[o++]<<u,u+=8}if(r.wrap&2&&l===35615){r.check=0,y[0]=l&255,y[1]=l>>>8&255,r.check=Re(r.check,y,2,0),l=0,u=0,r.mode=$c;break}if(r.flags=0,r.head&&(r.head.done=!1),!(r.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",r.mode=he;break}if((l&15)!==zc){e.msg="unknown compression method",r.mode=he;break}if(l>>>=4,u-=4,k=(l&15)+8,r.wbits===0)r.wbits=k;else if(k>r.wbits){e.msg="invalid window size",r.mode=he;break}r.dmax=1<<k,e.adler=r.check=1,r.mode=l&512?qc:Dt,l=0,u=0;break;case $c:for(;u<16;){if(a===0)break e;a--,l+=n[o++]<<u,u+=8}if(r.flags=l,(r.flags&255)!==zc){e.msg="unknown compression method",r.mode=he;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=he;break}r.head&&(r.head.text=l>>8&1),r.flags&512&&(y[0]=l&255,y[1]=l>>>8&255,r.check=Re(r.check,y,2,0)),l=0,u=0,r.mode=Dc;case Dc:for(;u<32;){if(a===0)break e;a--,l+=n[o++]<<u,u+=8}r.head&&(r.head.time=l),r.flags&512&&(y[0]=l&255,y[1]=l>>>8&255,y[2]=l>>>16&255,y[3]=l>>>24&255,r.check=Re(r.check,y,4,0)),l=0,u=0,r.mode=Mc;case Mc:for(;u<16;){if(a===0)break e;a--,l+=n[o++]<<u,u+=8}r.head&&(r.head.xflags=l&255,r.head.os=l>>8),r.flags&512&&(y[0]=l&255,y[1]=l>>>8&255,r.check=Re(r.check,y,2,0)),l=0,u=0,r.mode=Uc;case Uc:if(r.flags&1024){for(;u<16;){if(a===0)break e;a--,l+=n[o++]<<u,u+=8}r.length=l,r.head&&(r.head.extra_len=l),r.flags&512&&(y[0]=l&255,y[1]=l>>>8&255,r.check=Re(r.check,y,2,0)),l=0,u=0}else r.head&&(r.head.extra=null);r.mode=Vc;case Vc:if(r.flags&1024&&(g=r.length,g>a&&(g=a),g&&(r.head&&(k=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),qt(r.head.extra,n,o,g,k)),r.flags&512&&(r.check=Re(r.check,n,g,o)),a-=g,o+=g,r.length-=g),r.length))break e;r.length=0,r.mode=jc;case jc:if(r.flags&2048){if(a===0)break e;g=0;do k=n[o+g++],r.head&&k&&r.length<65536&&(r.head.name+=String.fromCharCode(k));while(k&&g<a);if(r.flags&512&&(r.check=Re(r.check,n,g,o)),a-=g,o+=g,k)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=Fc;case Fc:if(r.flags&4096){if(a===0)break e;g=0;do k=n[o+g++],r.head&&k&&r.length<65536&&(r.head.comment+=String.fromCharCode(k));while(k&&g<a);if(r.flags&512&&(r.check=Re(r.check,n,g,o)),a-=g,o+=g,k)break e}else r.head&&(r.head.comment=null);r.mode=Hc;case Hc:if(r.flags&512){for(;u<16;){if(a===0)break e;a--,l+=n[o++]<<u,u+=8}if(l!==(r.check&65535)){e.msg="header crc mismatch",r.mode=he;break}l=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Dt;break;case qc:for(;u<32;){if(a===0)break e;a--,l+=n[o++]<<u,u+=8}e.adler=r.check=od(l),l=0,u=0,r.mode=Gc;case Gc:if(r.havedict===0)return e.next_out=s,e.avail_out=f,e.next_in=o,e.avail_in=a,r.hold=l,r.bits=u,tA;e.adler=r.check=1,r.mode=Dt;case Dt:if(t===QS||t===Xi)break e;case za:if(r.last){l>>>=u&7,u-=u&7,r.mode=Da;break}for(;u<3;){if(a===0)break e;a--,l+=n[o++]<<u,u+=8}switch(r.last=l&1,l>>>=1,u-=1,l&3){case 0:r.mode=Wc;break;case 1:if(hA(r),r.mode=Yi,t===Xi){l>>>=2,u-=2;break e}break;case 2:r.mode=Kc;break;case 3:e.msg="invalid block type",r.mode=he}l>>>=2,u-=2;break;case Wc:for(l>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,l+=n[o++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",r.mode=he;break}if(r.length=l&65535,l=0,u=0,r.mode=$a,t===Xi)break e;case $a:r.mode=Zc;case Zc:if(g=r.length,g){if(g>a&&(g=a),g>f&&(g=f),g===0)break e;qt(i,n,o,g,s),a-=g,o+=g,f-=g,s+=g,r.length-=g;break}r.mode=Dt;break;case Kc:for(;u<14;){if(a===0)break e;a--,l+=n[o++]<<u,u+=8}if(r.nlen=(l&31)+257,l>>>=5,u-=5,r.ndist=(l&31)+1,l>>>=5,u-=5,r.ncode=(l&15)+4,l>>>=4,u-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=he;break}r.have=0,r.mode=Xc;case Xc:for(;r.have<r.ncode;){for(;u<3;){if(a===0)break e;a--,l+=n[o++]<<u,u+=8}r.lens[m[r.have++]]=l&7,l>>>=3,u-=3}for(;r.have<19;)r.lens[m[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,d={bits:r.lenbits},c=ai(JS,r.lens,0,19,r.lencode,0,r.work,d),r.lenbits=d.bits,c){e.msg="invalid code lengths set",r.mode=he;break}r.have=0,r.mode=Yc;case Yc:for(;r.have<r.nlen+r.ndist;){for(;L=r.lencode[l&(1<<r.lenbits)-1],x=L>>>24,w=L>>>16&255,N=L&65535,!(x<=u);){if(a===0)break e;a--,l+=n[o++]<<u,u+=8}if(N<16)l>>>=x,u-=x,r.lens[r.have++]=N;else{if(N===16){for(S=x+2;u<S;){if(a===0)break e;a--,l+=n[o++]<<u,u+=8}if(l>>>=x,u-=x,r.have===0){e.msg="invalid bit length repeat",r.mode=he;break}k=r.lens[r.have-1],g=3+(l&3),l>>>=2,u-=2}else if(N===17){for(S=x+3;u<S;){if(a===0)break e;a--,l+=n[o++]<<u,u+=8}l>>>=x,u-=x,k=0,g=3+(l&7),l>>>=3,u-=3}else{for(S=x+7;u<S;){if(a===0)break e;a--,l+=n[o++]<<u,u+=8}l>>>=x,u-=x,k=0,g=11+(l&127),l>>>=7,u-=7}if(r.have+g>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=he;break}for(;g--;)r.lens[r.have++]=k}}if(r.mode===he)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=he;break}if(r.lenbits=9,d={bits:r.lenbits},c=ai(Qg,r.lens,0,r.nlen,r.lencode,0,r.work,d),r.lenbits=d.bits,c){e.msg="invalid literal/lengths set",r.mode=he;break}if(r.distbits=6,r.distcode=r.distdyn,d={bits:r.distbits},c=ai(e0,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,d),r.distbits=d.bits,c){e.msg="invalid distances set",r.mode=he;break}if(r.mode=Yi,t===Xi)break e;case Yi:r.mode=Ji;case Ji:if(a>=6&&f>=258){e.next_out=s,e.avail_out=f,e.next_in=o,e.avail_in=a,r.hold=l,r.bits=u,WS(e,p),s=e.next_out,i=e.output,f=e.avail_out,o=e.next_in,n=e.input,a=e.avail_in,l=r.hold,u=r.bits,r.mode===Dt&&(r.back=-1);break}for(r.back=0;L=r.lencode[l&(1<<r.lenbits)-1],x=L>>>24,w=L>>>16&255,N=L&65535,!(x<=u);){if(a===0)break e;a--,l+=n[o++]<<u,u+=8}if(w&&!(w&240)){for(R=x,P=w,z=N;L=r.lencode[z+((l&(1<<R+P)-1)>>R)],x=L>>>24,w=L>>>16&255,N=L&65535,!(R+x<=u);){if(a===0)break e;a--,l+=n[o++]<<u,u+=8}l>>>=R,u-=R,r.back+=R}if(l>>>=x,u-=x,r.back+=x,r.length=N,w===0){r.mode=rd;break}if(w&32){r.back=-1,r.mode=Dt;break}if(w&64){e.msg="invalid literal/length code",r.mode=he;break}r.extra=w&15,r.mode=Jc;case Jc:if(r.extra){for(S=r.extra;u<S;){if(a===0)break e;a--,l+=n[o++]<<u,u+=8}r.length+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Qc;case Qc:for(;L=r.distcode[l&(1<<r.distbits)-1],x=L>>>24,w=L>>>16&255,N=L&65535,!(x<=u);){if(a===0)break e;a--,l+=n[o++]<<u,u+=8}if(!(w&240)){for(R=x,P=w,z=N;L=r.distcode[z+((l&(1<<R+P)-1)>>R)],x=L>>>24,w=L>>>16&255,N=L&65535,!(R+x<=u);){if(a===0)break e;a--,l+=n[o++]<<u,u+=8}l>>>=R,u-=R,r.back+=R}if(l>>>=x,u-=x,r.back+=x,w&64){e.msg="invalid distance code",r.mode=he;break}r.offset=N,r.extra=w&15,r.mode=ed;case ed:if(r.extra){for(S=r.extra;u<S;){if(a===0)break e;a--,l+=n[o++]<<u,u+=8}r.offset+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=he;break}r.mode=td;case td:if(f===0)break e;if(g=p-f,r.offset>g){if(g=r.offset-g,g>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=he;break}g>r.wnext?(g-=r.wnext,E=r.wsize-g):E=r.wnext-g,g>r.length&&(g=r.length),C=r.window}else C=i,E=s-r.offset,g=r.length;g>f&&(g=f),f-=g,r.length-=g;do i[s++]=C[E++];while(--g);r.length===0&&(r.mode=Ji);break;case rd:if(f===0)break e;i[s++]=r.length,f--,r.mode=Ji;break;case Da:if(r.wrap){for(;u<32;){if(a===0)break e;a--,l|=n[o++]<<u,u+=8}if(p-=f,e.total_out+=p,r.total+=p,p&&(e.adler=r.check=r.flags?Re(r.check,i,p,s-p):bf(r.check,i,p,s-p)),p=f,(r.flags?l:od(l))!==r.check){e.msg="incorrect data check",r.mode=he;break}l=0,u=0}r.mode=nd;case nd:if(r.wrap&&r.flags){for(;u<32;){if(a===0)break e;a--,l+=n[o++]<<u,u+=8}if(l!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=he;break}l=0,u=0}r.mode=id;case id:c=eA;break e;case he:c=rA;break e;case oA:return nA;case sA:default:return br}return e.next_out=s,e.avail_out=f,e.next_in=o,e.avail_in=a,r.hold=l,r.bits=u,(r.wsize||p!==e.avail_out&&r.mode<he&&(r.mode<Da||t!==kc))&&gA(e,e.output,e.next_out,p-e.avail_out),b-=e.avail_in,p-=e.avail_out,e.total_in+=b,e.total_out+=p,r.total+=p,r.wrap&&p&&(e.adler=r.check=r.flags?Re(r.check,i,p,e.next_out-p):bf(r.check,i,p,e.next_out-p)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Dt?128:0)+(r.mode===Yi||r.mode===$a?256:0),(b===0&&p===0||t===kc)&&c===wi&&(c=iA),c}function pA(e){if(!e||!e.state)return br;var t=e.state;return t.window&&(t.window=null),e.state=null,wi}var Cl=0,Un=1,Cs=2,mi=3,Io=4,xn=5,vi=6,Ei=7,n0=0,i0=1,o0=2,s0=3,a0=4,f0=5,_A=6,Ls=0,l0=1,bA=2,wA=-1,mA=-2,vA=-3,EA=-5,TA=0,SA=1,AA=9,NA=-1,BA=1,xA=2,RA=3,IA=4,OA=0,CA=0,LA=1,PA=2,u0=8;function Ct(e){if(e<Un||e>Ei)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}Ct.prototype.init=function(e,t,r,n,i){this.windowBits=e,this.level=t,this.memLevel=r,this.strategy=n,(this.mode===mi||this.mode===Io)&&(this.windowBits+=16),this.mode===Ei&&(this.windowBits+=32),(this.mode===xn||this.mode===vi)&&(this.windowBits=-this.windowBits),this.strm=new YT;var o;switch(this.mode){case Un:case mi:case xn:o=FS(this.strm,this.level,u0,this.windowBits,this.memLevel,this.strategy);break;case Cs:case Io:case vi:case Ei:o=dA(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}if(o!==Ls){this._error(o);return}this.write_in_progress=!1,this.init_done=!0};Ct.prototype.params=function(){throw new Error("deflateParams Not supported")};Ct.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===Cl)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")};Ct.prototype.write=function(e,t,r,n,i,o,s){this._writeCheck(),this.write_in_progress=!0;var a=this;return at.nextTick(function(){a.write_in_progress=!1;var f=a._write(e,t,r,n,i,o,s);a.callback(f[0],f[1]),a.pending_close&&a.close()}),this};function kA(e,t){for(var r=0;r<e.length;r++)this[t+r]=e[r]}Ct.prototype.writeSync=function(e,t,r,n,i,o,s){return this._writeCheck(),this._write(e,t,r,n,i,o,s)};Ct.prototype._write=function(e,t,r,n,i,o,s){if(this.write_in_progress=!0,e!==n0&&e!==i0&&e!==o0&&e!==s0&&e!==a0&&e!==f0)throw new Error("Invalid flush value");t==null&&(t=new q(0),n=0,r=0),i._set?i.set=i._set:i.set=kA;var a=this.strm;a.avail_in=n,a.input=t,a.next_in=r,a.avail_out=s,a.output=i,a.next_out=o;var f;switch(this.mode){case Un:case mi:case xn:f=HS(a,e);break;case Ei:case Cs:case Io:case vi:f=yA(a,e);break;default:throw new Error("Unknown mode "+this.mode)}return f!==l0&&f!==Ls&&this._error(f),this.write_in_progress=!1,[a.avail_in,a.avail_out]};Ct.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,this.mode===Un||this.mode===mi||this.mode===xn?qS(this.strm):pA(this.strm),this.mode=Cl};var Qi;Ct.prototype.reset=function(){switch(this.mode){case Un:case xn:Qi=Jg(this.strm);break;case Cs:case vi:Qi=r0(this.strm);break}Qi!==Ls&&this._error(Qi)};Ct.prototype._error=function(e){this.onerror(kg[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()};const ad=Object.freeze(Object.defineProperty({__proto__:null,DEFLATE:Un,DEFLATERAW:xn,GUNZIP:Io,GZIP:mi,INFLATE:Cs,INFLATERAW:vi,NONE:Cl,UNZIP:Ei,Z_BEST_COMPRESSION:AA,Z_BEST_SPEED:SA,Z_BINARY:CA,Z_BLOCK:f0,Z_BUF_ERROR:EA,Z_DATA_ERROR:vA,Z_DEFAULT_COMPRESSION:NA,Z_DEFAULT_STRATEGY:OA,Z_DEFLATED:u0,Z_ERRNO:wA,Z_FILTERED:BA,Z_FINISH:a0,Z_FIXED:IA,Z_FULL_FLUSH:s0,Z_HUFFMAN_ONLY:xA,Z_NEED_DICT:bA,Z_NO_COMPRESSION:TA,Z_NO_FLUSH:n0,Z_OK:Ls,Z_PARTIAL_FLUSH:i0,Z_RLE:RA,Z_STREAM_END:l0,Z_STREAM_ERROR:mA,Z_SYNC_FLUSH:o0,Z_TEXT:LA,Z_TREES:_A,Z_UNKNOWN:PA,Zlib:Ct},Symbol.toStringTag,{value:"Module"}));function zA(e,t){if(!e)throw new Error(t)}var G={};Object.keys(ad).forEach(function(e){G[e]=ad[e]});G.Z_MIN_WINDOWBITS=8;G.Z_MAX_WINDOWBITS=15;G.Z_DEFAULT_WINDOWBITS=15;G.Z_MIN_CHUNK=64;G.Z_MAX_CHUNK=1/0;G.Z_DEFAULT_CHUNK=16*1024;G.Z_MIN_MEMLEVEL=1;G.Z_MAX_MEMLEVEL=9;G.Z_DEFAULT_MEMLEVEL=8;G.Z_MIN_LEVEL=-1;G.Z_MAX_LEVEL=9;G.Z_DEFAULT_LEVEL=G.Z_DEFAULT_COMPRESSION;var fi={Z_OK:G.Z_OK,Z_STREAM_END:G.Z_STREAM_END,Z_NEED_DICT:G.Z_NEED_DICT,Z_ERRNO:G.Z_ERRNO,Z_STREAM_ERROR:G.Z_STREAM_ERROR,Z_DATA_ERROR:G.Z_DATA_ERROR,Z_MEM_ERROR:G.Z_MEM_ERROR,Z_BUF_ERROR:G.Z_BUF_ERROR,Z_VERSION_ERROR:G.Z_VERSION_ERROR};Object.keys(fi).forEach(function(e){fi[fi[e]]=e});function c0(e){return new wr(e)}function d0(e){return new mr(e)}function h0(e){return new Tr(e)}function g0(e){return new Sr(e)}function y0(e){return new vr(e)}function p0(e){return new Er(e)}function _0(e){return new Ar(e)}function b0(e,t,r){return typeof t=="function"&&(r=t,t={}),nn(new wr(t),e,r)}function w0(e,t){return on(new wr(t),e)}function m0(e,t,r){return typeof t=="function"&&(r=t,t={}),nn(new vr(t),e,r)}function v0(e,t){return on(new vr(t),e)}function E0(e,t,r){return typeof t=="function"&&(r=t,t={}),nn(new Tr(t),e,r)}function T0(e,t){return on(new Tr(t),e)}function S0(e,t,r){return typeof t=="function"&&(r=t,t={}),nn(new Ar(t),e,r)}function A0(e,t){return on(new Ar(t),e)}function N0(e,t,r){return typeof t=="function"&&(r=t,t={}),nn(new mr(t),e,r)}function B0(e,t){return on(new mr(t),e)}function x0(e,t,r){return typeof t=="function"&&(r=t,t={}),nn(new Er(t),e,r)}function R0(e,t){return on(new Er(t),e)}function I0(e,t,r){return typeof t=="function"&&(r=t,t={}),nn(new Sr(t),e,r)}function O0(e,t){return on(new Sr(t),e)}function nn(e,t,r){var n=[],i=0;e.on("error",s),e.on("end",a),e.end(t),o();function o(){for(var f;(f=e.read())!==null;)n.push(f),i+=f.length;e.once("readable",o)}function s(f){e.removeListener("end",a),e.removeListener("readable",o),r(f)}function a(){var f=q.concat(n,i);n=[],r(null,f),e.close()}}function on(e,t){if(typeof t=="string"&&(t=new q(t)),!q.isBuffer(t))throw new TypeError("Not a string or buffer");var r=G.Z_FINISH;return e._processChunk(t,r)}function wr(e){if(!(this instanceof wr))return new wr(e);ge.call(this,e,G.DEFLATE)}function mr(e){if(!(this instanceof mr))return new mr(e);ge.call(this,e,G.INFLATE)}function vr(e){if(!(this instanceof vr))return new vr(e);ge.call(this,e,G.GZIP)}function Er(e){if(!(this instanceof Er))return new Er(e);ge.call(this,e,G.GUNZIP)}function Tr(e){if(!(this instanceof Tr))return new Tr(e);ge.call(this,e,G.DEFLATERAW)}function Sr(e){if(!(this instanceof Sr))return new Sr(e);ge.call(this,e,G.INFLATERAW)}function Ar(e){if(!(this instanceof Ar))return new Ar(e);ge.call(this,e,G.UNZIP)}function ge(e,t){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||G.Z_DEFAULT_CHUNK,_d.call(this,e),e.flush&&e.flush!==G.Z_NO_FLUSH&&e.flush!==G.Z_PARTIAL_FLUSH&&e.flush!==G.Z_SYNC_FLUSH&&e.flush!==G.Z_FULL_FLUSH&&e.flush!==G.Z_FINISH&&e.flush!==G.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||G.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<G.Z_MIN_CHUNK||e.chunkSize>G.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<G.Z_MIN_WINDOWBITS||e.windowBits>G.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<G.Z_MIN_LEVEL||e.level>G.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<G.Z_MIN_MEMLEVEL||e.memLevel>G.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=G.Z_FILTERED&&e.strategy!=G.Z_HUFFMAN_ONLY&&e.strategy!=G.Z_RLE&&e.strategy!=G.Z_FIXED&&e.strategy!=G.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!q.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new G.Zlib(t);var r=this;this._hadError=!1,this._binding.onerror=function(o,s){r._binding=null,r._hadError=!0;var a=new Error(o);a.errno=s,a.code=G.codes[s],r.emit("error",a)};var n=G.Z_DEFAULT_COMPRESSION;typeof e.level=="number"&&(n=e.level);var i=G.Z_DEFAULT_STRATEGY;typeof e.strategy=="number"&&(i=e.strategy),this._binding.init(e.windowBits||G.Z_DEFAULT_WINDOWBITS,n,e.memLevel||G.Z_DEFAULT_MEMLEVEL,i,e.dictionary),this._buffer=new q(this._chunkSize),this._offset=0,this._closed=!1,this._level=n,this._strategy=i,this.once("end",this.close)}Rt(ge,_d);ge.prototype.params=function(e,t,r){if(e<G.Z_MIN_LEVEL||e>G.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(t!=G.Z_FILTERED&&t!=G.Z_HUFFMAN_ONLY&&t!=G.Z_RLE&&t!=G.Z_FIXED&&t!=G.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+t);if(this._level!==e||this._strategy!==t){var n=this;this.flush(G.Z_SYNC_FLUSH,function(){n._binding.params(e,t),n._hadError||(n._level=e,n._strategy=t,r&&r())})}else at.nextTick(r)};ge.prototype.reset=function(){return this._binding.reset()};ge.prototype._flush=function(e){this._transform(new q(0),"",e)};ge.prototype.flush=function(e,t){var r=this._writableState;if((typeof e=="function"||e===void 0&&!t)&&(t=e,e=G.Z_FULL_FLUSH),r.ended)t&&at.nextTick(t);else if(r.ending)t&&this.once("end",t);else if(r.needDrain){var n=this;this.once("drain",function(){n.flush(t)})}else this._flushFlag=e,this.write(new q(0),"",t)};ge.prototype.close=function(e){if(e&&at.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var t=this;at.nextTick(function(){t.emit("close")})}};ge.prototype._transform=function(e,t,r){var n,i=this._writableState,o=i.ending||i.ended,s=o&&(!e||i.length===e.length);if(!e===null&&!q.isBuffer(e))return r(new Error("invalid input"));s?n=G.Z_FINISH:(n=this._flushFlag,e.length>=i.length&&(this._flushFlag=this._opts.flush||G.Z_NO_FLUSH)),this._processChunk(e,n,r)};ge.prototype._processChunk=function(e,t,r){var n=e&&e.length,i=this._chunkSize-this._offset,o=0,s=this,a=typeof r=="function";if(!a){var f=[],l=0,u;this.on("error",function(C){u=C});do var b=this._binding.writeSync(t,e,o,n,this._buffer,this._offset,i);while(!this._hadError&&E(b[0],b[1]));if(this._hadError)throw u;var p=q.concat(f,l);return this.close(),p}var g=this._binding.write(t,e,o,n,this._buffer,this._offset,i);g.buffer=e,g.callback=E;function E(C,L){if(!s._hadError){var x=i-L;if(zA(x>=0,"have should not go down"),x>0){var w=s._buffer.slice(s._offset,s._offset+x);s._offset+=x,a?s.push(w):(f.push(w),l+=w.length)}if((L===0||s._offset>=s._chunkSize)&&(i=s._chunkSize,s._offset=0,s._buffer=new q(s._chunkSize)),L===0){if(o+=n-C,n=C,!a)return!0;var N=s._binding.write(t,e,o,n,s._buffer,s._offset,s._chunkSize);N.callback=E,N.buffer=e;return}if(!a)return!1;r()}}};Rt(wr,ge);Rt(mr,ge);Rt(vr,ge);Rt(Er,ge);Rt(Tr,ge);Rt(Sr,ge);Rt(Ar,ge);const $A={codes:fi,createDeflate:c0,createInflate:d0,createDeflateRaw:h0,createInflateRaw:g0,createGzip:y0,createGunzip:p0,createUnzip:_0,deflate:b0,deflateSync:w0,gzip:m0,gzipSync:v0,deflateRaw:E0,deflateRawSync:T0,unzip:S0,unzipSync:A0,inflate:N0,inflateSync:B0,gunzip:x0,gunzipSync:R0,inflateRaw:I0,inflateRawSync:O0,Deflate:wr,Inflate:mr,Gzip:vr,Gunzip:Er,DeflateRaw:Tr,InflateRaw:Sr,Unzip:Ar,Zlib:ge},DA=Object.freeze(Object.defineProperty({__proto__:null,Deflate:wr,DeflateRaw:Tr,Gunzip:Er,Gzip:vr,Inflate:mr,InflateRaw:Sr,Unzip:Ar,Zlib:ge,codes:fi,createDeflate:c0,createDeflateRaw:h0,createGunzip:p0,createGzip:y0,createInflate:d0,createInflateRaw:g0,createUnzip:_0,default:$A,deflate:b0,deflateRaw:E0,deflateRawSync:T0,deflateSync:w0,gunzip:x0,gunzipSync:R0,gzip:m0,gzipSync:v0,inflate:N0,inflateRaw:I0,inflateRawSync:O0,inflateSync:B0,unzip:S0,unzipSync:A0},Symbol.toStringTag,{value:"Module"})),MA=Jr(DA),UA=Jr(ZT);Object.defineProperty(Kr,"__esModule",{value:!0});Kr.InvalidStatusCodeError=Kr.InvalidCertError=void 0;const C0=Object.freeze({redirect:!0,expectStatusCode:200,headers:{},full:!1,keepAlive:!0,cors:!1,referrer:!1,sslAllowSelfSigned:!1,_redirectCount:0});class vf extends Error{constructor(t,r){super(t),this.fingerprint256=r}}Kr.InvalidCertError=vf;class Ll extends Error{constructor(t){super(`Request Failed. Status Code: ${t}`),this.statusCode=t}}Kr.InvalidStatusCodeError=Ll;function L0(e,t){if(!t||t==="text"||t==="json")try{let r=new TextDecoder("utf8",{fatal:!0}).decode(e);if(t==="text")return r;try{return JSON.parse(r)}catch(n){if(t==="json")throw n;return r}}catch(r){if(t==="text"||t==="json")throw r}return e}let fd={};function Ef(e,t){let r={...C0,...t};const n=mc,i=mc,o=MA,{promisify:s}=j0,{resolve:a}=UA,f=!!/^https/.test(e);let l={method:r.method||"GET",headers:{"Accept-Encoding":"gzip, deflate, br"}};const u=p=>p.replace(/:| /g,"").toLowerCase();if(r.keepAlive){const p={keepAlive:!0,keepAliveMsecs:3e4,maxFreeSockets:1024,maxCachedSessions:1024},g=[f,f&&r.sslPinnedCertificates?.map(E=>u(E)).sort()].join();l.agent=fd[g]||(fd[g]=new(f?i:n).Agent(p))}r.type==="json"&&(l.headers["Content-Type"]="application/json"),r.data&&(r.method||(l.method="POST"),l.body=r.type==="json"?JSON.stringify(r.data):r.data),l.headers={...l.headers,...r.headers},r.sslAllowSelfSigned&&(l.rejectUnauthorized=!1);const b=async p=>{const g=p.statusCode;if(r.redirect&&300<=g&&g<400&&p.headers.location){if(r._redirectCount==10)throw new Error("Request failed. Too much redirects.");return r._redirectCount+=1,await Ef(a(e,p.headers.location),r)}if(r.expectStatusCode&&g!==r.expectStatusCode)throw p.resume(),new Ll(g);let E=[];for await(const w of p)E.push(w);let C=q.concat(E);const L=p.headers["content-encoding"];L==="br"&&(C=await s(o.brotliDecompress)(C)),(L==="gzip"||L==="deflate")&&(C=await s(o.unzip)(C));const x=L0(C,r.type);return r.full?{headers:p.headers,status:g,body:x}:x};return new Promise((p,g)=>{const E=async w=>{if(w&&w.code==="DEPTH_ZERO_SELF_SIGNED_CERT")try{await Ef(e,{...r,sslAllowSelfSigned:!0,sslPinnedCertificates:[]})}catch(N){N&&N.fingerprint256&&(w=new vf(`Self-signed SSL certificate: ${N.fingerprint256}`,N.fingerprint256))}g(w)},C=(f?i:n).request(e,l,w=>{w.on("error",E),(async()=>{try{p(await b(w))}catch(N){g(N)}})()});C.on("error",E);const L=r.sslPinnedCertificates?.map(w=>u(w)),x=w=>{const N=u(w.getPeerCertificate()?.fingerprint256||"");if(!(!N&&w.isSessionReused())&&!L.includes(N))return C.emit("error",new vf(`Invalid SSL certificate: ${N} Expected: ${L}`,N)),C.abort()};r.sslPinnedCertificates&&C.on("socket",w=>{w.listeners("secureConnect").map(R=>(R.name||"").replace("bound ","")).includes("mfetchSecureConnect")||w.on("secureConnect",x.bind(null,w))}),r.keepAlive&&C.setNoDelay(!0),l.body&&C.write(l.body),C.end()})}const VA=new Set(["Accept","Accept-Language","Content-Language","Content-Type"].map(e=>e.toLowerCase())),jA=new Set(["Accept-Charset","Accept-Encoding","Access-Control-Request-Headers","Access-Control-Request-Method","Connection","Content-Length","Cookie","Cookie2","Date","DNT","Expect","Host","Keep-Alive","Origin","Referer","TE","Trailer","Transfer-Encoding","Upgrade","Via"].map(e=>e.toLowerCase()));async function FA(e,t){let r={...C0,...t};const n=new Headers;r.type==="json"&&n.set("Content-Type","application/json");let i=new URL(e);if(i.username){const f=btoa(`${i.username}:${i.password}`);n.set("Authorization",`Basic ${f}`),i.username="",i.password=""}e=""+i;for(let f in r.headers){const l=f.toLowerCase();(VA.has(l)||r.cors&&!jA.has(l))&&n.set(f,r.headers[f])}let o={headers:n,redirect:r.redirect?"follow":"manual"};r.referrer||(o.referrerPolicy="no-referrer"),r.cors&&(o.mode="cors"),r.data&&(r.method||(o.method="POST"),o.body=r.type==="json"?JSON.stringify(r.data):r.data);const s=await fetch(e,o);if(r.expectStatusCode&&s.status!==r.expectStatusCode)throw new Ll(s.status);const a=L0(new Uint8Array(await s.arrayBuffer()),r.type);return r.full?{headers:Object.fromEntries(s.headers.entries()),status:s.status,body:a}:a}const HA=!!(typeof at=="object"&&at.versions&&at.versions.node&&at.versions.v8);function qA(e,t){return(HA?Ef:FA)(e,t)}Kr.default=qA;Object.defineProperty(Bn,"__esModule",{value:!0});Bn.getProvider=Bn.fetchFromProvider=void 0;const GA=Kr,WA=async(e,t)=>(await(0,GA.default)(e,{headers:{"content-type":"application/json"},type:"json",data:{method:t.method,params:t.params,jsonrpc:"2.0",id:1}})).result;Bn.fetchFromProvider=WA;const ZA=e=>{if(typeof e=="string")return e;if(e?.connection?.url!==void 0)return e.connection.url;throw new Error("Must provide valid provider URL or Web3Provider")};Bn.getProvider=ZA;(function(e){var t=Ze&&Ze.__createBinding||(Object.create?function(i,o,s,a){a===void 0&&(a=s);var f=Object.getOwnPropertyDescriptor(o,s);(!f||("get"in f?!o.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(i,a,f)}:function(i,o,s,a){a===void 0&&(a=s),i[a]=o[s]}),r=Ze&&Ze.__exportStar||function(i,o){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&t(o,i,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.toAscii=e.stripHexPrefix=e.padToEven=e.isHexString=e.isHexPrefixed=e.getKeys=e.getBinarySize=e.fromUtf8=e.fromAscii=e.arrayContainsArray=e.ssz=void 0,r(Ni,e),r(Jo,e),r(Xf,e),r(Bi,e),r(es,e),r($e,e),r(tn,e),e.ssz=og,r(Qf,e),r(Sg,e),r(Rs,e);var n=le;Object.defineProperty(e,"arrayContainsArray",{enumerable:!0,get:function(){return n.arrayContainsArray}}),Object.defineProperty(e,"fromAscii",{enumerable:!0,get:function(){return n.fromAscii}}),Object.defineProperty(e,"fromUtf8",{enumerable:!0,get:function(){return n.fromUtf8}}),Object.defineProperty(e,"getBinarySize",{enumerable:!0,get:function(){return n.getBinarySize}}),Object.defineProperty(e,"getKeys",{enumerable:!0,get:function(){return n.getKeys}}),Object.defineProperty(e,"isHexPrefixed",{enumerable:!0,get:function(){return n.isHexPrefixed}}),Object.defineProperty(e,"isHexString",{enumerable:!0,get:function(){return n.isHexString}}),Object.defineProperty(e,"padToEven",{enumerable:!0,get:function(){return n.padToEven}}),Object.defineProperty(e,"stripHexPrefix",{enumerable:!0,get:function(){return n.stripHexPrefix}}),Object.defineProperty(e,"toAscii",{enumerable:!0,get:function(){return n.toAscii}}),r(Is,e),r(Bn,e)})(ot);var KA=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Va=Math.ceil,Et=Math.floor,We="[BigNumber Error] ",ld=We+"Number primitive has more than 15 significant digits: ",ut=1e14,J=14,ja=9007199254740991,Fa=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],er=1e7,xe=1e9;function P0(e){var t,r,n,i=w.prototype={constructor:w,toString:null,valueOf:null},o=new w(1),s=20,a=4,f=-7,l=21,u=-1e7,b=1e7,p=!1,g=1,E=0,C={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},L="0123456789abcdefghijklmnopqrstuvwxyz",x=!0;function w(c,y){var d,S,m,A,_,h,v,I,O=this;if(!(O instanceof w))return new w(c,y);if(y==null){if(c&&c._isBigNumber===!0){O.s=c.s,!c.c||c.e>b?O.c=O.e=null:c.e<u?O.c=[O.e=0]:(O.e=c.e,O.c=c.c.slice());return}if((h=typeof c=="number")&&c*0==0){if(O.s=1/c<0?(c=-c,-1):1,c===~~c){for(A=0,_=c;_>=10;_/=10,A++);A>b?O.c=O.e=null:(O.e=A,O.c=[c]);return}I=String(c)}else{if(!KA.test(I=String(c)))return n(O,I,h);O.s=I.charCodeAt(0)==45?(I=I.slice(1),-1):1}(A=I.indexOf("."))>-1&&(I=I.replace(".","")),(_=I.search(/e/i))>0?(A<0&&(A=_),A+=+I.slice(_+1),I=I.substring(0,_)):A<0&&(A=I.length)}else{if(pe(y,2,L.length,"Base"),y==10&&x)return O=new w(c),z(O,s+O.e+1,a);if(I=String(c),h=typeof c=="number"){if(c*0!=0)return n(O,I,h,y);if(O.s=1/c<0?(I=I.slice(1),-1):1,w.DEBUG&&I.replace(/^0\.0*|\./,"").length>15)throw Error(ld+c)}else O.s=I.charCodeAt(0)===45?(I=I.slice(1),-1):1;for(d=L.slice(0,y),A=_=0,v=I.length;_<v;_++)if(d.indexOf(S=I.charAt(_))<0){if(S=="."){if(_>A){A=v;continue}}else if(!m&&(I==I.toUpperCase()&&(I=I.toLowerCase())||I==I.toLowerCase()&&(I=I.toUpperCase()))){m=!0,_=-1,A=0;continue}return n(O,String(c),h,y)}h=!1,I=r(I,y,10,O.s),(A=I.indexOf("."))>-1?I=I.replace(".",""):A=I.length}for(_=0;I.charCodeAt(_)===48;_++);for(v=I.length;I.charCodeAt(--v)===48;);if(I=I.slice(_,++v)){if(v-=_,h&&w.DEBUG&&v>15&&(c>ja||c!==Et(c)))throw Error(ld+O.s*c);if((A=A-_-1)>b)O.c=O.e=null;else if(A<u)O.c=[O.e=0];else{if(O.e=A,O.c=[],_=(A+1)%J,A<0&&(_+=J),_<v){for(_&&O.c.push(+I.slice(0,_)),v-=J;_<v;)O.c.push(+I.slice(_,_+=J));_=J-(I=I.slice(_)).length}else _-=v;for(;_--;I+="0");O.c.push(+I)}}else O.c=[O.e=0]}w.clone=P0,w.ROUND_UP=0,w.ROUND_DOWN=1,w.ROUND_CEIL=2,w.ROUND_FLOOR=3,w.ROUND_HALF_UP=4,w.ROUND_HALF_DOWN=5,w.ROUND_HALF_EVEN=6,w.ROUND_HALF_CEIL=7,w.ROUND_HALF_FLOOR=8,w.EUCLID=9,w.config=w.set=function(c){var y,d;if(c!=null)if(typeof c=="object"){if(c.hasOwnProperty(y="DECIMAL_PLACES")&&(d=c[y],pe(d,0,xe,y),s=d),c.hasOwnProperty(y="ROUNDING_MODE")&&(d=c[y],pe(d,0,8,y),a=d),c.hasOwnProperty(y="EXPONENTIAL_AT")&&(d=c[y],d&&d.pop?(pe(d[0],-xe,0,y),pe(d[1],0,xe,y),f=d[0],l=d[1]):(pe(d,-xe,xe,y),f=-(l=d<0?-d:d))),c.hasOwnProperty(y="RANGE"))if(d=c[y],d&&d.pop)pe(d[0],-xe,-1,y),pe(d[1],1,xe,y),u=d[0],b=d[1];else if(pe(d,-xe,xe,y),d)u=-(b=d<0?-d:d);else throw Error(We+y+" cannot be zero: "+d);if(c.hasOwnProperty(y="CRYPTO"))if(d=c[y],d===!!d)if(d)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))p=d;else throw p=!d,Error(We+"crypto unavailable");else p=d;else throw Error(We+y+" not true or false: "+d);if(c.hasOwnProperty(y="MODULO_MODE")&&(d=c[y],pe(d,0,9,y),g=d),c.hasOwnProperty(y="POW_PRECISION")&&(d=c[y],pe(d,0,xe,y),E=d),c.hasOwnProperty(y="FORMAT"))if(d=c[y],typeof d=="object")C=d;else throw Error(We+y+" not an object: "+d);if(c.hasOwnProperty(y="ALPHABET"))if(d=c[y],typeof d=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(d))x=d.slice(0,10)=="0123456789",L=d;else throw Error(We+y+" invalid: "+d)}else throw Error(We+"Object expected: "+c);return{DECIMAL_PLACES:s,ROUNDING_MODE:a,EXPONENTIAL_AT:[f,l],RANGE:[u,b],CRYPTO:p,MODULO_MODE:g,POW_PRECISION:E,FORMAT:C,ALPHABET:L}},w.isBigNumber=function(c){if(!c||c._isBigNumber!==!0)return!1;if(!w.DEBUG)return!0;var y,d,S=c.c,m=c.e,A=c.s;e:if({}.toString.call(S)=="[object Array]"){if((A===1||A===-1)&&m>=-xe&&m<=xe&&m===Et(m)){if(S[0]===0){if(m===0&&S.length===1)return!0;break e}if(y=(m+1)%J,y<1&&(y+=J),String(S[0]).length==y){for(y=0;y<S.length;y++)if(d=S[y],d<0||d>=ut||d!==Et(d))break e;if(d!==0)return!0}}}else if(S===null&&m===null&&(A===null||A===1||A===-1))return!0;throw Error(We+"Invalid BigNumber: "+c)},w.maximum=w.max=function(){return R(arguments,i.lt)},w.minimum=w.min=function(){return R(arguments,i.gt)},w.random=function(){var c=9007199254740992,y=Math.random()*c&2097151?function(){return Et(Math.random()*c)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(d){var S,m,A,_,h,v=0,I=[],O=new w(o);if(d==null?d=s:pe(d,0,xe),_=Va(d/J),p)if(crypto.getRandomValues){for(S=crypto.getRandomValues(new Uint32Array(_*=2));v<_;)h=S[v]*131072+(S[v+1]>>>11),h>=9e15?(m=crypto.getRandomValues(new Uint32Array(2)),S[v]=m[0],S[v+1]=m[1]):(I.push(h%1e14),v+=2);v=_/2}else if(crypto.randomBytes){for(S=crypto.randomBytes(_*=7);v<_;)h=(S[v]&31)*281474976710656+S[v+1]*1099511627776+S[v+2]*4294967296+S[v+3]*16777216+(S[v+4]<<16)+(S[v+5]<<8)+S[v+6],h>=9e15?crypto.randomBytes(7).copy(S,v):(I.push(h%1e14),v+=7);v=_/7}else throw p=!1,Error(We+"crypto unavailable");if(!p)for(;v<_;)h=y(),h<9e15&&(I[v++]=h%1e14);for(_=I[--v],d%=J,_&&d&&(h=Fa[J-d],I[v]=Et(_/h)*h);I[v]===0;I.pop(),v--);if(v<0)I=[A=0];else{for(A=-1;I[0]===0;I.splice(0,1),A-=J);for(v=1,h=I[0];h>=10;h/=10,v++);v<J&&(A-=J-v)}return O.e=A,O.c=I,O}}(),w.sum=function(){for(var c=1,y=arguments,d=new w(y[0]);c<y.length;)d=d.plus(y[c++]);return d},r=function(){var c="0123456789";function y(d,S,m,A){for(var _,h=[0],v,I=0,O=d.length;I<O;){for(v=h.length;v--;h[v]*=S);for(h[0]+=A.indexOf(d.charAt(I++)),_=0;_<h.length;_++)h[_]>m-1&&(h[_+1]==null&&(h[_+1]=0),h[_+1]+=h[_]/m|0,h[_]%=m)}return h.reverse()}return function(d,S,m,A,_){var h,v,I,O,M,U,j,X,ee=d.indexOf("."),re=s,Y=a;for(ee>=0&&(O=E,E=0,d=d.replace(".",""),X=new w(S),U=X.pow(d.length-ee),E=O,X.c=y(Mt(nt(U.c),U.e,"0"),10,m,c),X.e=X.c.length),j=y(d,S,m,_?(h=L,c):(h=c,L)),I=O=j.length;j[--O]==0;j.pop());if(!j[0])return h.charAt(0);if(ee<0?--I:(U.c=j,U.e=I,U.s=A,U=t(U,X,re,Y,m),j=U.c,M=U.r,I=U.e),v=I+re+1,ee=j[v],O=m/2,M=M||v<0||j[v+1]!=null,M=Y<4?(ee!=null||M)&&(Y==0||Y==(U.s<0?3:2)):ee>O||ee==O&&(Y==4||M||Y==6&&j[v-1]&1||Y==(U.s<0?8:7)),v<1||!j[0])d=M?Mt(h.charAt(1),-re,h.charAt(0)):h.charAt(0);else{if(j.length=v,M)for(--m;++j[--v]>m;)j[v]=0,v||(++I,j=[1].concat(j));for(O=j.length;!j[--O];);for(ee=0,d="";ee<=O;d+=h.charAt(j[ee++]));d=Mt(d,I,h.charAt(0))}return d}}(),t=function(){function c(S,m,A){var _,h,v,I,O=0,M=S.length,U=m%er,j=m/er|0;for(S=S.slice();M--;)v=S[M]%er,I=S[M]/er|0,_=j*v+I*U,h=U*v+_%er*er+O,O=(h/A|0)+(_/er|0)+j*I,S[M]=h%A;return O&&(S=[O].concat(S)),S}function y(S,m,A,_){var h,v;if(A!=_)v=A>_?1:-1;else for(h=v=0;h<A;h++)if(S[h]!=m[h]){v=S[h]>m[h]?1:-1;break}return v}function d(S,m,A,_){for(var h=0;A--;)S[A]-=h,h=S[A]<m[A]?1:0,S[A]=h*_+S[A]-m[A];for(;!S[0]&&S.length>1;S.splice(0,1));}return function(S,m,A,_,h){var v,I,O,M,U,j,X,ee,re,Y,Q,ne,Ve,Ee,Ge,Se,be,$=S.s==m.s?1:-1,D=S.c,V=m.c;if(!D||!D[0]||!V||!V[0])return new w(!S.s||!m.s||(D?V&&D[0]==V[0]:!V)?NaN:D&&D[0]==0||!V?$*0:$/0);for(ee=new w($),re=ee.c=[],I=S.e-m.e,$=A+I+1,h||(h=ut,I=it(S.e/J)-it(m.e/J),$=$/J|0),O=0;V[O]==(D[O]||0);O++);if(V[O]>(D[O]||0)&&I--,$<0)re.push(1),M=!0;else{for(Ee=D.length,Se=V.length,O=0,$+=2,U=Et(h/(V[0]+1)),U>1&&(V=c(V,U,h),D=c(D,U,h),Se=V.length,Ee=D.length),Ve=Se,Y=D.slice(0,Se),Q=Y.length;Q<Se;Y[Q++]=0);be=V.slice(),be=[0].concat(be),Ge=V[0],V[1]>=h/2&&Ge++;do{if(U=0,v=y(V,Y,Se,Q),v<0){if(ne=Y[0],Se!=Q&&(ne=ne*h+(Y[1]||0)),U=Et(ne/Ge),U>1)for(U>=h&&(U=h-1),j=c(V,U,h),X=j.length,Q=Y.length;y(j,Y,X,Q)==1;)U--,d(j,Se<X?be:V,X,h),X=j.length,v=1;else U==0&&(v=U=1),j=V.slice(),X=j.length;if(X<Q&&(j=[0].concat(j)),d(Y,j,Q,h),Q=Y.length,v==-1)for(;y(V,Y,Se,Q)<1;)U++,d(Y,Se<Q?be:V,Q,h),Q=Y.length}else v===0&&(U++,Y=[0]);re[O++]=U,Y[0]?Y[Q++]=D[Ve]||0:(Y=[D[Ve]],Q=1)}while((Ve++<Ee||Y[0]!=null)&&$--);M=Y[0]!=null,re[0]||re.splice(0,1)}if(h==ut){for(O=1,$=re[0];$>=10;$/=10,O++);z(ee,A+(ee.e=O+I*J-1)+1,_,M)}else ee.e=I,ee.r=+M;return ee}}();function N(c,y,d,S){var m,A,_,h,v;if(d==null?d=a:pe(d,0,8),!c.c)return c.toString();if(m=c.c[0],_=c.e,y==null)v=nt(c.c),v=S==1||S==2&&(_<=f||_>=l)?to(v,_):Mt(v,_,"0");else if(c=z(new w(c),y,d),A=c.e,v=nt(c.c),h=v.length,S==1||S==2&&(y<=A||A<=f)){for(;h<y;v+="0",h++);v=to(v,A)}else if(y-=_,v=Mt(v,A,"0"),A+1>h){if(--y>0)for(v+=".";y--;v+="0");}else if(y+=A-h,y>0)for(A+1==h&&(v+=".");y--;v+="0");return c.s<0&&m?"-"+v:v}function R(c,y){for(var d,S=1,m=new w(c[0]);S<c.length;S++)if(d=new w(c[S]),d.s)y.call(m,d)&&(m=d);else{m=d;break}return m}function P(c,y,d){for(var S=1,m=y.length;!y[--m];y.pop());for(m=y[0];m>=10;m/=10,S++);return(d=S+d*J-1)>b?c.c=c.e=null:d<u?c.c=[c.e=0]:(c.e=d,c.c=y),c}n=function(){var c=/^(-?)0([xbo])(?=\w[\w.]*$)/i,y=/^([^.]+)\.$/,d=/^\.([^.]+)$/,S=/^-?(Infinity|NaN)$/,m=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(A,_,h,v){var I,O=h?_:_.replace(m,"");if(S.test(O))A.s=isNaN(O)?null:O<0?-1:1;else{if(!h&&(O=O.replace(c,function(M,U,j){return I=(j=j.toLowerCase())=="x"?16:j=="b"?2:8,!v||v==I?U:M}),v&&(I=v,O=O.replace(y,"$1").replace(d,"0.$1")),_!=O))return new w(O,I);if(w.DEBUG)throw Error(We+"Not a"+(v?" base "+v:"")+" number: "+_);A.s=null}A.c=A.e=null}}();function z(c,y,d,S){var m,A,_,h,v,I,O,M=c.c,U=Fa;if(M){e:{for(m=1,h=M[0];h>=10;h/=10,m++);if(A=y-m,A<0)A+=J,_=y,v=M[I=0],O=v/U[m-_-1]%10|0;else if(I=Va((A+1)/J),I>=M.length)if(S){for(;M.length<=I;M.push(0));v=O=0,m=1,A%=J,_=A-J+1}else break e;else{for(v=h=M[I],m=1;h>=10;h/=10,m++);A%=J,_=A-J+m,O=_<0?0:v/U[m-_-1]%10|0}if(S=S||y<0||M[I+1]!=null||(_<0?v:v%U[m-_-1]),S=d<4?(O||S)&&(d==0||d==(c.s<0?3:2)):O>5||O==5&&(d==4||S||d==6&&(A>0?_>0?v/U[m-_]:0:M[I-1])%10&1||d==(c.s<0?8:7)),y<1||!M[0])return M.length=0,S?(y-=c.e+1,M[0]=U[(J-y%J)%J],c.e=-y||0):M[0]=c.e=0,c;if(A==0?(M.length=I,h=1,I--):(M.length=I+1,h=U[J-A],M[I]=_>0?Et(v/U[m-_]%U[_])*h:0),S)for(;;)if(I==0){for(A=1,_=M[0];_>=10;_/=10,A++);for(_=M[0]+=h,h=1;_>=10;_/=10,h++);A!=h&&(c.e++,M[0]==ut&&(M[0]=1));break}else{if(M[I]+=h,M[I]!=ut)break;M[I--]=0,h=1}for(A=M.length;M[--A]===0;M.pop());}c.e>b?c.c=c.e=null:c.e<u&&(c.c=[c.e=0])}return c}function k(c){var y,d=c.e;return d===null?c.toString():(y=nt(c.c),y=d<=f||d>=l?to(y,d):Mt(y,d,"0"),c.s<0?"-"+y:y)}return i.absoluteValue=i.abs=function(){var c=new w(this);return c.s<0&&(c.s=1),c},i.comparedTo=function(c,y){return hn(this,new w(c,y))},i.decimalPlaces=i.dp=function(c,y){var d,S,m,A=this;if(c!=null)return pe(c,0,xe),y==null?y=a:pe(y,0,8),z(new w(A),c+A.e+1,y);if(!(d=A.c))return null;if(S=((m=d.length-1)-it(this.e/J))*J,m=d[m])for(;m%10==0;m/=10,S--);return S<0&&(S=0),S},i.dividedBy=i.div=function(c,y){return t(this,new w(c,y),s,a)},i.dividedToIntegerBy=i.idiv=function(c,y){return t(this,new w(c,y),0,1)},i.exponentiatedBy=i.pow=function(c,y){var d,S,m,A,_,h,v,I,O,M=this;if(c=new w(c),c.c&&!c.isInteger())throw Error(We+"Exponent not an integer: "+k(c));if(y!=null&&(y=new w(y)),h=c.e>14,!M.c||!M.c[0]||M.c[0]==1&&!M.e&&M.c.length==1||!c.c||!c.c[0])return O=new w(Math.pow(+k(M),h?c.s*(2-eo(c)):+k(c))),y?O.mod(y):O;if(v=c.s<0,y){if(y.c?!y.c[0]:!y.s)return new w(NaN);S=!v&&M.isInteger()&&y.isInteger(),S&&(M=M.mod(y))}else{if(c.e>9&&(M.e>0||M.e<-1||(M.e==0?M.c[0]>1||h&&M.c[1]>=24e7:M.c[0]<8e13||h&&M.c[0]<=9999975e7)))return A=M.s<0&&eo(c)?-0:0,M.e>-1&&(A=1/A),new w(v?1/A:A);E&&(A=Va(E/J+2))}for(h?(d=new w(.5),v&&(c.s=1),I=eo(c)):(m=Math.abs(+k(c)),I=m%2),O=new w(o);;){if(I){if(O=O.times(M),!O.c)break;A?O.c.length>A&&(O.c.length=A):S&&(O=O.mod(y))}if(m){if(m=Et(m/2),m===0)break;I=m%2}else if(c=c.times(d),z(c,c.e+1,1),c.e>14)I=eo(c);else{if(m=+k(c),m===0)break;I=m%2}M=M.times(M),A?M.c&&M.c.length>A&&(M.c.length=A):S&&(M=M.mod(y))}return S?O:(v&&(O=o.div(O)),y?O.mod(y):A?z(O,E,a,_):O)},i.integerValue=function(c){var y=new w(this);return c==null?c=a:pe(c,0,8),z(y,y.e+1,c)},i.isEqualTo=i.eq=function(c,y){return hn(this,new w(c,y))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(c,y){return hn(this,new w(c,y))>0},i.isGreaterThanOrEqualTo=i.gte=function(c,y){return(y=hn(this,new w(c,y)))===1||y===0},i.isInteger=function(){return!!this.c&&it(this.e/J)>this.c.length-2},i.isLessThan=i.lt=function(c,y){return hn(this,new w(c,y))<0},i.isLessThanOrEqualTo=i.lte=function(c,y){return(y=hn(this,new w(c,y)))===-1||y===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(c,y){var d,S,m,A,_=this,h=_.s;if(c=new w(c,y),y=c.s,!h||!y)return new w(NaN);if(h!=y)return c.s=-y,_.plus(c);var v=_.e/J,I=c.e/J,O=_.c,M=c.c;if(!v||!I){if(!O||!M)return O?(c.s=-y,c):new w(M?_:NaN);if(!O[0]||!M[0])return M[0]?(c.s=-y,c):new w(O[0]?_:a==3?-0:0)}if(v=it(v),I=it(I),O=O.slice(),h=v-I){for((A=h<0)?(h=-h,m=O):(I=v,m=M),m.reverse(),y=h;y--;m.push(0));m.reverse()}else for(S=(A=(h=O.length)<(y=M.length))?h:y,h=y=0;y<S;y++)if(O[y]!=M[y]){A=O[y]<M[y];break}if(A&&(m=O,O=M,M=m,c.s=-c.s),y=(S=M.length)-(d=O.length),y>0)for(;y--;O[d++]=0);for(y=ut-1;S>h;){if(O[--S]<M[S]){for(d=S;d&&!O[--d];O[d]=y);--O[d],O[S]+=ut}O[S]-=M[S]}for(;O[0]==0;O.splice(0,1),--I);return O[0]?P(c,O,I):(c.s=a==3?-1:1,c.c=[c.e=0],c)},i.modulo=i.mod=function(c,y){var d,S,m=this;return c=new w(c,y),!m.c||!c.s||c.c&&!c.c[0]?new w(NaN):!c.c||m.c&&!m.c[0]?new w(m):(g==9?(S=c.s,c.s=1,d=t(m,c,0,3),c.s=S,d.s*=S):d=t(m,c,0,g),c=m.minus(d.times(c)),!c.c[0]&&g==1&&(c.s=m.s),c)},i.multipliedBy=i.times=function(c,y){var d,S,m,A,_,h,v,I,O,M,U,j,X,ee,re,Y=this,Q=Y.c,ne=(c=new w(c,y)).c;if(!Q||!ne||!Q[0]||!ne[0])return!Y.s||!c.s||Q&&!Q[0]&&!ne||ne&&!ne[0]&&!Q?c.c=c.e=c.s=null:(c.s*=Y.s,!Q||!ne?c.c=c.e=null:(c.c=[0],c.e=0)),c;for(S=it(Y.e/J)+it(c.e/J),c.s*=Y.s,v=Q.length,M=ne.length,v<M&&(X=Q,Q=ne,ne=X,m=v,v=M,M=m),m=v+M,X=[];m--;X.push(0));for(ee=ut,re=er,m=M;--m>=0;){for(d=0,U=ne[m]%re,j=ne[m]/re|0,_=v,A=m+_;A>m;)I=Q[--_]%re,O=Q[_]/re|0,h=j*I+O*U,I=U*I+h%re*re+X[A]+d,d=(I/ee|0)+(h/re|0)+j*O,X[A--]=I%ee;X[A]=d}return d?++S:X.splice(0,1),P(c,X,S)},i.negated=function(){var c=new w(this);return c.s=-c.s||null,c},i.plus=function(c,y){var d,S=this,m=S.s;if(c=new w(c,y),y=c.s,!m||!y)return new w(NaN);if(m!=y)return c.s=-y,S.minus(c);var A=S.e/J,_=c.e/J,h=S.c,v=c.c;if(!A||!_){if(!h||!v)return new w(m/0);if(!h[0]||!v[0])return v[0]?c:new w(h[0]?S:m*0)}if(A=it(A),_=it(_),h=h.slice(),m=A-_){for(m>0?(_=A,d=v):(m=-m,d=h),d.reverse();m--;d.push(0));d.reverse()}for(m=h.length,y=v.length,m-y<0&&(d=v,v=h,h=d,y=m),m=0;y;)m=(h[--y]=h[y]+v[y]+m)/ut|0,h[y]=ut===h[y]?0:h[y]%ut;return m&&(h=[m].concat(h),++_),P(c,h,_)},i.precision=i.sd=function(c,y){var d,S,m,A=this;if(c!=null&&c!==!!c)return pe(c,1,xe),y==null?y=a:pe(y,0,8),z(new w(A),c,y);if(!(d=A.c))return null;if(m=d.length-1,S=m*J+1,m=d[m]){for(;m%10==0;m/=10,S--);for(m=d[0];m>=10;m/=10,S++);}return c&&A.e+1>S&&(S=A.e+1),S},i.shiftedBy=function(c){return pe(c,-ja,ja),this.times("1e"+c)},i.squareRoot=i.sqrt=function(){var c,y,d,S,m,A=this,_=A.c,h=A.s,v=A.e,I=s+4,O=new w("0.5");if(h!==1||!_||!_[0])return new w(!h||h<0&&(!_||_[0])?NaN:_?A:1/0);if(h=Math.sqrt(+k(A)),h==0||h==1/0?(y=nt(_),(y.length+v)%2==0&&(y+="0"),h=Math.sqrt(+y),v=it((v+1)/2)-(v<0||v%2),h==1/0?y="5e"+v:(y=h.toExponential(),y=y.slice(0,y.indexOf("e")+1)+v),d=new w(y)):d=new w(h+""),d.c[0]){for(v=d.e,h=v+I,h<3&&(h=0);;)if(m=d,d=O.times(m.plus(t(A,m,I,1))),nt(m.c).slice(0,h)===(y=nt(d.c)).slice(0,h))if(d.e<v&&--h,y=y.slice(h-3,h+1),y=="9999"||!S&&y=="4999"){if(!S&&(z(m,m.e+s+2,0),m.times(m).eq(A))){d=m;break}I+=4,h+=4,S=1}else{(!+y||!+y.slice(1)&&y.charAt(0)=="5")&&(z(d,d.e+s+2,1),c=!d.times(d).eq(A));break}}return z(d,d.e+s+1,a,c)},i.toExponential=function(c,y){return c!=null&&(pe(c,0,xe),c++),N(this,c,y,1)},i.toFixed=function(c,y){return c!=null&&(pe(c,0,xe),c=c+this.e+1),N(this,c,y)},i.toFormat=function(c,y,d){var S,m=this;if(d==null)c!=null&&y&&typeof y=="object"?(d=y,y=null):c&&typeof c=="object"?(d=c,c=y=null):d=C;else if(typeof d!="object")throw Error(We+"Argument not an object: "+d);if(S=m.toFixed(c,y),m.c){var A,_=S.split("."),h=+d.groupSize,v=+d.secondaryGroupSize,I=d.groupSeparator||"",O=_[0],M=_[1],U=m.s<0,j=U?O.slice(1):O,X=j.length;if(v&&(A=h,h=v,v=A,X-=A),h>0&&X>0){for(A=X%h||h,O=j.substr(0,A);A<X;A+=h)O+=I+j.substr(A,h);v>0&&(O+=I+j.slice(A)),U&&(O="-"+O)}S=M?O+(d.decimalSeparator||"")+((v=+d.fractionGroupSize)?M.replace(new RegExp("\\d{"+v+"}\\B","g"),"$&"+(d.fractionGroupSeparator||"")):M):O}return(d.prefix||"")+S+(d.suffix||"")},i.toFraction=function(c){var y,d,S,m,A,_,h,v,I,O,M,U,j=this,X=j.c;if(c!=null&&(h=new w(c),!h.isInteger()&&(h.c||h.s!==1)||h.lt(o)))throw Error(We+"Argument "+(h.isInteger()?"out of range: ":"not an integer: ")+k(h));if(!X)return new w(j);for(y=new w(o),I=d=new w(o),S=v=new w(o),U=nt(X),A=y.e=U.length-j.e-1,y.c[0]=Fa[(_=A%J)<0?J+_:_],c=!c||h.comparedTo(y)>0?A>0?y:I:h,_=b,b=1/0,h=new w(U),v.c[0]=0;O=t(h,y,0,1),m=d.plus(O.times(S)),m.comparedTo(c)!=1;)d=S,S=m,I=v.plus(O.times(m=I)),v=m,y=h.minus(O.times(m=y)),h=m;return m=t(c.minus(d),S,0,1),v=v.plus(m.times(I)),d=d.plus(m.times(S)),v.s=I.s=j.s,A=A*2,M=t(I,S,A,a).minus(j).abs().comparedTo(t(v,d,A,a).minus(j).abs())<1?[I,S]:[v,d],b=_,M},i.toNumber=function(){return+k(this)},i.toPrecision=function(c,y){return c!=null&&pe(c,1,xe),N(this,c,y,2)},i.toString=function(c){var y,d=this,S=d.s,m=d.e;return m===null?S?(y="Infinity",S<0&&(y="-"+y)):y="NaN":(c==null?y=m<=f||m>=l?to(nt(d.c),m):Mt(nt(d.c),m,"0"):c===10&&x?(d=z(new w(d),s+m+1,a),y=Mt(nt(d.c),d.e,"0")):(pe(c,2,L.length,"Base"),y=r(Mt(nt(d.c),m,"0"),10,c,S,!0)),S<0&&d.c[0]&&(y="-"+y)),y},i.valueOf=i.toJSON=function(){return k(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,e!=null&&w.set(e),w}function it(e){var t=e|0;return e>0||e===t?t:t-1}function nt(e){for(var t,r,n=1,i=e.length,o=e[0]+"";n<i;){for(t=e[n++]+"",r=J-t.length;r--;t="0"+t);o+=t}for(i=o.length;o.charCodeAt(--i)===48;);return o.slice(0,i+1||1)}function hn(e,t){var r,n,i=e.c,o=t.c,s=e.s,a=t.s,f=e.e,l=t.e;if(!s||!a)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=s<0,n=f==l,!i||!o)return n?0:!i^r?1:-1;if(!n)return f>l^r?1:-1;for(a=(f=i.length)<(l=o.length)?f:l,s=0;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^r?1:-1;return f==l?0:f>l^r?1:-1}function pe(e,t,r,n){if(e<t||e>r||e!==Et(e))throw Error(We+(n||"Argument")+(typeof e=="number"?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function eo(e){var t=e.c.length-1;return it(e.e/J)==t&&e.c[t]%2!=0}function to(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function Mt(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(n=e.length,++t>n){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}var y2=P0();function ud(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ha(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ud(Object(r),!0).forEach(function(n){Tt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ud(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}class p2 extends Hh{constructor(t){let{config:r={},state:n={}}=t;super(),Tt(this,"defaultConfig",{}),Tt(this,"defaultState",{}),Tt(this,"disabled",!1),Tt(this,"name","BaseController"),Tt(this,"initialConfig",void 0),Tt(this,"initialState",void 0),Tt(this,"internalConfig",this.defaultConfig),Tt(this,"internalState",this.defaultState),this.initialState=n,this.initialConfig=r}get config(){return this.internalConfig}get state(){return this.internalState}configure(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0){this.internalConfig=r?t:Object.assign(this.internalConfig,t);for(const i in this.internalConfig)typeof this.internalConfig[i]<"u"&&(this[i]=this.internalConfig[i])}else for(const i in t)typeof this.internalConfig[i]<"u"&&(this.internalConfig[i]=t[i],this[i]=t[i])}update(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.internalState=Ha(r?{}:Ha({},this.internalState),t),this.emit("store",this.internalState)}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}}const XA=()=>!0,YA=["newListener","removeListener"],JA=e=>!YA.includes(e);function QA(e,t){return typeof e.rawListeners<"u"?e.rawListeners(t):e.listeners(t)}function _2(e,t){let n=(t||{}).eventFilter||XA;if(typeof n=="string"&&n==="skipInternal"&&(n=JA),typeof n!="function")throw new Error("createEventEmitterProxy - Invalid eventFilter");let i=e,o=a=>{const f=i;i=a,f.eventNames().filter(n).forEach(l=>{QA(f,l).forEach(u=>a.on(l,u))}),f.removeAllListeners()};return new Proxy({},{get:(a,f)=>f==="setTarget"?o:i[f],set:(a,f,l)=>f==="setTarget"?(o=l,!0):(i[f]=l,!0)})}function cd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function dd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cd(Object(r),!0).forEach(function(n){Tt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cd(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const e2=F0();function b2(e){const t=new Hh;return t.sendAsync=async r=>{const n=await e.handle(r);if(n.error){var i,o;const s=lr.serializeError(n.error,{fallbackError:{message:((i=n.error)===null||i===void 0?void 0:i.message)||n.error.toString(),code:((o=n.error)===null||o===void 0?void 0:o.code)||-32603}});throw lr.ethErrors.rpc.internal(s)}return n.result},t.send=(r,n)=>{if(typeof n!="function")throw new Error('Must provide callback to "send" method.');e.handle(r,n)},e.on&&e.on("notification",r=>{t.emit("data",null,r)}),t.request=async r=>{const n=dd(dd({},r),{},{id:e2(),jsonrpc:"2.0"});return await t.sendAsync(n)},t}const w2={IFRAME_STATUS:"iframe_status",CREATE_WINDOW:"create_window",CLOSE_WINDOW:"close_window",USER_LOGGED_IN:"user_logged_in",USER_LOGGED_OUT:"user_logged_out"},m2={LOGOUT:"logout",WALLET_INSTANCE_ID:"wallet_instance_id",USER_INFO:"user_info",SET_PROVIDER:"set_provider",TOPUP:"topup",IFRAME_STATUS:"iframe_status",OPENED_WINDOW:"opened_window",CLOSED_WINDOW:"closed_window",GET_PROVIDER_STATE:"get_provider_state",LOGIN_WITH_PRIVATE_KEY:"login_with_private_key"},v2={GET_PROVIDER_STATE:"wallet_get_provider_state"},E2={ACCOUNTS_CHANGED:"wallet_accounts_changed",CHAIN_CHANGED:"wallet_chain_changed",UNLOCK_STATE_CHANGED:"wallet_unlock_state_changed"};function hd(e,t){if(e!==""&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}function t2(e,t,r){const n=ot.fromSigned(t),i=ot.fromSigned(r),o=ot.bufferToBigInt(e),s=hd(ot.toUnsigned(n).toString("hex"),64),a=hd(ot.toUnsigned(i).toString("hex"),64),f=ot.stripHexPrefix(ot.bigIntToHex(o));return ot.addHexPrefix(s.concat(a,f))}const T2=(e,t)=>{const r=q.from(e,"hex"),n=ot.stripHexPrefix(t),i=ot.ecsign(q.from(n,"hex"),r);return t2(ot.bigIntToBuffer(i.v),i.r,i.s)},r2=["Gateway timeout","ETIMEDOUT","failed to parse response body","Failed to fetch"];function n2(e){switch(e.status){case 405:throw lr.ethErrors.rpc.methodNotFound();case 418:throw lr.ethErrors.rpc.internal({message:"Request is being rate limited."});case 503:case 504:throw lr.ethErrors.rpc.internal({message:"Gateway timeout. The request took too long to process.This can happen when querying over too wide a block range."})}}function i2(e){return new Promise(t=>{setTimeout(t,e)})}function o2(e,t){if(e.status!==200)throw lr.ethErrors.rpc.internal({message:`Non-200 status code: '${e.status}'`,data:t});if(t.error)throw lr.ethErrors.rpc.internal({data:t.error});return t.result}function s2(e){let{req:t,rpcTarget:r,originHttpHeaderKey:n}=e;const i=new URL(r),o={id:t.id,jsonrpc:t.jsonrpc,method:t.method,params:t.params},s=t.origin,a=JSON.stringify(o),f={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:a};return n&&s&&(f.headers[n]=s),{fetchUrl:i.href,fetchParams:f}}function S2(e){let{rpcTarget:t,originHttpHeaderKey:r}=e;return lm(async(n,i,o)=>{const{fetchUrl:s,fetchParams:a}=s2({req:n,rpcTarget:t,originHttpHeaderKey:r}),f=5,l=1e3;for(let u=0;u<f;u++){try{const b=await fetch(s,a);n2(b);const p=await b.json(),g=o2(b,p);i.result=g;return}catch(b){const p=b.toString();if(!r2.some(E=>p.includes(E)))throw b}await i2(l)}})}function A2(e){return function(r,n,i){i(o=>{n.error&&Vl.warn(`Error in RPC response:
`,n),!r.isTorusInternal&&(Vl.info(`RPC (${e.origin}):`,r,"->",n),o())})}}var gd;(function(e){e.approved="approved",e.cancelled="cancelled",e.confirmed="confirmed",e.failed="failed",e.finalized="finalized",e.processed="processed",e.rejected="rejected",e.signed="signed",e.submitted="submitted",e.unapproved="unapproved",e.dropped="dropped",e.expired="expired"})(gd||(gd={}));export{Si as A,p2 as B,m2 as C,ci as D,ot as E,Vy as F,sg as G,At as H,ht as I,Xm as J,tg as K,UA as L,y2 as M,T2 as N,v2 as P,ny as S,w2 as a,E2 as b,A2 as c,_2 as d,S2 as e,In as f,Ce as g,Bf as h,En as i,Hy as j,Qe as k,ky as l,Ae as m,xd as n,tt as o,b2 as p,l2 as q,Af as r,Yy as s,f2 as t,li as u,Od as v,Lo as w,xy as x,Td as y,Ed as z};
